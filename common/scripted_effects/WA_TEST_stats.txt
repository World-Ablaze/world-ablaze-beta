############################################################################################################
#	World Ablaze - Country Statistics Test Suite
#	Tests civilian factories, military factories, army size, tanks, fleet at specific dates
#	Currently configured for: Germany (GER)
#	Shows both threshold AND measured value in logs
############################################################################################################

### Test State Constants
@WA_TEST_ST_NOT_LAUNCHED = 0
@WA_TEST_ST_ONGOING = 1
@WA_TEST_ST_PASSED = 2
@WA_TEST_ST_FAILED = 3

############################################################################################################
#	GERMANY THRESHOLDS
#	Checkpoint dates: 1939.9.1, 1940.5.1, 1941.6.1, 1942.6.1
############################################################################################################

# Checkpoint 1: 1939.9.1
@WA_TEST_ST_GER_CP1_civs = 320
@WA_TEST_ST_GER_CP1_mils = 300
@WA_TEST_ST_GER_CP1_army = 0		# placeholder
@WA_TEST_ST_GER_CP1_tanks = 0		# placeholder
@WA_TEST_ST_GER_CP1_fleet = 0		# placeholder

# Checkpoint 2: 1940.5.1
@WA_TEST_ST_GER_CP2_civs = 320
@WA_TEST_ST_GER_CP2_mils = 330
@WA_TEST_ST_GER_CP2_army = 0		# placeholder
@WA_TEST_ST_GER_CP2_tanks = 0		# placeholder
@WA_TEST_ST_GER_CP2_fleet = 0		# placeholder

# Checkpoint 3: 1941.6.1
@WA_TEST_ST_GER_CP3_civs = 320
@WA_TEST_ST_GER_CP3_mils = 330
@WA_TEST_ST_GER_CP3_army = 0		# placeholder
@WA_TEST_ST_GER_CP3_tanks = 0		# placeholder
@WA_TEST_ST_GER_CP3_fleet = 0		# placeholder

# Checkpoint 4: 1942.6.1
@WA_TEST_ST_GER_CP4_civs = 650
@WA_TEST_ST_GER_CP4_mils = 650
@WA_TEST_ST_GER_CP4_army = 0		# placeholder
@WA_TEST_ST_GER_CP4_tanks = 0		# placeholder
@WA_TEST_ST_GER_CP4_fleet = 0		# placeholder

############################################################################################################
#	SUITE ENTRY POINT
############################################################################################################

WA_TEST_ST_suite = {
	GER = {
		WA_TEST_ST_init = yes
		set_country_flag = WA_TEST_ST_suite_active
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | STATS TEST SUITE LAUNCHED"
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | Checkpoints: 1939.9.1, 1940.5.1, 1941.6.1, 1942.6.1"
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"
	}
}

############################################################################################################
#	INIT
############################################################################################################

WA_TEST_ST_init = {
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ST INIT: Resetting test states"

	# Clear checkpoint done flags
	clr_country_flag = WA_TEST_ST_GER_CP1_done
	clr_country_flag = WA_TEST_ST_GER_CP2_done
	clr_country_flag = WA_TEST_ST_GER_CP3_done
	clr_country_flag = WA_TEST_ST_GER_CP4_done

	# Initialize result storage for CP1
	set_variable = { WA_TEST_ST_GER_CP1_civs_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP1_mils_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP1_army_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP1_tanks_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP1_fleet_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP1_state = @WA_TEST_ST_NOT_LAUNCHED }
	set_variable = { WA_TEST_ST_GER_CP1_failed_checks = 0 }

	# Initialize result storage for CP2
	set_variable = { WA_TEST_ST_GER_CP2_civs_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP2_mils_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP2_army_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP2_tanks_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP2_fleet_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP2_state = @WA_TEST_ST_NOT_LAUNCHED }
	set_variable = { WA_TEST_ST_GER_CP2_failed_checks = 0 }

	# Initialize result storage for CP3
	set_variable = { WA_TEST_ST_GER_CP3_civs_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP3_mils_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP3_army_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP3_tanks_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP3_fleet_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP3_state = @WA_TEST_ST_NOT_LAUNCHED }
	set_variable = { WA_TEST_ST_GER_CP3_failed_checks = 0 }

	# Initialize result storage for CP4
	set_variable = { WA_TEST_ST_GER_CP4_civs_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP4_mils_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP4_army_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP4_tanks_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP4_fleet_actual = 0 }
	set_variable = { WA_TEST_ST_GER_CP4_state = @WA_TEST_ST_NOT_LAUNCHED }
	set_variable = { WA_TEST_ST_GER_CP4_failed_checks = 0 }
}

############################################################################################################
#	MONTHLY CHECK - Called from on_monthly
############################################################################################################

WA_TEST_ST_GER_monthly_check = {
	# CP1: 1939.9.1
	if = {
		limit = {
			date > 1939.8.31
			NOT = { has_country_flag = WA_TEST_ST_GER_CP1_done }
		}
		WA_TEST_ST_GER_check_CP1 = yes
		set_country_flag = WA_TEST_ST_GER_CP1_done
	}

	# CP2: 1940.5.1
	if = {
		limit = {
			date > 1940.4.30
			NOT = { has_country_flag = WA_TEST_ST_GER_CP2_done }
		}
		WA_TEST_ST_GER_check_CP2 = yes
		set_country_flag = WA_TEST_ST_GER_CP2_done
	}

	# CP3: 1941.6.1
	if = {
		limit = {
			date > 1941.5.31
			NOT = { has_country_flag = WA_TEST_ST_GER_CP3_done }
		}
		WA_TEST_ST_GER_check_CP3 = yes
		set_country_flag = WA_TEST_ST_GER_CP3_done
	}

	# CP4: 1942.6.1
	if = {
		limit = {
			date > 1942.5.31
			NOT = { has_country_flag = WA_TEST_ST_GER_CP4_done }
		}
		WA_TEST_ST_GER_check_CP4 = yes
		set_country_flag = WA_TEST_ST_GER_CP4_done
		# All checkpoints done, deactivate suite
		clr_country_flag = WA_TEST_ST_suite_active
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | STATS TEST SUITE COMPLETE - All 4 checkpoints evaluated"
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"
		WA_TEST_ST_print = yes
	}
}

############################################################################################################
#	CHECKPOINT 1: 1939.9.1
############################################################################################################

WA_TEST_ST_GER_check_CP1 = {
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CHECKPOINT 1 (1939.9.1) - Evaluating..."
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"

	# Capture actual values
	set_variable = { WA_TEST_ST_GER_CP1_civs_actual = num_of_civilian_factories }
	set_variable = { WA_TEST_ST_GER_CP1_mils_actual = num_of_military_factories }
	set_variable = { WA_TEST_ST_GER_CP1_army_actual = num_armies }
	set_variable = { WA_TEST_ST_GER_CP1_fleet_actual = num_ships }
	# Tanks: sum of all tank types in armies (simplified - using 0 as placeholder threshold anyway)
	set_variable = { WA_TEST_ST_GER_CP1_tanks_actual = 0 }

	set_variable = { WA_TEST_ST_GER_CP1_failed_checks = 0 }

	# Check CIVS
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP1_civs_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP1_civs }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   CIVS:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP1_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   CIVS:  [?_st_actual] / [?_st_threshold]  => PASS"
	}

	# Check MILS
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP1_mils_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP1_mils }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   MILS:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP1_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   MILS:  [?_st_actual] / [?_st_threshold]  => PASS"
	}

	# Check ARMY (placeholder - threshold is 0)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP1_army_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP1_army }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   ARMY:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP1_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   ARMY:  [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Check TANKS (placeholder - threshold is 0)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP1_tanks_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP1_tanks }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   TANKS: [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP1_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   TANKS: [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Check FLEET (placeholder - threshold is 0)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP1_fleet_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP1_fleet }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   FLEET: [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP1_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   FLEET: [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Set overall CP state
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ------------------------------------------------"
	if = {
		limit = { check_variable = { WA_TEST_ST_GER_CP1_failed_checks > 0 } }
		set_variable = { WA_TEST_ST_GER_CP1_state = @WA_TEST_ST_FAILED }
		set_temp_variable = { _st_fails = WA_TEST_ST_GER_CP1_failed_checks }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CP1 RESULT: FAILED ([?_st_fails] checks failed)"
	}
	else = {
		set_variable = { WA_TEST_ST_GER_CP1_state = @WA_TEST_ST_PASSED }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CP1 RESULT: PASSED (all checks passed)"
	}
}

############################################################################################################
#	CHECKPOINT 2: 1940.5.1
############################################################################################################

WA_TEST_ST_GER_check_CP2 = {
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CHECKPOINT 2 (1940.5.1) - Evaluating..."
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"

	# Capture actual values
	set_variable = { WA_TEST_ST_GER_CP2_civs_actual = num_of_civilian_factories }
	set_variable = { WA_TEST_ST_GER_CP2_mils_actual = num_of_military_factories }
	set_variable = { WA_TEST_ST_GER_CP2_army_actual = num_armies }
	set_variable = { WA_TEST_ST_GER_CP2_fleet_actual = num_ships }
	set_variable = { WA_TEST_ST_GER_CP2_tanks_actual = 0 }

	set_variable = { WA_TEST_ST_GER_CP2_failed_checks = 0 }

	# Check CIVS
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP2_civs_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP2_civs }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   CIVS:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP2_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   CIVS:  [?_st_actual] / [?_st_threshold]  => PASS"
	}

	# Check MILS
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP2_mils_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP2_mils }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   MILS:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP2_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   MILS:  [?_st_actual] / [?_st_threshold]  => PASS"
	}

	# Check ARMY (placeholder)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP2_army_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP2_army }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   ARMY:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP2_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   ARMY:  [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Check TANKS (placeholder)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP2_tanks_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP2_tanks }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   TANKS: [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP2_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   TANKS: [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Check FLEET (placeholder)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP2_fleet_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP2_fleet }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   FLEET: [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP2_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   FLEET: [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Set overall CP state
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ------------------------------------------------"
	if = {
		limit = { check_variable = { WA_TEST_ST_GER_CP2_failed_checks > 0 } }
		set_variable = { WA_TEST_ST_GER_CP2_state = @WA_TEST_ST_FAILED }
		set_temp_variable = { _st_fails = WA_TEST_ST_GER_CP2_failed_checks }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CP2 RESULT: FAILED ([?_st_fails] checks failed)"
	}
	else = {
		set_variable = { WA_TEST_ST_GER_CP2_state = @WA_TEST_ST_PASSED }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CP2 RESULT: PASSED (all checks passed)"
	}
}

############################################################################################################
#	CHECKPOINT 3: 1941.6.1
############################################################################################################

WA_TEST_ST_GER_check_CP3 = {
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CHECKPOINT 3 (1941.6.1) - Evaluating..."
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"

	# Capture actual values
	set_variable = { WA_TEST_ST_GER_CP3_civs_actual = num_of_civilian_factories }
	set_variable = { WA_TEST_ST_GER_CP3_mils_actual = num_of_military_factories }
	set_variable = { WA_TEST_ST_GER_CP3_army_actual = num_armies }
	set_variable = { WA_TEST_ST_GER_CP3_fleet_actual = num_ships }
	set_variable = { WA_TEST_ST_GER_CP3_tanks_actual = 0 }

	set_variable = { WA_TEST_ST_GER_CP3_failed_checks = 0 }

	# Check CIVS
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP3_civs_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP3_civs }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   CIVS:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP3_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   CIVS:  [?_st_actual] / [?_st_threshold]  => PASS"
	}

	# Check MILS
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP3_mils_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP3_mils }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   MILS:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP3_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   MILS:  [?_st_actual] / [?_st_threshold]  => PASS"
	}

	# Check ARMY (placeholder)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP3_army_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP3_army }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   ARMY:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP3_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   ARMY:  [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Check TANKS (placeholder)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP3_tanks_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP3_tanks }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   TANKS: [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP3_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   TANKS: [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Check FLEET (placeholder)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP3_fleet_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP3_fleet }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   FLEET: [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP3_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   FLEET: [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Set overall CP state
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ------------------------------------------------"
	if = {
		limit = { check_variable = { WA_TEST_ST_GER_CP3_failed_checks > 0 } }
		set_variable = { WA_TEST_ST_GER_CP3_state = @WA_TEST_ST_FAILED }
		set_temp_variable = { _st_fails = WA_TEST_ST_GER_CP3_failed_checks }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CP3 RESULT: FAILED ([?_st_fails] checks failed)"
	}
	else = {
		set_variable = { WA_TEST_ST_GER_CP3_state = @WA_TEST_ST_PASSED }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CP3 RESULT: PASSED (all checks passed)"
	}
}

############################################################################################################
#	CHECKPOINT 4: 1942.6.1
############################################################################################################

WA_TEST_ST_GER_check_CP4 = {
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CHECKPOINT 4 (1942.6.1) - Evaluating..."
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ================================================"

	# Capture actual values
	set_variable = { WA_TEST_ST_GER_CP4_civs_actual = num_of_civilian_factories }
	set_variable = { WA_TEST_ST_GER_CP4_mils_actual = num_of_military_factories }
	set_variable = { WA_TEST_ST_GER_CP4_army_actual = num_armies }
	set_variable = { WA_TEST_ST_GER_CP4_fleet_actual = num_ships }
	set_variable = { WA_TEST_ST_GER_CP4_tanks_actual = 0 }

	set_variable = { WA_TEST_ST_GER_CP4_failed_checks = 0 }

	# Check CIVS
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP4_civs_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP4_civs }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   CIVS:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP4_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   CIVS:  [?_st_actual] / [?_st_threshold]  => PASS"
	}

	# Check MILS
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP4_mils_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP4_mils }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   MILS:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP4_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   MILS:  [?_st_actual] / [?_st_threshold]  => PASS"
	}

	# Check ARMY (placeholder)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP4_army_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP4_army }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   ARMY:  [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP4_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   ARMY:  [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Check TANKS (placeholder)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP4_tanks_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP4_tanks }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   TANKS: [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP4_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   TANKS: [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Check FLEET (placeholder)
	set_temp_variable = { _st_actual = WA_TEST_ST_GER_CP4_fleet_actual }
	set_temp_variable = { _st_threshold = @WA_TEST_ST_GER_CP4_fleet }
	if = {
		limit = { check_variable = { _st_actual < _st_threshold } }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   FLEET: [?_st_actual] / [?_st_threshold]  => FAIL"
		add_to_variable = { WA_TEST_ST_GER_CP4_failed_checks = 1 }
	}
	else = {
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] |   FLEET: [?_st_actual] / [?_st_threshold]  => PASS (placeholder)"
	}

	# Set overall CP state
	log = "[GetYear] [GetMonth] | STATS | [This.GetName] | ------------------------------------------------"
	if = {
		limit = { check_variable = { WA_TEST_ST_GER_CP4_failed_checks > 0 } }
		set_variable = { WA_TEST_ST_GER_CP4_state = @WA_TEST_ST_FAILED }
		set_temp_variable = { _st_fails = WA_TEST_ST_GER_CP4_failed_checks }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CP4 RESULT: FAILED ([?_st_fails] checks failed)"
	}
	else = {
		set_variable = { WA_TEST_ST_GER_CP4_state = @WA_TEST_ST_PASSED }
		log = "[GetYear] [GetMonth] | STATS | [This.GetName] | CP4 RESULT: PASSED (all checks passed)"
	}
}

############################################################################################################
#	PRINT RESULTS
############################################################################################################

WA_TEST_ST_print = {
	GER = {
		log = " "
		log = "====================================================================="
		log = "  STATS TEST SUITE - GERMANY RESULTS"
		log = "====================================================================="
		log = "  CP   | Date       | CIVS           | MILS           | Status"
		log = "---------------------------------------------------------------------"

		# CP1
		set_temp_variable = { _st_s = WA_TEST_ST_GER_CP1_state }
		set_temp_variable = { _st_civs_a = WA_TEST_ST_GER_CP1_civs_actual }
		set_temp_variable = { _st_civs_t = @WA_TEST_ST_GER_CP1_civs }
		set_temp_variable = { _st_mils_a = WA_TEST_ST_GER_CP1_mils_actual }
		set_temp_variable = { _st_mils_t = @WA_TEST_ST_GER_CP1_mils }
		if = { limit = { check_variable = { _st_s = @WA_TEST_ST_PASSED } }
			log = "  CP1  | 1939.9.1   | [?_st_civs_a]/[?_st_civs_t]      | [?_st_mils_a]/[?_st_mils_t]      | PASSED"
		}
		else_if = { limit = { check_variable = { _st_s = @WA_TEST_ST_FAILED } }
			log = "  CP1  | 1939.9.1   | [?_st_civs_a]/[?_st_civs_t]      | [?_st_mils_a]/[?_st_mils_t]      | FAILED"
		}
		else = {
			log = "  CP1  | 1939.9.1   | -              | -              | NOT_RUN"
		}

		# CP2
		set_temp_variable = { _st_s = WA_TEST_ST_GER_CP2_state }
		set_temp_variable = { _st_civs_a = WA_TEST_ST_GER_CP2_civs_actual }
		set_temp_variable = { _st_civs_t = @WA_TEST_ST_GER_CP2_civs }
		set_temp_variable = { _st_mils_a = WA_TEST_ST_GER_CP2_mils_actual }
		set_temp_variable = { _st_mils_t = @WA_TEST_ST_GER_CP2_mils }
		if = { limit = { check_variable = { _st_s = @WA_TEST_ST_PASSED } }
			log = "  CP2  | 1940.5.1   | [?_st_civs_a]/[?_st_civs_t]      | [?_st_mils_a]/[?_st_mils_t]      | PASSED"
		}
		else_if = { limit = { check_variable = { _st_s = @WA_TEST_ST_FAILED } }
			log = "  CP2  | 1940.5.1   | [?_st_civs_a]/[?_st_civs_t]      | [?_st_mils_a]/[?_st_mils_t]      | FAILED"
		}
		else = {
			log = "  CP2  | 1940.5.1   | -              | -              | NOT_RUN"
		}

		# CP3
		set_temp_variable = { _st_s = WA_TEST_ST_GER_CP3_state }
		set_temp_variable = { _st_civs_a = WA_TEST_ST_GER_CP3_civs_actual }
		set_temp_variable = { _st_civs_t = @WA_TEST_ST_GER_CP3_civs }
		set_temp_variable = { _st_mils_a = WA_TEST_ST_GER_CP3_mils_actual }
		set_temp_variable = { _st_mils_t = @WA_TEST_ST_GER_CP3_mils }
		if = { limit = { check_variable = { _st_s = @WA_TEST_ST_PASSED } }
			log = "  CP3  | 1941.6.1   | [?_st_civs_a]/[?_st_civs_t]      | [?_st_mils_a]/[?_st_mils_t]      | PASSED"
		}
		else_if = { limit = { check_variable = { _st_s = @WA_TEST_ST_FAILED } }
			log = "  CP3  | 1941.6.1   | [?_st_civs_a]/[?_st_civs_t]      | [?_st_mils_a]/[?_st_mils_t]      | FAILED"
		}
		else = {
			log = "  CP3  | 1941.6.1   | -              | -              | NOT_RUN"
		}

		# CP4
		set_temp_variable = { _st_s = WA_TEST_ST_GER_CP4_state }
		set_temp_variable = { _st_civs_a = WA_TEST_ST_GER_CP4_civs_actual }
		set_temp_variable = { _st_civs_t = @WA_TEST_ST_GER_CP4_civs }
		set_temp_variable = { _st_mils_a = WA_TEST_ST_GER_CP4_mils_actual }
		set_temp_variable = { _st_mils_t = @WA_TEST_ST_GER_CP4_mils }
		if = { limit = { check_variable = { _st_s = @WA_TEST_ST_PASSED } }
			log = "  CP4  | 1942.6.1   | [?_st_civs_a]/[?_st_civs_t]      | [?_st_mils_a]/[?_st_mils_t]      | PASSED"
		}
		else_if = { limit = { check_variable = { _st_s = @WA_TEST_ST_FAILED } }
			log = "  CP4  | 1942.6.1   | [?_st_civs_a]/[?_st_civs_t]      | [?_st_mils_a]/[?_st_mils_t]      | FAILED"
		}
		else = {
			log = "  CP4  | 1942.6.1   | -              | -              | NOT_RUN"
		}

		log = "====================================================================="
	}
}
