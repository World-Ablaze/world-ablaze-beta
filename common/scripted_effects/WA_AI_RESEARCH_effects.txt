WA_AI_RESEARCH_check_for_empty_research_slots = {

	for_each_loop = { array = global.technology

		if = { limit = { check_variable = { i > 0 } is_researching_technology = var:v }
			add_to_temp_variable = { techs_being_researched = 1 }
		}
	}

	if = {
		limit = {
			check_variable = { techs_being_researched < amount_research_slots }
		}

		set_country_flag = WA_AI_unused_research_slots
		add_to_variable = { WA_AI_unused_research_slots_count = 1 }
	}
	else = {
		clr_country_flag = WA_AI_unused_research_slots
		clear_variable = WA_AI_unused_research_slots_count
	}

	if = {
		limit = {
			check_variable = { WA_AI_unused_research_slots_count > 3 }
		}

		set_country_flag = WA_AI_unused_research_slots_extended
	}
	else = { clr_country_flag = WA_AI_unused_research_slots_extended }
}