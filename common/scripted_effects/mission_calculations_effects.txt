### FRA

FRA_CALC_navy_effect = {
    set_variable = { fra_sub_var = num_ships_with_type@submarine }
	add_to_variable = {fra_sub_var = num_ships_with_type@cruiser_submarine }
}

FRA_CALC_airforce_effect = {
    set_variable = { french_figthers = num_deployed_planes_with_type@small_fighter_airframe}
    add_to_variable = {french_figthers = num_deployed_planes_with_type@small_fighter_multirole_airframe }

    set_variable = {french_bombers = num_deployed_planes_with_type@medium_heavy_bomber_airframe}
    add_to_variable = { french_bombers = num_deployed_planes_with_type@large_bomber_airframe}

    set_variable = { fra_cur_atac = num_deployed_planes_with_type@medium_fighter_multirole_airframe }
    set_variable = { french_attackers = fra_cur_atac }

    set_variable = { french_heavy_plane = num_deployed_planes_with_type@medium_fighter_airframe }
    add_to_variable = { french_heavy_plane = fra_cur_atac }

    set_variable = { fra_cur_cas = num_deployed_planes_with_type@small_bomber_airframe }
    add_to_variable = { french_attackers = fra_cur_cas }
}

### ITA

ITA_CALC_airforce_effect = {
    ### Fighters
    set_variable = { ita_cur_fit = num_deployed_planes_with_type@small_fighter_airframe }
    set_variable = { ITA_modernization_of_the_regio_aeronautica_fighters = ita_cur_fit }

    set_variable = { ita_cur_int = num_deployed_planes_with_type@small_fighter_interceptor_airframe }
    add_to_variable = { ITA_modernization_of_the_regio_aeronautica_fighters = ita_cur_int }

    set_variable = { ita_cur_fim = num_deployed_planes_with_type@small_fighter_multirole_airframe }
    add_to_variable = { ITA_modernization_of_the_regio_aeronautica_fighters = ita_cur_fim }

    ### Bombers
    set_variable = { ita_cur_tac = num_deployed_planes_with_type@medium_heavy_bomber_airframe }
    set_variable = { ITA_modernization_of_the_regio_aeronautica_bombers = ita_cur_tac }

    set_variable = { ita_cur_str = num_deployed_planes_with_type@medium_bomber_airframe }
    add_to_variable = { ITA_modernization_of_the_regio_aeronautica_bombers = ita_cur_str }
}

ITA_CALC_navy_effect = {
    set_variable = { ITA_modernization_of_the_regio_marina_submarine = num_ships_with_type@submarine }
	subtract_from_variable = { ITA_modernization_of_the_regio_marina_submarine = num_ships_with_type@cruiser_submarine }
}

ITA_CALC_army_effect = {
    set_variable = { ita_cur_lt = num_equipment_in_armies@light_tank_chassis }
    set_variable = { modernization_of_the_Regio_esercito_tanks = ita_cur_lt }

    set_variable = { ita_cur_mt = num_equipment_in_armies@medium_tank_chassis }
    add_to_variable = { modernization_of_the_Regio_esercito_tanks = ita_cur_mt }
}

### ENG

ENG_CALC_airforce_effect = {
    set_variable = { eng_mod_tac = num_deployed_planes_with_type@medium_heavy_bomber_airframe }
    set_variable = { ENG_modernization_of_the_royal_airforce_bombers = eng_mod_tac }

    set_variable = { eng_mod_str = num_deployed_planes_with_type@medium_bomber_airframe }
    add_to_variable = { ENG_modernization_of_the_royal_airforce_bombers = eng_mod_str }

    set_variable = { eng_mod_pat = num_deployed_planes_with_type@large_maritime_patrol_airframe }
    add_to_variable = { ENG_modernization_of_the_royal_airforce_bombers = eng_mod_pat }

    set_variable = { ENG_modernization_of_the_royal_airforce_fighters = num_deployed_planes_with_type@small_fighter_airframe }
    add_to_variable = { ENG_modernization_of_the_royal_airforce_fighters = num_deployed_planes_with_type@small_fighter_multirole_airframe }
    add_to_variable = { ENG_modernization_of_the_royal_airforce_fighters = num_deployed_planes_with_type@small_fighter_interceptor_airframe }
    add_to_variable = { ENG_modernization_of_the_royal_airforce_fighters = num_deployed_planes_with_type@cv_small_fighter_airframe }
}

ENG_CALC_army_effect = {
    set_variable = { eng_cur_ht = num_equipment_in_armies@heavy_tank_chassis }
    set_variable = { creation_of_the_armoured_corps_tanks = eng_cur_ht }

    set_variable = { eng_cur_mt = num_equipment_in_armies@medium_tank_chassis }
    add_to_variable = { creation_of_the_armoured_corps_tanks = eng_cur_mt }

    set_variable = { eng_cur_st = num_equipment_in_armies@medium_tank_support_chassis }
    add_to_variable = { creation_of_the_armoured_corps_tanks = eng_cur_st }

    set_variable = { eng_cur_lt = num_equipment_in_armies@light_tank_chassis }
    add_to_variable = { creation_of_the_armoured_corps_tanks = eng_cur_lt }

    set_variable = { eng_cur_mist = num_equipment_in_armies@medium_tank_infantry_support_chassis }
    add_to_variable = { creation_of_the_armoured_corps_tanks = eng_cur_mist }

    set_variable = { eng_cur_hist = num_equipment_in_armies@heavy_tank_infantry_support_chassis }
    add_to_variable = { creation_of_the_armoured_corps_tanks = eng_cur_hist }
}

ENG_CALC_navy_effect = {
    set_variable = { ENG_royal_navy_carriers = num_ships_with_type@carrier }
    subtract_from_variable = { ENG_royal_navy_carriers = num_ships_with_type@light_carrier }

    set_variable = { ENG_royal_navy_submarines = num_ships_with_type@submarine }
    subtract_from_variable = { ENG_royal_navy_submarines = num_ships_with_type@cruiser_submarine }
}

### USA

USA_CALC_fy40_plan = {
    if = {
        limit = {
            has_navy_size = {
                size > fy_cv
                archetype = ship_hull_carrier
            }
        }
        set_country_flag = fy40_cv_done
    }
    if = {
        limit = {
            has_navy_size = {
                size > fy_bb
                archetype = ship_hull_heavy_battleship
            }
        }
        set_country_flag = fy40_bb_done
    }
    if = {
        limit = {
            has_navy_size = {
                size > fy_ca
                archetype = ship_hull_heavy_cruiser
            }
        }
        set_country_flag = fy40_ca_done
    }
    if = {
        limit = {
            has_navy_size = {
                size > fy_cl
                archetype = ship_hull_cruiser
            }
        }
        set_country_flag = fy40_cl_done
    }
    if = {
        limit = {
            has_navy_size = {
                size > fy_dd
                archetype = ship_hull_light
            }
        }
        set_country_flag = fy40_dd_done
    }
    if = {
        limit = {
            has_navy_size = {
                size > fy_sc
                archetype = sub_hull_cruiser_submarine
            }
        }
        set_country_flag = fy40_sc_done
    }
}

USA_CALC_fy42_plan = {
    set_variable = {
        new_total_light_ships = num_ships_with_type@destroyer
    }
    add_to_variable = {
        new_total_light_ships = num_ships_with_type@frigate
    }
    set_variable = {
        total_light_ships = new_total_light_ships
    }
    if = {
        limit = {
            has_navy_size = {
                size > fy_cv
                archetype = ship_hull_carrier
            }
        }
        set_country_flag = fy44_cv_done
    }
    if = {
        limit = {
            has_navy_size = {
                size > fy_cvl
                archetype = ship_hull_light_carrier
            }
        }
        set_country_flag = fy44_cvl_done
    }
    if = {
        limit = {
            has_navy_size = {
                size > fy_ca
                archetype = ship_hull_heavy_cruiser
            }
        }
        set_country_flag = fy44_ca_done
    }
    if = {
        limit = {
            has_navy_size = {
                size > fy_cl
                archetype = ship_hull_cruiser
            }
        }
        set_country_flag = fy44_cl_done
    }
    if = {
        limit = {
            check_variable = {
                total_light_ships > required_light_ships
            }
        }
        set_country_flag = fy44_light_done
    }
    if = {
        limit = {
            has_navy_size = {
                size > fy_sc
                archetype = sub_hull_cruiser_submarine
            }
        }
        set_country_flag = fy44_sc_done
    }
}

USA_CALC_fyboth_plan = {
    set_variable = { usa_plan_cv = num_ships_with_type@carrier }
	subtract_from_variable = { usa_plan_cv = num_ships_with_type@light_carrier }
}