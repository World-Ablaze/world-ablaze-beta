#!gfx:interface\military_industrial_organization\wa_industrial_organization_department_icons.gfx

########    ###    ##    ## ##    ##  ######
   ##      ## ##   ###   ## ##   ##  ##    ##
   ##     ##   ##  ####  ## ##  ##   ##
   ##    ##     ## ## ## ## #####     ######
   ##    ######### ##  #### ##  ##         ##
   ##    ##     ## ##   ### ##   ##  ##    ##
   ##    ##     ## ##    ## ##    ##  ######


#############################################################################################################################
####################################################### General Tanks #######################################################
#############################################################################################################################

generic_tank_organization = {
	icon = GFX_idea_generic_tank_manufacturer_1

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		mio_cat_eq_all_light_tank_and_variants
		mio_cat_eq_all_medium_tank_and_variants
		mio_cat_eq_all_modern_tank_and_variants
		mio_cat_eq_all_heavy_tank_and_variants
	}

	research_categories = {
		cat_light_armor
		cat_medium_armor
		cat_modern_armor
		cat_heavy_armor
		cat_light_infantry_support
		cat_medium_infantry_support
		cat_heavy_infantry_support
		cat_light_assault_spg
		cat_medium_assault_spg
		cat_modern_assault_spg
		cat_heavy_assault_spg
		cat_light_td
		cat_medium_td
		cat_modern_td
		cat_heavy_td
		cat_light_spg
		cat_medium_spg
		cat_modern_spg
		cat_heavy_spg
		cat_light_spaa
		cat_medium_spaa
		cat_modern_spaa
		cat_heavy_spaa
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_standardized_production

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 6
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 6 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_early_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_mass_tank_production
		name = mass_tank_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 0 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			has_partial_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_mobile_tank_specialization
		name = mobile_tank_specialization
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_tank_production }
		position = { x = -1 y = 1 }
		relative_position_id = mio_mass_tank_production

		mutually_exclusive = { mio_armoured_tank_specialization }

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_light_tank mio_cat_eq_all_medium_tank }

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_armoured_tank_specialization
		name = armoured_tank_specialization
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_tank_production }
		position = { x = 1 y = 1 }
		relative_position_id = mio_mass_tank_production

		mutually_exclusive = { mio_mobile_tank_specialization }

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_heavy_tank }

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { mio_mobile_tank_specialization mio_armoured_tank_specialization }
		position = { x = 0 y = 1 }
		relative_position_id = mio_mobile_tank_specialization

		available = {
			has_total_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_experimental
		x = 4
	}

	trait = {
		token = mio_tank_analysis_teams
		name = tank_analysis_teams
		icon = GFX_generic_mio_trait_icon_research

		all_parents = { mio_standardized_components }
		position = { x = -2 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}
	}

	trait = {
		token = mio_tank_conversion_specialization
		name = tank_conversion_specialization
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { mio_tank_analysis_teams }
		position = { x = 0 y = 1 }
		relative_position_id = mio_tank_analysis_teams

		limit_to_equipment_type = { mio_cat_eq_all_tank_destroyers mio_cat_eq_all_assault_guns mio_cat_eq_all_artillery_tanks mio_cat_eq_all_anti_air_tanks mio_cat_eq_all_support_tank_variants }

		production_bonus = {
			production_conversion_speed_factor = 0.25
			production_cost_factor = -0.03
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 8
	}

	trait = {
		token = mio_improved_ergonomics
		name = improved_ergonomics
		icon = GFX_generic_mio_department_icon_tank_general_engine

		all_parents = { mio_standardized_components }
		position = { x = 2 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		equipment_bonus = {
			defense = 0.03
			breakthrough = 0.03
		}
	}

	trait = {
		token = mio_improved_tooling_methods
		name = improved_tooling_methods
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { mio_improved_ergonomics }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_ergonomics

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = mio_improved_gun_sights
		name = improved_gun_sights
		icon = GFX_generic_mio_trait_icon_hard_attack

		any_parent = { mio_mobile_tank_specialization mio_armoured_tank_specialization }
		position = { x = 0 y = 1 }
		relative_position_id = mio_armoured_tank_specialization

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
		}
	}
}

#############################################################################################################################
####################################################### Infantry Tank #######################################################
#############################################################################################################################

generic_infantry_tank_organization = {
	icon = GFX_idea_generic_tank_manufacturer_3

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		mio_cat_eq_all_support_tanks
	}

	research_categories = {
		cat_light_infantry_support
		cat_medium_infantry_support
		cat_heavy_infantry_support
		cat_support
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_infantry_tanks_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_early_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		equipment_bonus = {
			reliability = 0.05
		}
		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_mass_tank_production
		name = mass_tank_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 1 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			has_partial_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_standardize_turrets_and_hulls
		name = standardize_turrets_and_hulls
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = -2 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		mutually_exclusive = { mio_integrated_variant_turret_and_hulls }

		limit_to_equipment_type = { mio_cat_eq_all_support_tanks }

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_integrated_variant_turret_and_hulls
		name = integrated_variant_turret_and_hulls
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = -1 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		mutually_exclusive = { mio_standardize_turrets_and_hulls }

		limit_to_equipment_type = { mio_cat_eq_all_support_tank_variants }

		production_bonus = {
			production_conversion_speed_factor = 0.1
			production_cost_factor = -0.08
		}
	}

	trait = {
		token = mio_common_parts_usage
		name = common_parts_usage
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_tank_production }
		position = { x = -1 y = 1 }
		relative_position_id = mio_mass_tank_production

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_improved_tooling_methods
		name = improved_tooling_methods
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { mio_common_parts_usage }
		position = { x = -1 y = 1 }
		relative_position_id = mio_common_parts_usage

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_common_parts_usage }
		position = { x = 1 y = 1 }
		relative_position_id = mio_common_parts_usage

		available = {
			has_total_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.04
		}
	}

	trait = {
		token = mio_enhanced_gun_laying_drives
		name = enhanced_gun_laying_drives
		icon = GFX_generic_mio_trait_icon_enhanced_gun_laying_drives

		all_parents = { mio_dedicated_rd_division }
		position = { x = 0 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			soft_attack = 0.05
			hard_attack = 0.05
		}
	}

	trait = {
		token = mio_improved_gun_rammers
		name = improved_gun_rammers
		icon = GFX_generic_mio_trait_icon_improved_gun_rammers

		all_parents = { mio_enhanced_gun_laying_drives }
		position = { x = 0 y = 1 }
		relative_position_id = mio_enhanced_gun_laying_drives

		equipment_bonus = {
			breakthrough = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_engine_tuning
		name = engine_tuning
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { mio_improved_gun_rammers }
		position = { x = -1 y = 1 }
		relative_position_id = mio_improved_gun_rammers

		mutually_exclusive = { mio_weakspot_protection }

		equipment_bonus = {
			maximum_speed = 0.05
		}
	}

	trait = {
		token = mio_weakspot_protection
		name = weakspot_protection
		icon = GFX_generic_mio_trait_icon_armor_value

		all_parents = { mio_improved_gun_rammers }
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_gun_rammers

		mutually_exclusive = { mio_engine_tuning }

		equipment_bonus = {
			hardness = 0.05
		}
	}

	trait = {
		token = mio_turbo_chargers
		name = turbo_chargers
		icon = GFX_generic_mio_trait_icon_turbo_chargers

		any_parent = { mio_engine_tuning mio_weakspot_protection }
		position = { x = 1 y = 1 }
		relative_position_id = mio_engine_tuning

		equipment_bonus = {
			breakthrough = 0.05
			maximum_speed = 0.05
		}
	}
}

#############################################################################################################################
######################################################## Light Tank #########################################################
#############################################################################################################################

generic_light_tank_organization = {
	icon = GFX_idea_generic_tank_manufacturer_3

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		light_tank_chassis
		light_tank_assault_chassis
	}

	research_categories = {
		cat_light_armor
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_light_tank_manufacturer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.15
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.03
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.03
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.06
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.06
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.09
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.09
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.15
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.15
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.03
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.06
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.09
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.15
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { mio_standardized_components }
		position = { x = -1 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_early_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = mio_improved_tooling_methods
		name = improved_tooling_methods
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 1 y = 1 }
		relative_position_id = mio_standardized_components

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_mass_tank_production
		name = mass_tank_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems mio_improved_tooling_methods}
		position = { x = 1 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			has_partial_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = mio_standardize_turrets_and_hulls
		name = standardize_turrets_and_hulls
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_tank_production }
		position = { x = -1 y = 1 }
		relative_position_id = mio_mass_tank_production
		mutually_exclusive = { mio_specialized_turrets_and_hulls }

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_specialized_turrets_and_hulls
		name = specialized_turrets_and_hulls
		icon = GFX_generic_mio_trait_icon_armor_value

		all_parents = { mio_mass_tank_production }
		position = { x = 1 y = 1 }
		relative_position_id = mio_mass_tank_production
		mutually_exclusive = { mio_standardize_turrets_and_hulls }

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		equipment_bonus = {
			armor_value = 0.1
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { mio_standardize_turrets_and_hulls mio_specialized_turrets_and_hulls }
		position = { x = 1 y = 1 }
		relative_position_id = mio_standardize_turrets_and_hulls

		available = {
			has_total_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.04
		}
	}

	trait = {
		token = mio_squeezebore_attachments
		name = squeezebore_attachments
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { mio_dedicated_rd_division }
		position = { x = 0 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			hard_attack = 0.05
			ap_attack = 0.05
		}
	}

	trait = {
		token = mio_extra_white_phosphorus_rounds
		name = extra_white_phosphorus_rounds
		icon = GFX_generic_mio_trait_icon_smoke

		all_parents = { mio_squeezebore_attachments }
		position = { x = -1 y = 1 }
		relative_position_id = mio_squeezebore_attachments
		mutually_exclusive = { mio_extra_apcr_storage }

		equipment_bonus = {
			breakthrough = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_extra_apcr_storage
		name = extra_apcr_storage
		icon = GFX_generic_mio_trait_icon_apcr

		all_parents = { mio_squeezebore_attachments }
		position = { x = 1 y = 1 }
		relative_position_id = mio_squeezebore_attachments
		mutually_exclusive = { mio_extra_white_phosphorus_rounds }

		equipment_bonus = {
			ap_attack = 0.05
			hard_attack = 0.05
		}
	}


	###

	trait = {
		token = mio_enhanced_engine_couplings
		name = enhanced_engine_couplings
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { mio_extra_apcr_storage mio_extra_white_phosphorus_rounds }
		position = { x = 1 y = 1 }
		relative_position_id = mio_extra_white_phosphorus_rounds

		equipment_bonus = {
			maximum_speed = 0.05
			breakthrough = 0.05
		}
	}

	trait = {
		token = mio_suspension_improvements
		name = suspension_improvements
		icon = GFX_generic_mio_department_icon_tank_light_tank_quality

		all_parents = { mio_enhanced_engine_couplings }
		position = { x = -1 y = 1 }
		relative_position_id = mio_enhanced_engine_couplings

		mutually_exclusive = { mio_increased_ammo_storage }

		limit_to_equipment_type = {
			mio_cat_eq_all_light_tank
		}

		equipment_bonus = {
			maximum_speed = 0.05
			soft_attack = 0.05
			hard_attack = 0.05
		}
	}

	trait = {
		token = mio_increased_ammo_storage
		name = increased_ammo_storage
		icon = GFX_generic_mio_department_icon_tank_general_weapons

		all_parents = { mio_enhanced_engine_couplings }
		position = { x = 1 y = 1 }
		relative_position_id = mio_enhanced_engine_couplings

		mutually_exclusive = { mio_suspension_improvements }

		limit_to_equipment_type = {
			mio_cat_eq_all_light_tank
		}

		equipment_bonus = {
			soft_attack = 0.06
			hard_attack = 0.06
		}
	}
}

#############################################################################################################################
######################################################## Medium Tank ########################################################
#############################################################################################################################

generic_medium_tank_organization = {
	icon = GFX_idea_generic_tank_manufacturer_2

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		mio_cat_eq_all_medium_tank
		mio_cat_eq_all_modern_tank
		medium_tank_assault_chassis
	}

	research_categories = {
		cat_medium_armor
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_medium_tank_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { mio_standardized_components }
		position = { x = -1 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_early_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = mio_segregated_assembly_lines
		name = segregated_assembly_lines
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 0 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = mio_improved_tooling_methods
		name = improved_tooling_methods
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_standardized_components }
		position = { x = 1 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
		}


		production_bonus = {
			production_capacity_factor = 0.03
		}
	}

	trait = {
		token = mio_mass_tank_production
		name = mass_tank_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_improved_tooling_methods }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_tooling_methods

		available = {
			has_partial_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_standardize_turrets_and_hulls
		name = standardize_turrets_and_hulls
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_tank_production mio_segregated_assembly_lines }
		position = { x = -1 y = 1 }
		relative_position_id = mio_mass_tank_production

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_standardize_turrets_and_hulls }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardize_turrets_and_hulls

		available = {
			has_total_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_improved_gun_rammers
		name = improved_gun_rammers
		icon = GFX_generic_mio_trait_icon_improved_gun_rammers

		position = { x = 6 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		equipment_bonus = {
			breakthrough = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_enhanced_gun_laying_drives
		name = enhanced_gun_laying_drives
		icon = GFX_generic_mio_trait_icon_enhanced_gun_laying_drives

		position = { x = 8 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		equipment_bonus = {
			hard_attack = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		all_parents = { mio_improved_gun_rammers mio_enhanced_gun_laying_drives}
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_gun_rammers

		available = {
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.04
		}
	}

	trait = {
		token = mio_turbo_chargers
		name = turbo_chargers
		icon = GFX_generic_mio_trait_icon_turbo_chargers

		all_parents = { mio_dedicated_rd_division }
		position = { x = 0 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		available = {
		}

		equipment_bonus = {
			breakthrough = 0.05
			maximum_speed = 0.05
		}
	}

	trait = {
		token = mio_suspension_improvements
		name = suspension_improvements
		icon = GFX_generic_mio_department_icon_tank_medium_tank_quality

		all_parents = { mio_turbo_chargers }
		position = { x = -1 y = 1 }
		relative_position_id = mio_turbo_chargers

		mutually_exclusive = { mio_increased_protection }

		available = {
		}

		limit_to_equipment_type = {
			mio_cat_eq_all_medium_tank
			mio_cat_eq_all_modern_tank
		}

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			maximum_speed = 0.05
		}
	}

	trait = {
		token = mio_increased_protection
		name = increased_protection
		icon = GFX_generic_mio_trait_icon_armor_value

		all_parents = { mio_turbo_chargers }
		position = { x = 1 y = 1 }
		relative_position_id = mio_turbo_chargers

		mutually_exclusive = { mio_suspension_improvements }

		available = {
		}

		#limit_to_equipment_type = {
		#	mio_cat_eq_all_medium_tank
		#	mio_cat_eq_all_modern_tank
		#}

		equipment_bonus = {
			armor_value = 0.05
			hardness = 0.1
		}
	}

	trait = {
		token = mio_next_generation_designs
		name = next_generation_designs
		icon = GFX_generic_mio_trait_icon_next_generation_designs

		any_parent = { mio_suspension_improvements mio_increased_protection }
		position = { x = 1 y = 1 }
		relative_position_id = mio_suspension_improvements

		available = {
		}

		limit_to_equipment_type = {
			mio_cat_eq_all_modern_tank
		}

		equipment_bonus = {
			build_cost_ic = -0.05
		}
	}
}

#############################################################################################################################
######################################################## Modern Tank ########################################################
#############################################################################################################################

generic_modern_tank_organization = {
	icon = GFX_idea_generic_tank_manufacturer_3

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		mio_cat_eq_all_medium_tank
		mio_cat_eq_all_modern_tank
		medium_tank_assault_chassis
	}

	research_categories = {
		cat_medium_armor
		cat_modern_armor
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_modern_tank_manufacturer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { mio_standardized_components }
		position = { x = -1 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_early_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = mio_steel_manufacturing
		name = steel_manufacturing
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 0 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		on_complete = {
			FROM = {
				mio_steel_refinery_1 = yes
			}
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = mio_improved_tooling_methods
		name = improved_tooling_methods
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 1 y = 1 }
		relative_position_id = mio_standardized_components

		limit_to_equipment_type = {
			mio_cat_eq_all_medium_tank
			mio_cat_eq_all_modern_tank
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_mass_tank_production
		name = mass_tank_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_improved_tooling_methods }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_tooling_methods

		available = {
			has_partial_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_standardize_turrets_and_hulls
		name = standardize_turrets_and_hulls
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { mio_steel_manufacturing mio_mass_tank_production }
		position = { x = 1 y = 1 }
		relative_position_id = mio_steel_manufacturing

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_standardize_turrets_and_hulls }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardize_turrets_and_hulls

		available = {
			has_total_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_improved_gun_rammers
		name = improved_gun_rammers
		icon = GFX_generic_mio_trait_icon_improved_gun_rammers

		position = { x = 5 y = 0 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		equipment_bonus = {
			breakthrough = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_enhanced_gun_laying_drives
		name = enhanced_gun_laying_drives
		icon = GFX_generic_mio_trait_icon_enhanced_gun_laying_drives

		position = { x = 7 y = 0 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		equipment_bonus = {
			hard_attack = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		any_parent = { mio_improved_gun_rammers mio_enhanced_gun_laying_drives }
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_gun_rammers

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.04
		}
	}

	trait = {
		token = mio_turbo_chargers
		name = turbo_chargers
		icon = GFX_generic_mio_trait_icon_turbo_chargers

		all_parents = { mio_dedicated_rd_division }
		position = { x = 0 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			breakthrough = 0.05
			maximum_speed = 0.05
		}
	}

	trait = {
		token = mio_spall_liners
		name = spall_liners
		icon = GFX_generic_mio_trait_icon_spall_liners

		all_parents = { mio_turbo_chargers }
		position = { x = 0 y = 1 }
		relative_position_id = mio_turbo_chargers

		equipment_bonus = {
			max_strength = 0.1
		}
	}

	trait = {
		token = mio_increased_fire_control_integration
		name = increased_fire_control_integration
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { mio_spall_liners }
		position = { x = -1 y = 1 }
		relative_position_id = mio_spall_liners
		mutually_exclusive = { mio_modernize_design_methods }

		limit_to_equipment_type = {
			mio_cat_eq_all_modern_tank
		}

		equipment_bonus = {
			soft_attack = 0.06
			hard_attack = 0.06
		}
	}

	trait = {
		token = mio_modernize_design_methods
		name = modernize_design_methods
		icon = GFX_generic_mio_trait_icon_breakthrough

		all_parents = { mio_spall_liners }
		position = { x = 1 y = 1 }
		relative_position_id = mio_spall_liners
		mutually_exclusive = { mio_increased_fire_control_integration }

		limit_to_equipment_type = {
			mio_cat_eq_all_modern_tank
		}

		equipment_bonus = {
			breakthrough = 0.06
			defense = 0.06
		}
	}
}

#############################################################################################################################
######################################################## Heavy Tank #########################################################
#############################################################################################################################

generic_heavy_tank_organization = {
	icon = GFX_idea_generic_tank_manufacturer_3

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		mio_cat_eq_all_heavy_tank
		heavy_tank_assault_chassis
	}

	research_categories = {
		cat_heavy_armor
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_heavy_tank_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_heavy_parts_manufaturing
		name = heavy_parts_manufaturing
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_early_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_heavy_steel_manufacturing
		name = heavy_steel_manufacturing
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_heavy_parts_manufaturing }
		position = { x = -1 y = 1 }
		relative_position_id = mio_heavy_parts_manufaturing

		on_complete = {
			FROM = {
				mio_steel_refinery_2 = yes
			}
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = mio_improved_transmission_and_ball_bearings
		name = improved_transmission_and_ball_bearings
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { mio_heavy_steel_manufacturing }
		position = { x = 0 y = 1 }
		relative_position_id = mio_heavy_steel_manufacturing

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = mio_mass_tank_production
		name = mass_tank_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_heavy_parts_manufaturing }
		position = { x = 1 y = 1 }
		relative_position_id = mio_heavy_parts_manufaturing

		available = {
			has_partial_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_turret_and_hull_optimizations
		name = turret_and_hull_optimizations
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_tank_production }
		position = { x = 0 y = 1 }
		relative_position_id = mio_mass_tank_production

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { mio_improved_transmission_and_ball_bearings mio_turret_and_hull_optimizations }
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_transmission_and_ball_bearings

		available = {
			has_total_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_5 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_improved_gun_rammers
		name = improved_gun_rammers
		icon = GFX_generic_mio_trait_icon_improved_gun_rammers

		position = { x = 5 y = 0 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		equipment_bonus = {
			breakthrough = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_enhanced_gun_laying_drives
		name = enhanced_gun_laying_drives
		icon = GFX_generic_mio_trait_icon_enhanced_gun_laying_drives

		position = { x = 7 y = 0 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		equipment_bonus = {
			hard_attack = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		any_parent = { mio_improved_gun_rammers mio_enhanced_gun_laying_drives }
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_gun_rammers

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.04
		}
	}

	trait = {
		token = mio_smoother_turret_drives
		name = smoother_turret_drives
		icon = GFX_generic_mio_department_icon_tank_heavy_tank_quality

		all_parents = { mio_dedicated_rd_division }
		position = { x = 0 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			breakthrough = 0.05
			defense = 0.05
		}
	}

	trait = {
		token = mio_spall_liners
		name = spall_liners
		icon = GFX_generic_mio_trait_icon_spall_liners

		all_parents = { mio_smoother_turret_drives }
		position = { x = 0 y = 1 }
		relative_position_id = mio_smoother_turret_drives

		equipment_bonus = {
			max_strength = 0.1
		}
	}

	trait = {
		token = mio_increased_fire_control_integration
		name = increased_fire_control_integration
		icon = GFX_generic_mio_trait_icon_hard_attack

		all_parents = { mio_spall_liners }
		position = { x = -1 y = 1 }
		relative_position_id = mio_spall_liners
		mutually_exclusive = { mio_thicker_spaced_armour }

		#limit_to_equipment_type = {
		#	mio_cat_eq_all_heavy_tank
		#}

		equipment_bonus = {
			soft_attack = 0.06
			hard_attack = 0.06
		}
	}

	trait = {
		token = mio_thicker_spaced_armour
		name = thicker_spaced_armour
		icon = GFX_generic_mio_trait_icon_armor_value

		all_parents = { mio_spall_liners }
		position = { x = 1 y = 1 }
		relative_position_id = mio_spall_liners
		mutually_exclusive = { mio_increased_fire_control_integration }

		#limit_to_equipment_type = {
		#	mio_cat_eq_all_heavy_tank
		#}

		equipment_bonus = {
			armor_value = 0.05
		}
	}
}

#############################################################################################################################
###################################################### Tank Researcher ######################################################
#############################################################################################################################

generic_researcher_tank_organization = {
	icon = GFX_idea_generic_tank_manufacturer_3

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
	}
	research_categories = {
		armor
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_tank_researcher

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
			military_industrial_organization_funds_gain = 0.5
		}
	}

	###

	tree_header_text = {
		text = mio_header_research_and_development
		x = 2
	}

	trait = {
		token = mio_private_scientists_programme
		name = private_scientists_programme
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 1 y = 0 }

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.04
		}

	}

	trait = {
		token = mio_state_funding
		name = state_funding
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_private_scientists_programme }
		position = { x = -1 y = 1 }
		relative_position_id = mio_private_scientists_programme

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
			military_industrial_organization_research_bonus = 0.02
		}
	}

	trait = {
		token = mio_private_investment
		name = private_investment
		icon = GFX_generic_mio_trait_icon_unique

		all_parents = { mio_private_scientists_programme }
		position = { x = 1 y = 1 }
		relative_position_id = mio_private_scientists_programme

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
			military_industrial_organization_research_bonus = 0.02
		}
	}

	trait = {
		token = mio_enlarged_rd_departments
		name = enlarged_rd_departments
		icon = GFX_generic_mio_trait_icon_research

		any_parent = { mio_private_investment mio_state_funding }
		position = { x = 1 y = 1 }
		relative_position_id = mio_state_funding

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.03
		}
	}

	trait = {
		token = mio_efficiency_scale_ups
		name = efficiency_scale_ups
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_enlarged_rd_departments }
		position = { x = 0 y = 1 }
		relative_position_id = mio_enlarged_rd_departments

		equipment_bonus = {
			build_cost_ic = -0.01
		}
	}

	trait = {
		token = mio_construction_methods
		name = construction_methods
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_efficiency_scale_ups }
		position = { x = 0 y = 1 }
		relative_position_id = mio_efficiency_scale_ups

		equipment_bonus = {
			build_cost_ic = -0.01
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 5
	}

	trait = {
		token = mio_design_factory
		name = design_factory
		icon = GFX_generic_mio_department_icon_facilities

		position = { x = 5 y = 0 }

		available = {
			has_early_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_prototype_factories
		name = prototype_factories
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_design_factory }
		position = { x = 0 y = 1 }
		relative_position_id = mio_design_factory

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_quality_material_blending
		name = quality_material_blending
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_prototype_factories }
		position = { x = 0 y = 1 }
		relative_position_id = mio_prototype_factories

		available = {
			has_total_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		equipment_bonus = {
			build_cost_ic = -0.01
		}
	}

	trait = {
		token = mio_expanded_testing_facilities
		name = expanded_testing_facilities
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_quality_material_blending }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_material_blending

		available = {
			has_total_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_wonder_weapons
		name = wonder_weapons
		icon = GFX_generic_mio_trait_icon_wonder_weapons

		all_parents = { mio_expanded_testing_facilities }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_testing_facilities

		limit_to_equipment_type = {
			super_heavy_tank_chassis
		}

		production_bonus = {
			production_cost_factor = -0.05
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
	}
}

#############################################################################################################################
###################################################### Tank Refurbisher #####################################################
#############################################################################################################################

generic_tank_refurbishment_plant_organization = {
	icon = GFX_idea_generic_tank_manufacturer_3

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		mio_cat_eq_all_tank_destroyers
		mio_cat_eq_all_assault_guns
		mio_cat_eq_all_artillery_tanks
		mio_cat_eq_all_anti_air_tanks
	}

	research_categories = {
		cat_light_assault_spg
		cat_medium_assault_spg
		cat_modern_assault_spg
		cat_heavy_assault_spg
		cat_light_td
		cat_medium_td
		cat_modern_td
		cat_heavy_td
		cat_light_spg
		cat_medium_spg
		cat_modern_spg
		cat_heavy_spg
		cat_light_spaa
		cat_medium_spaa
		cat_modern_spaa
		cat_heavy_spaa
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_tank_refurbishment_plant

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_scrap_metal_plants
		name = scrap_metal_plants
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_heavy_crane_factories
		name = heavy_crane_factories
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_scrap_metal_plants }
		position = { x = 0 y = 1 }
		relative_position_id = mio_scrap_metal_plants

		available = {
			has_early_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_refurbishment_plants
		name = refurbishment_plants
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_heavy_crane_factories }
		position = { x = 0 y = 1 }
		relative_position_id = mio_heavy_crane_factories

		available = {
			has_partial_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_standardize_turrets_and_hulls
		name = standardize_turrets_and_hulls
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_refurbishment_plants }
		position = { x = 0 y = 1 }
		relative_position_id = mio_refurbishment_plants

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		limit_to_equipment_type = {
			heavy_tank_chassis
			light_tank_chassis
			medium_tank_chassis
			modern_tank_chassis
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_standardize_turrets_and_hulls }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardize_turrets_and_hulls

		available = {
			has_total_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 6 y = 0 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.04
		}
	}

	trait = {
		token = mio_improved_gun_rammers
		name = improved_gun_rammers
		icon = GFX_generic_mio_trait_icon_improved_gun_rammers

		all_parents = { mio_dedicated_rd_division}
		position = { x = -1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			breakthrough = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_turbo_chargers
		name = turbo_chargers
		icon = GFX_generic_mio_trait_icon_turbo_chargers

		all_parents = { mio_improved_gun_rammers }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_gun_rammers

		equipment_bonus = {
			breakthrough = 0.05
			maximum_speed = 0.05
		}
	}

	trait = {
		token = mio_enhanced_gun_laying_drives
		name = enhanced_gun_laying_drives
		icon = GFX_generic_mio_trait_icon_enhanced_gun_laying_drives

		all_parents = { mio_dedicated_rd_division}
		position = { x = 1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			hard_attack = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_improved_tooling_methods
		name = improved_tooling_methods
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { mio_enhanced_gun_laying_drives }
		position = { x = 0 y = 1 }
		relative_position_id = mio_enhanced_gun_laying_drives

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = mio_factory_attachments
		name = factory_attachments
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { mio_improved_tooling_methods mio_turbo_chargers }
		position = { x = 1 y = 1 }
		relative_position_id = mio_turbo_chargers

		limit_to_equipment_type = {
			heavy_tank_chassis
			light_tank_chassis
			medium_tank_chassis
			modern_tank_chassis
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_refitting_experts
		name = refitting_experts
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { mio_factory_attachments }
		position = { x = 0 y = 1 }
		relative_position_id = mio_factory_attachments

		production_bonus = {
			production_cost_factor = -0.06
			#production_conversion_speed_factor = 0.15
		}
	}
}

#############################################################################################################################
######################################################## Armored Car ########################################################
#############################################################################################################################

generic_armored_car_organization = {
	icon = GFX_idea_generic_tank_manufacturer_1

	allowed = {
		NOT = { OR = { tag = GER tag = ENG tag = SOV tag = FRA tag = VIC tag = ITA tag = JAP tag = USA tag = AST tag = SAF tag = NZL tag = CAN tag = RAJ tag = BEL tag = HOL tag = YUG tag = CZE tag = ROM tag = HUN tag = POL tag = SIA } }
		NOT = {
			AND = {
				OR = {
					is_literally_china = yes
					tag = MAN
				}
			}
		}
		NOT = {
			AND = {
				OR = { tag = MEX }
				has_dlc = "Man the Guns"
			}
		}
		NOT = {
			AND = {
				OR = { tag = BUL tag = GRE tag = TUR }
				has_dlc = "Battle for the Bosporus"
			}
		}
		NOT = {
			AND = {
				OR = { tag = ETH tag = SWI }
				has_dlc = "By Blood Alone"
			}
		}
		NOT = {
			AND = {
				OR = { tag = NOR tag = SWE tag = FIN tag = DEN }
				has_dlc = "Arms Against Tyranny"
			}
		}
		NOT = {
			AND = {
				OR = { tag = SPR }
				has_dlc = "La Resistance"
			}
		}
		has_dlc = "La Resistance"
	}

	equipment_type = {
		combat_car_chassis
		scout_car_chassis
	}

	research_categories = {
		cat_armored_cars
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_armored_car_manufacturer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.15
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.03
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.03
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.06
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.06
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.09
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.09
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { ai_mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = ai_mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.15
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.15
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.03
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.06
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.09
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			if = {
				limit = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
				NOT = {
					FROM = {
						has_idea = SOV_worker_shortage_mio
					}
				}
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			#military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.15
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_early_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_mass_tank_production
		name = mass_tank_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 0 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			has_partial_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_standardize_turrets_and_hulls
		name = standardize_turrets_and_hulls
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_tank_production }
		position = { x = 0 y = 1 }
		relative_position_id = mio_mass_tank_production

		available = {
			has_war_economy = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_standardize_turrets_and_hulls }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardize_turrets_and_hulls

		available = {
			has_total_mobilization = yes
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 6 y = 0 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.04
		}
	}

	trait = {
		token = mio_improved_gun_rammers
		name = improved_gun_rammers
		icon = GFX_generic_mio_trait_icon_improved_gun_rammers

		all_parents = { mio_dedicated_rd_division}
		position = { x = -1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			breakthrough = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_turbo_chargers
		name = turbo_chargers
		icon = GFX_generic_mio_trait_icon_turbo_chargers

		all_parents = { mio_improved_gun_rammers }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_gun_rammers

		equipment_bonus = {
			breakthrough = 0.05
			maximum_speed = 0.05
		}
	}

	trait = {
		token = mio_enhanced_gun_laying_drives
		name = enhanced_gun_laying_drives
		icon = GFX_generic_mio_trait_icon_enhanced_gun_laying_drives

		all_parents = { mio_dedicated_rd_division}
		position = { x = 1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			hard_attack = 0.05
			soft_attack = 0.05
		}
	}

	trait = {
		token = mio_improved_tooling_methods
		name = improved_tooling_methods
		icon = GFX_generic_mio_trait_icon_efficiency_cap

		all_parents = { mio_enhanced_gun_laying_drives }
		position = { x = 0 y = 1 }
		relative_position_id = mio_enhanced_gun_laying_drives

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = mio_spall_liners
		name = spall_liners
		icon = GFX_generic_mio_trait_icon_spall_liners

		any_parent = { mio_improved_tooling_methods mio_turbo_chargers }
		position = { x = 1 y = 1 }
		relative_position_id = mio_turbo_chargers

		equipment_bonus = {
			max_strength = 0.1
		}
	}

	trait = {
		token = mio_suspension_improvements
		name = suspension_improvements
		icon = GFX_generic_mio_department_icon_tank_light_tank_quality

		all_parents = { mio_spall_liners }
		position = { x = -1 y = 1 }
		relative_position_id = mio_spall_liners

		mutually_exclusive = { mio_tank_parts }

		limit_to_equipment_type = {
		}

		equipment_bonus = {
			soft_attack = 0.03
			hard_attack = 0.03
			maximum_speed = 0.05
		}
	}

	trait = {
		token = mio_tank_parts
		name = tank_parts
		icon = GFX_generic_mio_department_icon_tank_general_engine

		all_parents = { mio_spall_liners }
		position = { x = 1 y = 1 }
		relative_position_id = mio_spall_liners

		mutually_exclusive = { mio_suspension_improvements }

		limit_to_equipment_type = {
			combat_car_chassis
			scout_car_chassis
		}

		equipment_bonus = {
			armor_value = 0.1
			breakthrough = 0.05
			defense = 0.05
		}
	}
}