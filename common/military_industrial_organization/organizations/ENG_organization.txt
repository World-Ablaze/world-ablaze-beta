
########    ###    ##    ## ##    ##  ######
   ##      ## ##   ###   ## ##   ##  ##    ##
   ##     ##   ##  ####  ## ##  ##   ##
   ##    ##     ## ## ## ## #####     ######
   ##    ######### ##  #### ##  ##         ##
   ##    ##     ## ##   ### ##   ##  ##    ##
   ##    ##     ## ##    ## ##    ##  ######

ENG_vauxhaul_motors_eng_organization = {
	name = vauxhaul_motors_eng
	include = generic_heavy_tank_organization
	icon = GFX_idea_vauxhall

	allowed = {
		original_tag = ENG
	}

	equipment_type = {
		motorized_equipment
		heavy_tank_chassis
	}

	research_categories = {
		cat_heavy_armor
	}

}

ENG_vickers_armstrong_eng_organization = {
	include = generic_infantry_tank_organization
	icon = GFX_idea_vickers_armstrong_eng

	allowed = {
		original_tag = ENG
	}

	tree_header_text = {
		text = mio_header_support_tank_department
		x = 2
	}

	tree_header_text = {
		text = mio_header_production
		x = 5
	}

	tree_header_text = {
		text = mio_header_mechanized
		x = 7
	}

	equipment_type = { mio_cat_eq_all_light_tank medium_tank_support_chassis tac_bomber_equipment }
	research_categories = { cat_light_armor cat_support cat_infantry_support tactical_bomber }

	initial_trait = {
		name = generic_mio_initial_trait_tactical_bomber_infantry_tank_conglomerate
	}

	override_trait = {
		token = mio_streamlined_inbound_processes

		on_complete = {
			FROM = {
				custom_effect_tooltip = military_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.01 }
				}
			}
		}
	}

	override_trait = {
		token = mio_expanded_outbound_stream

		on_complete = {
			FROM = {
				custom_effect_tooltip = military_industrial_capital_4
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.02 }
				}
			}
		}
	}

	override_trait = {
		token = mio_quality_improvements

		on_complete = {
			FROM = {
				custom_effect_tooltip = military_industrial_capital_6
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.03 }
				}
			}
		}
	}

	override_trait = {
		token = mio_new_picking_putaway_strategies

		on_complete = {
			FROM = {
				custom_effect_tooltip = military_industrial_capital_8
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.04 }
				}
			}
		}
	}

	override_trait = {
		token = mio_expert_practices

		on_complete = {
			FROM = {
				custom_effect_tooltip = military_industrial_capital_10
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.05 }
				}
			}
		}
	}

	add_trait = {
		token = mio_expanded_supply_chain
		name = expanded_supply_chain
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_expanded_outbound_stream }
		position = { x = -1 y = 1 }
		relative_position_id = mio_expanded_outbound_stream
		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.5
		}
	}

	add_trait = {
		token = mio_mass_plane_production
		name = mass_plane_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 0 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems
		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		limit_to_equipment_type = { tac_bomber_equipment }

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	add_trait = {
		token = mio_advanced_smelting_and_tools
		name = advanced_smelting_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_common_parts_usage }
		position = { x = 0 y = 1 }
		relative_position_id = mio_common_parts_usage

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = war_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = war_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		limit_to_equipment_type = { tac_bomber_equipment }

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	add_trait = {
		token = mio_variable_dihedral
		name = variable_dihedral
		icon = GFX_generic_mio_trait_icon_reliability

		position = { x = 9 y = 0 }

		limit_to_equipment_type = { tac_bomber_equipment }

		equipment_bonus = {
			reliability = 0.05
		}
	}

	add_trait = {
		token = mio_reinforced_wing_fuselage_braces
		name = reinforced_wing_fuselage_braces
		icon = GFX_generic_mio_trait_icon_reinforced_wing_fuselage_braces

		all_parents = { mio_variable_dihedral }
		position = { x = 0 y = 1 }
		relative_position_id = mio_variable_dihedral

		limit_to_equipment_type = { tac_bomber_equipment }

		equipment_bonus = {
			air_defence = 0.1
		}
	}

	add_trait = {
		token = mio_fuselage_load_optimizations
		name = fuselage_load_optimizations
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber_quality

		all_parents = { mio_reinforced_wing_fuselage_braces }
		position = { x = 0 y = 1 }
		relative_position_id = mio_reinforced_wing_fuselage_braces

		limit_to_equipment_type = { tac_bomber_equipment }

		equipment_bonus = {
			maximum_speed = 0.04
			air_agility = 0.02
		}
	}

	add_trait = {
		token = mio_turret_gun_laying_drives
		name = turret_gun_laying_drives
		icon = GFX_generic_mio_trait_icon_turret_gun_laying_drives

		all_parents = { mio_fuselage_load_optimizations }
		position = { x = 0 y = 1 }
		relative_position_id = mio_fuselage_load_optimizations

		limit_to_equipment_type = { tac_bomber_equipment }

		equipment_bonus = {
			air_attack = 0.04
		}
	}

	add_trait = {
		token = mio_radio_navigation_systems
		name = radio_navigation_systems
		icon = GFX_generic_mio_trait_icon_mio_radio_navigation

		any_parent = { mio_turret_gun_laying_drives }
		position = { x = 0 y = 1 }
		relative_position_id = mio_turret_gun_laying_drives

		limit_to_equipment_type = { tac_bomber_equipment }

		equipment_bonus = {
			air_bombing = 0.04
		}
	}
}

ENG_nuffield_mechanizations_organization = {
	include = generic_medium_tank_organization
	name = nuffield_mechanizations
	icon = GFX_idea_nuffield_mechanizations

	allowed = {
		original_tag = ENG
	}
}

ENG_leyland_motors_organization = {
	include = generic_modern_tank_organization
	name = leyland_motors
	icon = GFX_idea_leyland_motors

	allowed = {
		original_tag = ENG
	}

	equipment_type = {
		mio_cat_eq_all_modern_tank
		modern_tank_assault_chassis
	}

	research_categories = {
		cat_modern_armor
	}
}

ENG_department_of_tank_design_organization = {
	include = generic_researcher_tank_organization
	name = department_of_tank_design
	icon = GFX_idea_department_of_tank_design

	allowed = {
		original_tag = ENG
	}
	available = {
		owner = { has_completed_focus = ENG_tank_board }
	}
}

########  ##          ###    ##    ## ########  ######
##     ## ##         ## ##   ###   ## ##       ##    ##
##     ## ##        ##   ##  ####  ## ##       ##
########  ##       ##     ## ## ## ## ######    ######
##        ##       ######### ##  #### ##             ##
##        ##       ##     ## ##   ### ##       ##    ##
##        ######## ##     ## ##    ## ########  ######

ENG_supermarine_organization = {
	include = generic_light_aircraft_organization
	icon = GFX_idea_supermarine
	allowed = {
		original_tag = ENG
		has_dlc = "Arms Against Tyranny"
	}

	equipment_type = {
		fighter_equipment
		cv_fighter_equipment
	}

	research_categories = {
		cat_fighter
		naval_fighter
	}
}

ENG_hawker_organization = {
	include = generic_light_multi_role_aircraft_organization
	icon = GFX_idea_hawker
	allowed = {
		original_tag = ENG
		has_dlc = "Arms Against Tyranny"
	}
}

ENG_de_havilland_organization = {
	include = generic_medium_aircraft_organization
	icon = GFX_idea_de_havilland
	allowed = {
		has_dlc = "Arms Against Tyranny"
		original_tag = ENG
	}

	equipment_type = {
		heavy_fighter_equipment
	}
}

ENG_fairey_aviation_organization = {
	include = generic_naval_aircraft_organization
	icon = GFX_idea_fairey_aviation
	allowed = {
		has_dlc = "Arms Against Tyranny"
		original_tag = ENG
	}

	equipment_type = {
		cv_CAS_equipment
		cv_nav_bomber_equipment
	}

	research_categories = {
		naval_bomber
		naval_cas
	}
}

ENG_blackburn_organization = {
	include = generic_cas_aircraft_organization
	icon = GFX_idea_blackburn
	allowed = {
		has_dlc = "Arms Against Tyranny"
		original_tag = ENG
	}
}

ENG_avro_organization = {
	name = avro
	include = generic_heavy_aircraft_organization
	icon = GFX_idea_avro
	allowed = {
		original_tag = ENG
		has_dlc = "Arms Against Tyranny"
	}
	equipment_type = {
		strat_bomber_equipment
	}
	research_categories = {
		cat_strategic_bomber
	}
}

ENG_bristol_organization = {
	name = bristol
	include = generic_medium_multi_role_aircraft_organization
	icon = GFX_idea_bristol
	allowed = {
		original_tag = ENG
		has_dlc = "Arms Against Tyranny"
	}
	equipment_type = {
		attacker_equipment
		strike_bomber_equipment
		transport_plane_equipment
		maritime_patrol_plane
		scout_plane_equipment
	}

	research_categories = {
		patrol_bomber
	}
}

##     ##    ###    ######## ######## ########  #### ######## ##
###   ###   ## ##      ##    ##       ##     ##  ##  ##       ##
#### ####  ##   ##     ##    ##       ##     ##  ##  ##       ##
## ### ## ##     ##    ##    ######   ########   ##  ######   ##
##     ## #########    ##    ##       ##   ##    ##  ##       ##
##     ## ##     ##    ##    ##       ##    ##   ##  ##       ##
##     ## ##     ##    ##    ######## ##     ## #### ######## ########

ENG_rsaf_enfield_organization = {
	include = generic_infantry_equipment_organization
	icon = GFX_idea_rsaf_enfield
	allowed = {
		original_tag = ENG
		has_dlc = "Arms Against Tyranny"
	}
	available = {
	}
}

ENG_vulcan_foundries_organization = {
	include = generic_support_equipment_organization
	icon = GFX_idea_vulcan_foundries

	allowed = {
		original_tag = ENG
		has_dlc = "Arms Against Tyranny"
	}
}

## Vauxhaul with tanks above

ENG_royal_arsenal_organization = {
	include = generic_artillery_organization
	icon = GFX_idea_royal_arsenal
	allowed = {
		original_tag = ENG
		has_dlc = "Arms Against Tyranny"
	}
}

ENG_austin_motor_company = {
	include = generic_motorized_mechanized_organization
	name = austin_motor_company
	icon = GFX_idea_austin_motor_company

	allowed = {
		original_tag = ENG
		has_dlc = "Arms Against Tyranny"
	}
}

 ######  ##     ## #### ########   ######
##    ## ##     ##  ##  ##     ## ##    ##
##       ##     ##  ##  ##     ## ##
 ######  #########  ##  ########   ######
      ## ##     ##  ##  ##              ##
##    ## ##     ##  ##  ##        ##    ##
 ######  ##     ## #### ##         ######

ENG_harland_wolff_organization = {
	include = generic_task_force_ship_organization
	icon = GFX_idea_harland_wolff
	allowed = {
		original_tag = ENG
		has_dlc = "Arms Against Tyranny"
	}
	equipment_type = {
		mio_cat_eq_all_carrier
		ship_hull_cruiser
	}
	override_trait = {
		token = generic_mio_trait_underway_replenishment_equipment

		position = { x=1 y=0 }
		relative_position_id = generic_mio_trait_transom_stern
	}

	add_trait = {
		token = ENG_mio_trait_flared_bow
		name = ENG_mio_trait_flared_bow
		icon = GFX_generic_mio_department_icon_ship_general_quality
		special_trait_background = yes

		position = { x=1 y=0 }
		relative_position_id = generic_mio_trait_underway_replenishment_equipment

		any_parent = { generic_mio_trait_splinter_protection }

		equipment_bonus = {
			naval_weather_penalty_factor = -0.05
		}
	}

	add_trait = {
		token = generic_mio_trait_semi_armor_piercing_shells
		name = generic_mio_trait_semi_armor_piercing_shells
		icon = GFX_generic_mio_trait_icon_lg_attack
		special_trait_background = yes

		any_parent = { generic_mio_trait_secondary_fire_director_control }
		position = { x=0 y=1 }
		relative_position_id = generic_mio_trait_secondary_fire_director_control

		equipment_bonus = {
			lg_attack = 0.05
			lg_armor_piercing = -0.05
		}
	}
}

ENG_cammell_laird_organization = {
	include = generic_battle_line_ship_organization
	icon = GFX_idea_cammell_laird
	allowed = {
		original_tag = ENG
		has_dlc = "Arms Against Tyranny"
	}

	override_trait = {
		token = generic_mio_trait_advanced_armor_design

		position = { x=1 y=0 }
		relative_position_id = generic_mio_trait_advanced_hydrodynamic_design
	}

	add_trait = {
		token = ENG_mio_trait_flared_bow
		name = ENG_mio_trait_flared_bow
		icon = GFX_generic_mio_department_icon_ship_general_quality
		special_trait_background = yes

		position = { x=1 y=0 }
		relative_position_id = generic_mio_trait_advanced_armor_design

		any_parent = { generic_mio_trait_hardened_critical_components}

		equipment_bonus = {
			naval_weather_penalty_factor = -0.05
		}
	}

	add_trait = {
		token = ENG_mio_trait_super_charges
		name = ENG_mio_trait_super_charges
		icon = GFX_generic_mio_department_icon_ship_capital_ship_weapons
		special_trait_background = yes

		position = { x=0 y=2 }
		relative_position_id = generic_mio_trait_semi_armor_piercing_shells

		any_parent = { generic_mio_trait_super_heavy_shells generic_mio_trait_semi_armor_piercing_shells generic_mio_trait_high_velocity_guns }

		limit_to_equipment_type = { mio_cat_eq_all_battleship }

		equipment_bonus = {
			hg_armor_piercing = 0.05
			lg_armor_piercing = 0.05
			build_cost_ic = 0.05
		}
	}
}

ENG_yarrow_shipbuilders_organization = {
	include = generic_escort_ship_organization
	icon = GFX_idea_yarrow_shipbuilders
	allowed = {
		original_tag = ENG
	}
}

ENG_john_brown_organization = {
	include = generic_raider_ship_organization
	icon = GFX_idea_john_brown_company
	allowed = {
		original_tag = ENG
	}

}