#!gfx:interface\military_industrial_organization\wa_industrial_organization_department_icons.gfx

########  ##          ###    ##    ## ########  ######
##     ## ##         ## ##   ###   ## ##       ##    ##
##     ## ##        ##   ##  ####  ## ##       ##
########  ##       ##     ## ## ## ## ######    ######
##        ##       ######### ##  #### ##             ##
##        ##       ##     ## ##   ### ##       ##    ##
##        ######## ##     ## ##    ## ########  ######




#############################################################################################################################
###################################################### General Aircraft #####################################################
#############################################################################################################################

generic_general_aircraft_organization = {
	icon = GFX_idea_generic_air_manufacturer_1

	allowed = {
		NOT = { OR = { tag = GER tag = ENG tag = SOV tag = FRA tag = ITA tag = JAP tag = USA tag = CAN tag = AST tag = ROM tag = CZE tag = HUN tag = POL tag = SAF tag = RAJ tag = NZL tag = SIA } }
		if = {
			limit = {
				has_dlc = "Death or Dishonor"
			}
			NOT = { tag = YUG }
		}
		NOT = {
			AND = {
				OR = { tag = CHI tag = PRC tag = MAN tag = SHX tag = XSM tag = GXC tag = YUN tag = SIK tag = MEN }

			}
		}
		NOT = {
			AND = {
				OR = { tag = MEX tag = HOL }
				has_dlc = "Man the Guns"
			}
		}
		NOT = {
			AND = {
				OR = { tag = SPR tag = SPA tag = SPB tag = SPC tag = SPD tag = POR }
				has_dlc = "La Resistance"
			}
		}
		NOT = {
			AND = {
				OR = { tag = BUL tag = GRE tag = TUR }
				has_dlc = "Battle for the Bosporus"
			}
		}
		NOT = {
			AND = {
				OR = { tag = ETH tag = SWI }
				has_dlc = "By Blood Alone"
			}
		}
		NOT = {
			AND = {
				OR = { tag = NOR tag = SWE tag = FIN tag = DEN }
				has_dlc = "Arms Against Tyranny"
			}
		}
	}

	equipment_type = {
		mio_cat_eq_all_small_plane
		mio_cat_eq_all_medium_plane
		mio_cat_eq_all_large_plane
	}

	research_categories = {
		air_equipment
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_general_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
		# production_bonus = {
		# 	production_capacity_factor = 0.25
		# }
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 6
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 6 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { has_idea = undisturbed_isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = undisturbed_isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_mass_plane_production
		name = mass_plane_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 0 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_fighter_specialization
		name = fighter_specialization
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_plane_production }
		position = { x = -1 y = 1 }
		relative_position_id = mio_mass_plane_production

		mutually_exclusive = { mio_bomber_specialization }

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_small_plane }

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_bomber_specialization
		name = bomber_specialization
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_plane_production }
		position = { x = 1 y = 1 }
		relative_position_id = mio_mass_plane_production

		mutually_exclusive = { mio_fighter_specialization }

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		limit_to_equipment_type = { mio_cat_eq_all_medium_plane }

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		any_parent = { mio_fighter_specialization mio_bomber_specialization }
		position = { x = 0 y = 1 }
		relative_position_id = mio_fighter_specialization

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = war_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = war_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_experimental
		x = 4
	}

	trait = {
		token = mio_plane_analysis_teams
		name = plane_analysis_teams
		icon = GFX_generic_mio_trait_icon_research

		any_parent = { mio_standardized_components }
		position = { x = -2 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
            military_industrial_organization_research_bonus = 0.02
        }
	}

	trait = {
		token = mio_high_powered_engine_production
		name = high_powered_engine_production
		icon = GFX_generic_mio_trait_icon_high_powered_engine_production

		any_parent = { mio_plane_analysis_teams }
		position = { x = 0 y = 1 }
		relative_position_id = mio_plane_analysis_teams

		equipment_bonus = {
			maximum_speed = 0.02
		}
	}


	###

	tree_header_text = {
		text = mio_header_design
		x = 8
	}

	trait = {
		token = mio_cockpit_improvements
		name = cockpit_improvements
		icon = GFX_generic_mio_department_icon_plane_light_quality

		any_parent = { mio_standardized_components }
		position = { x = 2 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		equipment_bonus = {
			air_agility = 0.02
		}
	}

	trait = {
		token = mio_improved_gun_sights
		name = improved_gun_sights
		icon = GFX_generic_mio_trait_icon_improved_gyroscopes

		any_parent = { mio_cockpit_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_cockpit_improvements

		equipment_bonus = {
			air_attack = 0.02
		}
	}

	trait = {
		token = mio_lighter_airframes
		name = lighter_airframes
		icon = GFX_generic_mio_trait_icon_lighter_airframes

		any_parent = { mio_fighter_specialization mio_bomber_specialization }
		position = { x = 2 y = 1 }
		relative_position_id = mio_fighter_specialization

		equipment_bonus = {
			air_agility = 0.02
			maximum_speed = 0.04
		}
	}
}

#############################################################################################################################
###################################################### Light Aircraft #######################################################
#############################################################################################################################
generic_light_aircraft_organization = {
	icon = GFX_idea_generic_air_manufacturer_1

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		small_fighter_airframe
	}

	research_categories = {
		cat_fighter
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_light_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
		# production_bonus = {
		# 	production_capacity_factor = 0.25
		# }
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { has_idea = undisturbed_isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = undisturbed_isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_mass_plane_production
		name = mass_plane_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 0 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_modular_construction
		name = modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_plane_production }
		position = { x = 0 y = 1 }
		relative_position_id = mio_mass_plane_production

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_advanced_smelting_and_tools
		name = advanced_smelting_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_modular_construction }
		position = { x = 0 y = 1 }
		relative_position_id = mio_modular_construction

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = war_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = war_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
            military_industrial_organization_research_bonus = 0.02
        }
	}

	trait = {
		token = mio_polished_aircraft_skins
		name = polished_aircraft_skins
		icon = GFX_generic_mio_trait_icon_polished_aircraft_skins

		any_parent = { mio_dedicated_rd_division }
		position = { x = -1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			air_agility = 0.03
		}
	}

	trait = {
		token = mio_wep_upgrades
		name = wep_upgrades
		icon = GFX_generic_mio_trait_icon_wep_upgrades

		any_parent = { mio_dedicated_rd_division }
		position = { x = 1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			maximum_speed = 0.04
		}
	}

	trait = {
		token = mio_improved_gyroscopes
		name = improved_gyroscopes
		icon = GFX_generic_mio_trait_icon_improved_gyroscopes

		any_parent = { mio_wep_upgrades mio_polished_aircraft_skins }
		position = { x = -1 y = 1 }
		relative_position_id = mio_wep_upgrades

		equipment_bonus = {
			air_attack = 0.03
		}
	}

	trait = {
		token = mio_larger_fuel_capacity
		name = larger_fuel_capacity
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { mio_improved_gyroscopes }
		position = { x = -1 y = 1 }
		relative_position_id = mio_improved_gyroscopes

		mutually_exclusive = { mio_reinforced_hardpoints }

		equipment_bonus = {
			air_range = 0.05
		}
	}

	trait = {
		token = mio_reinforced_hardpoints
		name = reinforced_hardpoints
		icon = GFX_generic_mio_trait_icon_defense

		any_parent = { mio_improved_gyroscopes }
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_gyroscopes

		mutually_exclusive = { mio_larger_fuel_capacity }

		equipment_bonus = {
			air_defence = 0.1
		}
	}

	trait = {
		token = mio_lighter_airframes
		name = lighter_airframes
		icon = GFX_generic_mio_trait_icon_lighter_airframes

		any_parent = { mio_reinforced_hardpoints mio_larger_fuel_capacity }
		position = { x = -1 y = 1 }
		relative_position_id = mio_reinforced_hardpoints

		equipment_bonus = {
			maximum_speed = 0.04
			air_agility = 0.02
		}
	}
}

#############################################################################################################################
##################################################### Light M Aircraft ######################################################
#############################################################################################################################
generic_light_multi_role_aircraft_organization = {
	icon = GFX_idea_generic_air_manufacturer_1

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		small_fighter_multirole_airframe
	}

	research_categories = {
		cat_multirole
	}


	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_light_multi_role_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
		# production_bonus = {
		# 	production_capacity_factor = 0.25
		# }
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { has_idea = undisturbed_isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = undisturbed_isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_mass_plane_production
		name = mass_plane_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 0 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_modular_construction
		name = modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_plane_production }
		position = { x = 1 y = 1 }
		relative_position_id = mio_mass_plane_production

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_gun_pioneers
		name = gun_pioneers
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { mio_mass_plane_production }
		position = { x = -1 y = 1 }
		relative_position_id = mio_mass_plane_production

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = mio_advanced_smelting_and_tools
		name = advanced_smelting_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_modular_construction mio_gun_pioneers }
		position = { x = -1 y = 1 }
		relative_position_id = mio_modular_construction

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = war_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = war_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
            military_industrial_organization_research_bonus = 0.06
        }
	}

	trait = {
		token = mio_improved_landing_gear
		name = improved_landing_gear
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { mio_dedicated_rd_division }
		position = { x = 1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			reliability = 0.04
		}

	}

	trait = {
		token = mio_wep_upgrades
		name = wep_upgrades
		icon = GFX_generic_mio_trait_icon_wep_upgrades

		any_parent = { mio_dedicated_rd_division }
		position = { x = -1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			maximum_speed = 0.04
		}
	}

	trait = {
		token = mio_improved_gyroscopes
		name = improved_gyroscopes
		icon = GFX_generic_mio_trait_icon_improved_gyroscopes

		any_parent = { mio_wep_upgrades }
		position = { x = 0 y = 1 }
		relative_position_id = mio_wep_upgrades

		equipment_bonus = {
			air_attack = 0.03
		}
	}

	trait = {
		token = mio_aerodynamic_hardpoints
		name = aerodynamic_hardpoints
		icon = GFX_generic_mio_trait_icon_air_agility

		any_parent = { mio_improved_landing_gear }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_landing_gear

		equipment_bonus = {
			air_agility = 0.03
		}
	}

	trait = {
		token = mio_reinforced_hardpoints
		name = reinforced_hardpoints
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { mio_improved_gyroscopes mio_aerodynamic_hardpoints }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_gyroscopes

		mutually_exclusive = { mio_high_powered_engine_production }

		equipment_bonus = {
			air_defence = 0.1
		}
	}

	trait = {
		token = mio_high_powered_engine_production
		name = high_powered_engine_production
		icon = GFX_generic_mio_trait_icon_high_powered_engine_production

		all_parents = { mio_improved_gyroscopes mio_aerodynamic_hardpoints }
		position = { x = 0 y = 1 }
		relative_position_id = mio_aerodynamic_hardpoints

		mutually_exclusive = { mio_reinforced_hardpoints }

		equipment_bonus = {
			air_ground_attack = 0.1
		}
	}

	trait = {
		token = mio_lighter_airframes
		name = lighter_airframes
		icon = GFX_generic_mio_trait_icon_lighter_airframes

		any_parent = { mio_reinforced_hardpoints mio_high_powered_engine_production }
		position = { x = 1 y = 1 }
		relative_position_id = mio_reinforced_hardpoints

		equipment_bonus = {
			air_agility = 0.02
			maximum_speed = 0.04
		}
	}
}

#############################################################################################################################
###################################################### Medium Aircraft ######################################################
#############################################################################################################################
generic_medium_aircraft_organization = {

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		medium_multirole_fighter_airframe
		transport_plane_equipment
	}

	research_categories = {
		cat_heavy_fighter
		cat_transport
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_medium_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
		# production_bonus = {
		# 	production_capacity_factor = 0.25
		# }
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_self_owned_powerplants
		name = self_owned_powerplants
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_standardized_components }
		position = { x = -1 y = 1 }
		relative_position_id = mio_standardized_components

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 1 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { has_idea = undisturbed_isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = undisturbed_isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_aluminium_manufacturing
		name = aluminium_manufacturing
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_self_owned_powerplants }
		position = { x = 0 y = 1 }
		relative_position_id = mio_self_owned_powerplants
		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_aluminium_refinery_1 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}

	}

	trait = {
		token = mio_mass_plane_production
		name = mass_plane_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 0 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_modular_construction
		name = modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_plane_production }
		position = { x = -1 y = 1 }
		relative_position_id = mio_mass_plane_production

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_advanced_smelting_and_tools
		name = advanced_smelting_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_modular_construction }
		position = { x = 0 y = 1 }
		relative_position_id = mio_modular_construction

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = war_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = war_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
            military_industrial_organization_research_bonus = 0.02
        }
	}

	trait = {
		token = mio_improved_gyroscopes
		name = improved_gyroscopes
		icon = GFX_generic_mio_trait_icon_improved_gyroscopes

		any_parent = { mio_dedicated_rd_division }
		position = { x = -1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			air_attack = 0.03
		}
	}

	trait = {
		token = mio_reinforced_tailwings
		name = reinforced_tailwings
		icon = GFX_generic_mio_trait_icon_dedicated_hardpoints

		any_parent = { mio_dedicated_rd_division }
		position = { x = 1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			reliability = 0.03
			air_agility = 0.03
		}
	}

	trait = {
		token = mio_refined_engine_air_intakes
		name = refined_engine_air_intakes
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { mio_reinforced_tailwings mio_improved_gyroscopes }
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_gyroscopes

		equipment_bonus = {
			maximum_speed = 0.04
		}
	}

	trait = {
		token = mio_reinforced_hardpoints
		name = reinforced_hardpoints
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { mio_refined_engine_air_intakes }
		position = { x = 1 y = 1 }
		relative_position_id = mio_refined_engine_air_intakes

		mutually_exclusive = { mio_larger_fuel_capacity }

		equipment_bonus = {
			air_defence = 0.1
		}
	}

	trait = {
		token = mio_larger_fuel_capacity
		name = larger_fuel_capacity
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { mio_refined_engine_air_intakes }
		position = { x = -1 y = 1 }
		relative_position_id = mio_refined_engine_air_intakes

		mutually_exclusive = { mio_reinforced_hardpoints }

		equipment_bonus = {
			air_range = 0.05
		}
	}

	trait = {
		token = mio_fuselage_load_optimizations
		name = fuselage_load_optimizations
		icon = GFX_generic_mio_department_icon_plane_tactical_bomber_quality

		any_parent = { mio_larger_fuel_capacity mio_reinforced_hardpoints }
		position = { x = 1 y = 1 }
		relative_position_id = mio_larger_fuel_capacity

		equipment_bonus = {
			air_agility = 0.02
			maximum_speed = 0.04
		}
	}
}

#############################################################################################################################
##################################################### Medium M Aircraft #####################################################
#############################################################################################################################

generic_medium_multi_role_aircraft_organization = {
	icon = GFX_idea_generic_air_manufacturer_3

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		medium_multirole_plane_airframe
		heavy_fighter_airframe
	}

	research_categories = {
		strike_bomber
		cat_attacker
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_medium_multi_role_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
		# production_bonus = {
		# 	production_capacity_factor = 0.25
		# }
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 5 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_self_owned_powerplants
		name = self_owned_powerplants
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_standardized_components }
		position = { x = -2 y = 0 }
		relative_position_id = mio_standardized_components

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = -1 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { has_idea = undisturbed_isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = undisturbed_isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_mass_plane_production
		name = mass_plane_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 1 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_aluminium_manufacturing
		name = aluminium_manufacturing
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = -1 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems
		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_aluminium_refinery_1 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}

	}

	trait = {
		token = mio_gun_pioneers
		name = gun_pioneers
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { mio_mass_plane_production }
		position = { x = -2 y = 1 }
		relative_position_id = mio_mass_plane_production

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = mio_modular_construction
		name = modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_plane_production }
		position = { x = 0 y = 1 }
		relative_position_id = mio_mass_plane_production

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_advanced_smelting_and_tools
		name = advanced_smelting_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_modular_construction }
		position = { x = -1 y = 1 }
		relative_position_id = mio_modular_construction

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = war_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = war_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 9 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
            military_industrial_organization_research_bonus = 0.06
        }
	}

	trait = {
		token = mio_improved_landing_gear
		name = improved_landing_gear
		icon = GFX_generic_mio_trait_icon_reliability

		any_parent = { mio_dedicated_rd_division }
		position = { x = -2 y = 0 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			reliability = 0.04
		}
	}

	trait = {
		token = mio_improved_gyroscopes
		name = improved_gyroscopes
		icon = GFX_generic_mio_trait_icon_improved_gyroscopes

		any_parent = { mio_dedicated_rd_division }
		position = { x = -2 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			air_attack = 0.03
			air_ground_attack = 0.03
		}
	}

	trait = {
		token = mio_reinforced_tailwings
		name = reinforced_tailwings
		icon = GFX_generic_mio_trait_icon_air_agility

		any_parent = { mio_dedicated_rd_division }
		position = { x = 0 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			reliability = 0.03
			air_agility = 0.02
		}
	}

	trait = {
		token = mio_refined_engine_air_intakes
		name = refined_engine_air_intakes
		icon = GFX_generic_mio_trait_icon_maximum_speed

		any_parent = { mio_reinforced_tailwings mio_improved_gyroscopes }
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_gyroscopes

		equipment_bonus = {
			maximum_speed = 0.04
		}
	}

	trait = {
		token = mio_reinforced_hardpoints
		name = reinforced_hardpoints
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { mio_refined_engine_air_intakes }
		position = { x = 1 y = 1 }
		relative_position_id = mio_refined_engine_air_intakes

		mutually_exclusive = { mio_high_powered_engine_production }

		equipment_bonus = {
			air_defence = 0.1
		}
	}

	trait = {
		token = mio_high_powered_engine_production
		name = high_powered_engine_production
		icon = GFX_generic_mio_trait_icon_high_powered_engine_production

		all_parents = { mio_refined_engine_air_intakes }
		position = { x = -1 y = 1 }
		relative_position_id = mio_refined_engine_air_intakes

		mutually_exclusive = { mio_reinforced_hardpoints }

		equipment_bonus = {
			air_ground_attack = 0.03
			air_agility = 0.02
		}
	}

	trait = {
		token = mio_fuselage_load_optimizations
		name = fuselage_load_optimizations
		icon = GFX_generic_mio_department_icon_plane_heavy_fighter_quality

		any_parent = { mio_reinforced_hardpoints mio_high_powered_engine_production }
		position = { x = 1 y = 1 }
		relative_position_id = mio_high_powered_engine_production

		equipment_bonus = {
			air_agility = 0.02
			maximum_speed = 0.04
		}
	}



}

#############################################################################################################################
####################################################### Heavy Aircraft ######################################################
#############################################################################################################################

generic_heavy_aircraft_organization = {
	icon = GFX_idea_generic_air_manufacturer_2

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		medium_plane_airframe
		large_plane_airframe
	}

	research_categories = {
		tactical_bomber
		cat_strategic_bomber
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_heavy_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
	#		production_capacity_factor = 0.25
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.14
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.14
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.18
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.18
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_4
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.02 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_4
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.02 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_4
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.02 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_4
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.02 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.14
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_4
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.02 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.18
			production_efficiency_gain_factor = 0.3
		}
	}

	###

	trait = {
		token = mio_military_contracts
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 10 y = 0 }

		available = {
			FROM = { has_idea = military_contracts }
		}

		visible = {
			FROM = { is_ai = no }
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 3.0
		}
	}

	trait = {
		token = mio_military_contracts_OVER
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_military_contracts }
		position = { x = 0 y = 1 }
		relative_position_id = mio_military_contracts

		available = {
			FROM = { NOT = { has_idea = military_contracts } }
		}

		visible = {
			FROM = { is_ai = no }
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = -3.0
		}
	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_drop_hammer_alloy_straining
		name = drop_hammer_alloy_straining
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = -1 y = 1 }
		relative_position_id = mio_standardized_components

		production_bonus = {
			production_capacity_factor = 0.1
			production_efficiency_gain_factor = 0.1
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 1 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { has_idea = undisturbed_isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = undisturbed_isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_heavy_aluminium_manufacturing
		name = heavy_aluminium_manufacturing
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_drop_hammer_alloy_straining }
		position = { x = 0 y = 1 }
		relative_position_id = mio_drop_hammer_alloy_straining

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_aluminium_refinery_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_heavy_aircraft_factories
		name = heavy_aircraft_factories
		icon = GFX_generic_mio_department_icon_facilities

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 0 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_mass_plane_production
		name = mass_plane_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_drop_hammer_alloy_straining mio_simplified_parts_and_systems }
		position = { x = 1 y = 1 }
		relative_position_id = mio_drop_hammer_alloy_straining
		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_modular_construction
		name = modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_heavy_aluminium_manufacturing mio_heavy_aircraft_factories }
		position = { x = 1 y = 1 }
		relative_position_id = mio_heavy_aluminium_manufacturing

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_advanced_smelting_and_tools
		name = advanced_smelting_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_modular_construction }
		position = { x = 0 y = 1 }
		relative_position_id = mio_modular_construction

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = war_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = war_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_5 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.06
		}
	}

	trait = {
		token = mio_variable_dihedral
		name = variable_dihedral
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { mio_dedicated_rd_division }
		position = { x = 0 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			reliability = 0.05
		}
	}

	trait = {
		token = mio_reinforced_wing_fuselage_braces
		name = reinforced_wing_fuselage_braces
		icon = GFX_generic_mio_trait_icon_reinforced_wing_fuselage_braces

		all_parents = { mio_variable_dihedral }
		position = { x = 0 y = 1 }
		relative_position_id = mio_variable_dihedral

		equipment_bonus = {
			air_defence = 0.1
		}
	}

	trait = {
		token = mio_fuselage_load_optimizations
		name = fuselage_load_optimizations
		icon = GFX_generic_mio_department_icon_plane_strategic_bomber_quality

		all_parents = { mio_reinforced_wing_fuselage_braces }
		position = { x = -1 y = 1 }
		relative_position_id = mio_reinforced_wing_fuselage_braces

		equipment_bonus = {
			maximum_speed = 0.04
			air_agility = 0.02
		}
	}

	trait = {
		token = mio_turret_gun_laying_drives
		name = turret_gun_laying_drives
		icon = GFX_generic_mio_trait_icon_turret_gun_laying_drives

		all_parents = { mio_reinforced_wing_fuselage_braces }
		position = { x = 1 y = 1 }
		relative_position_id = mio_reinforced_wing_fuselage_braces

		equipment_bonus = {
			air_attack = 0.04
		}
	}

	trait = {
		token = mio_radio_navigation_systems
		name = radio_navigation_systems
		icon = GFX_generic_mio_trait_icon_mio_radio_navigation

		any_parent = { mio_fuselage_load_optimizations mio_turret_gun_laying_drives }
		position = { x = 1 y = 1 }
		relative_position_id = mio_fuselage_load_optimizations

		equipment_bonus = {
			air_bombing = 0.04
		}
	}
}

#############################################################################################################################
######################################################## CAS Aircraft #######################################################
#############################################################################################################################
generic_cas_aircraft_organization = {
	icon = GFX_idea_generic_air_manufacturer_1

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		small_bomber_airframe
	}

	research_categories = {
		cas_bomber
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_cas_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
		# production_bonus = {
		# 	production_capacity_factor = 0.25
		# }
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { has_idea = undisturbed_isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = undisturbed_isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_common_parts_usage
		name = common_parts_usage
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = -1 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		on_complete = {
			FROM = {
				custom_effect_tooltip = military_industrial_capital_6
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.05 }
				}
			}
		}

		production_bonus = {
			production_efficiency_cap_factor = 0.05
		}
	}

	trait = {
		token = mio_mass_plane_production
		name = mass_plane_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 1 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_modular_construction
		name = modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { mio_mass_plane_production mio_common_parts_usage }
		position = { x = -1 y = 1 }
		relative_position_id = mio_mass_plane_production

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_advanced_smelting_and_tools
		name = advanced_smelting_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_modular_construction }
		position = { x = 0 y = 1 }
		relative_position_id = mio_modular_construction

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = war_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = war_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.06
		}
	}

	trait = {
		token = mio_wep_upgrades
		name = wep_upgrades
		icon = GFX_generic_mio_trait_icon_wep_upgrades

		all_parents = { mio_dedicated_rd_division }
		position = { x = -1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			maximum_speed = 0.04
		}
	}

	trait = {
		token = mio_improved_landing_gear
		name = improved_landing_gear
		icon = GFX_generic_mio_trait_icon_reliability

		all_parents = { mio_dedicated_rd_division }
		position = { x = 1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			reliability = 0.04
		}
	}

	trait = {
		token = mio_improved_gyroscopes
		name = improved_gyroscopes
		icon = GFX_generic_mio_trait_icon_improved_gyroscopes

		any_parent = { mio_wep_upgrades mio_improved_landing_gear }
		position = { x = 1 y = 1 }
		relative_position_id = mio_wep_upgrades

		equipment_bonus = {
			air_attack = 0.03
			air_ground_attack = 0.03
		}
	}

	trait = {
		token = mio_aerodynamic_hardpoints
		name = aerodynamic_hardpoints
		icon = GFX_generic_mio_trait_icon_air_agility

		all_parents = { mio_improved_landing_gear }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_landing_gear

		equipment_bonus = {
			air_agility = 0.03
		}
	}

	trait = {
		token = mio_improved_wing_designs
		name = improved_wing_designs
		icon = GFX_generic_mio_department_icon_plane_cas_quality

		all_parents = { mio_improved_gyroscopes }
		position = { x = -1 y = 1 }
		relative_position_id = mio_improved_gyroscopes
		mutually_exclusive = { mio_reinforced_hardpoints}

		equipment_bonus = {
			air_agility = 0.03
			air_ground_attack = 0.03
		}
	}

	trait = {
		token = mio_reinforced_hardpoints
		name = reinforced_hardpoints
		icon = GFX_generic_mio_trait_icon_dedicated_hardpoints

		any_parent = { mio_improved_gyroscopes mio_aerodynamic_hardpoints }
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_gyroscopes
		mutually_exclusive = { mio_improved_wing_designs}

		equipment_bonus = {
			air_defence = 0.1
		}
	}

	trait = {
		token = mio_lighter_airframes
		name = lighter_airframes
		icon = GFX_generic_mio_trait_icon_lighter_airframes

		any_parent = { mio_improved_wing_designs mio_reinforced_hardpoints }
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_wing_designs

		equipment_bonus = {
			maximum_speed = 0.04
			air_agility = 0.03
		}
	}
}

#############################################################################################################################
####################################################### Naval Aircraft ######################################################
#############################################################################################################################

generic_naval_aircraft_organization = {
	icon = GFX_idea_generic_air_manufacturer_1

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		cv_small_fighter_airframe
		cv_small_bomber_airframe
		cv_small_plane_naval_bomber_airframe
		large_plane_maritime_patrol_plane_airframe
	}

	research_categories = {
		patrol_bomber
		naval_fighter
		naval_bomber
		naval_cas
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_mio_initial_trait_naval_aircraft_designer

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.5
		}
		# production_bonus = {
		# 	production_capacity_factor = 0.25
		# }
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = ai_mio_streamlined_inbound_processes
		name = ai_streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.04
			production_efficiency_gain_factor = 100.0 #ai bonus
			production_efficiency_cap_factor = 0.04
			#production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = ai_mio_expanded_outbound_stream
		name = ai_expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.08
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = ai_mio_quality_improvements
		name = ai_quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.12
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = ai_mio_new_picking_putaway_strategies
		name = ai_new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.16
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = ai_mio_expert_practices
		name = ai_expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = yes }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			#production_factory_start_efficiency_factor = 0.2
			#production_capacity_factor = 0.2 #ai bonus
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	#############################################################################################################################

	tree_header_text = {
		text = mio_header_factory_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.04
			production_efficiency_gain_factor = 0.06
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 2
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.08
			production_efficiency_gain_factor = 0.12
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 4
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.12
			production_efficiency_gain_factor = 0.18
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.16
			production_efficiency_gain_factor = 0.24
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		visible = {
			FROM = { is_ai = no }
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = military_industrial_capital_3
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_factory = 0.015 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
		production_bonus = {
			production_efficiency_cap_factor = 0.2
			production_efficiency_gain_factor = 0.3
		}
	}

	###

#	trait = {
#		token = mio_military_contracts
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		position = { x = 10 y = 0 }
#
#		available = {
#			FROM = { has_idea = military_contracts }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = 3.0
#		}
#	}
#
#	trait = {
#		token = mio_military_contracts_OVER
#		name = streamlined_inbound_processes
#		icon = GFX_generic_mio_trait_icon_factory_output
#
#		all_parents = { mio_military_contracts }
#		position = { x = 0 y = 1 }
#		relative_position_id = mio_military_contracts
#
#		available = {
#			FROM = { NOT = { has_idea = military_contracts } }
#		}
#
#		organization_modifier = {
#			military_industrial_organization_funds_gain = -3.0
#		}
#	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_simplified_parts_and_systems
		name = simplified_parts_and_systems
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			if = {
				limit = {
					FROM = { has_idea = undisturbed_isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = undisturbed_isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = isolation }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = isolation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = low_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_mass_plane_production
		name = mass_plane_production
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_simplified_parts_and_systems }
		position = { x = 0 y = 1 }
		relative_position_id = mio_simplified_parts_and_systems

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = partial_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_capacity_factor = 0.1
		}
	}

	trait = {
		token = mio_modular_construction
		name = modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_plane_production }
		position = { x = 0 y = 1 }
		relative_position_id = mio_mass_plane_production

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = war_economy
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_3 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.04
		}
	}

	trait = {
		token = mio_advanced_smelting_and_tools
		name = advanced_smelting_and_tools
		icon = GFX_generic_mio_trait_icon_efficiency_gain

		all_parents = { mio_modular_construction }
		position = { x = 0 y = 1 }
		relative_position_id = mio_modular_construction

		available = {
			if = {
				limit = {
					FROM = { has_idea = civilian_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = civilian_economy }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = low_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = low_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = partial_economic_mobilisation }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = partial_economic_mobilisation }
				}
			}
			if = {
				limit = {
					FROM = { has_idea = war_economy }
				}
				FROM = {
					has_idea = tot_economic_mobilisation
					NOT = { has_idea = war_economy }
				}
			}
			#FROM = {
			#	surrender_progress < 0.5
			#}
			has_space_for_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_military_factory_4 = yes
			}
		}

		production_bonus = {
			production_efficiency_gain_factor = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_parrallel_design_teams
		name = parrallel_design_teams
		icon = GFX_generic_mio_department_icon_plane_general_conversion

		position = { x = 5 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { original_tag = FRA }
				}
				OR = {
					FROM = { has_completed_focus = FRA_reorganize_the_aviation_industry }
					FROM = { has_completed_focus = FRA_economic_devolution }
				}
			}
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_research_bonus = 0.06
		}
	}

	trait = {
		token = mio_polished_aircraft_skins
		name = polished_aircraft_skins
		icon = GFX_generic_mio_trait_icon_polished_aircraft_skins

		all_parents = { mio_dedicated_rd_division }
		position = { x = -1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			air_agility = 0.03
		}
	}

	trait = {
		token = mio_high_speed_torpedo_release
		name = high_speed_torpedo_release
		icon = GFX_generic_mio_trait_icon_torpedo_attack

		all_parents = { mio_polished_aircraft_skins }
		position = { x = 0 y = 1 }
		relative_position_id = mio_polished_aircraft_skins

		equipment_bonus = {
			air_agility = 0.03
			naval_strike_attack = 0.03
		}
	}

	trait = {
		token = mio_radio_navigation
		name = radio_navigation
		icon = GFX_generic_mio_trait_icon_mio_radio_navigation

		all_parents = { mio_high_speed_torpedo_release }
		position = { x = 0 y = 1 }
		relative_position_id = mio_high_speed_torpedo_release

		equipment_bonus = {
			air_range = 0.05
		}
	}

	trait = {
		token = mio_wep_upgrades
		name = wep_upgrades
		icon = GFX_generic_mio_trait_icon_wep_upgrades

		all_parents = { mio_dedicated_rd_division }
		position = { x = 1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			maximum_speed = 0.04
		}
	}

	trait = {
		token = mio_improved_gyroscopes
		name = improved_gyroscopes
		icon = GFX_generic_mio_trait_icon_improved_gyroscopes

		all_parents = { mio_wep_upgrades }
		position = { x = 0 y = 1 }
		relative_position_id = mio_wep_upgrades

		equipment_bonus = {
			air_attack = 0.03
			naval_strike_attack = 0.03
		}
	}

	trait = {
		token = mio_dedicated_hardpoints
		name = dedicated_hardpoints
		icon = GFX_generic_mio_trait_icon_dedicated_hardpoints

		all_parents = { mio_improved_gyroscopes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_gyroscopes

		equipment_bonus = {
			mines_planting = 0.1
			sub_detection = 0.1
		}
	}

	trait = {
		token = mio_lighter_airframes
		name = lighter_airframes
		icon = GFX_generic_mio_trait_icon_lighter_airframes

		all_parents = { mio_radio_navigation mio_dedicated_hardpoints }
		position = { x = 1 y = 1 }
		relative_position_id = mio_radio_navigation

		equipment_bonus = {
			maximum_speed = 0.04
			air_agility = 0.02
		}
	}
}