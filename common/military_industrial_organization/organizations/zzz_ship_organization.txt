#!gfx:interface\military_industrial_organization\wa_industrial_organization_department_icons.gfx

 ######  ##     ## #### ########   ######
##    ## ##     ##  ##  ##     ## ##    ##
##       ##     ##  ##  ##     ## ##
 ######  #########  ##  ########   ######
	  ## ##     ##  ##  ##              ##
##    ## ##     ##  ##  ##        ##    ##
 ######  ##     ## #### ##         ######

#############################################################################################################################
###################################################### Heavy Task Force #####################################################
#############################################################################################################################

generic_heavy_task_force_ship_organization = {
   	icon = GFX_idea_generic_naval_manufacturer_1

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		#mio_cat_eq_all_battleships
		mio_cat_eq_all_carrier
	}

	research_categories = {
		#bb_tech
		#bc_tech
		cv_tech
		cvl_tech
		ship_modules_tech
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_heavy_task_force_ship_builders

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 1.0
		}
	}

	###

	tree_header_text = {
		text = mio_header_dockyard_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_dockyard_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	###

	trait = {
		token = mio_military_contracts
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 10 y = 0 }

		available = {
			FROM = { has_idea = military_contracts }
		}
	}

	trait = {
		token = mio_military_contracts_OVER
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_military_contracts }
		position = { x = 0 y = 1 }
		relative_position_id = mio_military_contracts

		available = {
			FROM = { NOT = { has_idea = military_contracts } }
		}
	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_internal_armour_belts
		name = internal_armour_belts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { mio_internal_armour_belts }
		position = { x = -1 y = 1 }
		relative_position_id = mio_internal_armour_belts

		available = {
			has_early_mobilization = yes
		}

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = mio_modernized_heavy_ship_construction
		name = modernized_heavy_ship_construction
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_partial_mobilization = yes
			has_space_for_naval_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_dockyard_5 = yes
				mio_steel_refinery_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_improved_modular_construction
		name = improved_modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_modernized_heavy_ship_construction }
		position = { x = 0 y = 1 }
		relative_position_id = mio_modernized_heavy_ship_construction

		available = {
			has_war_economy = yes
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_improved_modular_construction mio_improved_heavy_gun_rammers }
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_modular_construction

		available = {
			has_total_mobilization = yes
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}


	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
            military_industrial_organization_research_bonus = 0.06
        }
	}

	trait = {
		token = mio_isolated_fire_mains
		name = isolated_fire_mains
		icon = GFX_generic_mio_trait_icon_naval_torpedo_damage_reduction_factor

		all_parents = { mio_dedicated_rd_division}
		position = { x = -1 y = 1 }
		relative_position_id = mio_dedicated_rd_division


		equipment_bonus = {
			naval_torpedo_damage_reduction_factor = 0.05
		}
	}

	trait = {
		token = mio_improved_control_centre
		name = improved_control_centre
		icon = GFX_generic_mio_trait_icon_batteries_hit_chance

		all_parents = { mio_dedicated_rd_division}
		position = { x = 1 y = 1 }
		relative_position_id = mio_dedicated_rd_division


		equipment_bonus = {
            naval_heavy_gun_hit_chance_factor = 0.05
			naval_light_gun_hit_chance_factor = 0.05
        }
	}

	trait = {
		token = mio_advanced_bulkhead_shoring
		name = advanced_bulkhead_shoring
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { mio_isolated_fire_mains mio_internal_armour_belts }
		position = { x = -1 y = 1 }
		relative_position_id = mio_isolated_fire_mains


		equipment_bonus = {
			max_strength = 0.05
		}
	}

	trait = {
		token = mio_improved_heavy_gun_rammers
		name = improved_heavy_gun_rammers
		icon = GFX_generic_mio_trait_icon_hg_attack

		all_parents = { mio_advanced_bulkhead_shoring}
		position = { x = 0 y = 1 }
		relative_position_id = mio_advanced_bulkhead_shoring

		available = {
		}

		equipment_bonus = {
			hg_attack = 0.05
		}
	}

	trait = {
		token = mio_modern_aa_gyro_mounts
		name = modern_aa_gyro_mounts
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { mio_isolated_fire_mains mio_improved_control_centre}
		position = { x = 1 y = 1 }
		relative_position_id = mio_isolated_fire_mains

		available = {
		}

		equipment_bonus = {
			anti_air_attack = 0.05
		}
	}

	trait = {
		token = mio_fleet_combat_information_centre
		name = fleet_combat_information_centre
		icon = GFX_generic_mio_trait_icon_defense

		all_parents = { mio_modern_aa_gyro_mounts}
		position = { x = 0 y = 1 }
		relative_position_id = mio_modern_aa_gyro_mounts

		available = {
		}

		equipment_bonus = {
			surface_visibility = -0.05
		}
	}

	trait = {
		token = mio_improved_flight_operations_centre
		name = improved_flight_operations_centre
		icon = GFX_generic_mio_department_icon_ship_carrier_quality

		all_parents = { mio_improved_control_centre}
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_control_centre

		available = {
		}

		limit_to_equipment_type = {
			ship_hull_carrier
		}

		equipment_bonus = {
			naval_weather_penalty_factor = -0.05
		}
	}

	trait = {
		token = mio_flight_deck_aa_mountings
		name = flight_deck_aa_mountings
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		all_parents = { mio_improved_flight_operations_centre}
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_flight_operations_centre

		available = {
		}

		limit_to_equipment_type = {
			ship_hull_carrier
		}

		equipment_bonus = {
			max_strength = 0.05
			anti_air_attack = 0.05
		}
	}

	trait = {
		token = mio_counter_flooding_systems
		name = counter_flooding_systems
		icon = GFX_generic_mio_trait_icon_max_strength

		any_parent = { mio_improved_heavy_gun_rammers mio_fleet_combat_information_centre}
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_heavy_gun_rammers


		equipment_bonus = {
			max_strength = 0.05
			naval_torpedo_enemy_critical_chance_factor = -0.1
		}
	}

	trait = {
		token = mio_engine_upgrades
		name = engine_upgrades
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { mio_flight_deck_aa_mountings mio_fleet_combat_information_centre}
		position = { x = 1 y = 1 }
		relative_position_id = mio_fleet_combat_information_centre


		equipment_bonus = {
			fuel_consumption = -0.1
		}
	}
}

#############################################################################################################################
###################################################### Heavy Battle Line ####################################################
#############################################################################################################################

generic_heavy_battle_line_ship_organization = {
   	icon = GFX_idea_generic_naval_manufacturer_2

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		mio_cat_eq_all_battleships
	}

	research_categories = {
		bb_tech
		bc_tech
		ship_modules_tech
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_heavy_battle_line_ship_builders

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 1.0
		}
	}

	###

	tree_header_text = {
		text = mio_header_dockyard_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_dockyard_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	###

	trait = {
		token = mio_military_contracts
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 10 y = 0 }

		available = {
			FROM = { has_idea = military_contracts }
		}
	}

	trait = {
		token = mio_military_contracts_OVER
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_military_contracts }
		position = { x = 0 y = 1 }
		relative_position_id = mio_military_contracts

		available = {
			FROM = { NOT = { has_idea = military_contracts } }
		}
	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_internal_armour_belts
		name = internal_armour_belts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { mio_internal_armour_belts }
		position = { x = -1 y = 1 }
		relative_position_id = mio_internal_armour_belts

		available = {
			has_early_mobilization = yes
		}

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = mio_modernized_heavy_ship_construction
		name = modernized_heavy_ship_construction
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_partial_mobilization = yes
			has_space_for_naval_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_dockyard_5 = yes
				mio_steel_refinery_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_improved_modular_construction
		name = improved_modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_modernized_heavy_ship_construction }
		position = { x = 0 y = 1 }
		relative_position_id = mio_modernized_heavy_ship_construction

		available = {
			has_war_economy = yes
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_improved_modular_construction mio_improved_heavy_gun_rammers }
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_modular_construction

		available = {
			has_total_mobilization = yes
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
            military_industrial_organization_research_bonus = 0.06
        }
	}

	trait = {
		token = mio_isolated_fire_mains
		name = isolated_fire_mains
		icon = GFX_generic_mio_trait_icon_naval_torpedo_damage_reduction_factor

		all_parents = { mio_dedicated_rd_division}
		position = { x = -1 y = 1 }
		relative_position_id = mio_dedicated_rd_division


		equipment_bonus = {
			naval_torpedo_damage_reduction_factor = 0.05
		}
	}

	trait = {
		token = mio_improved_control_centre
		name = improved_control_centre
		icon = GFX_generic_mio_trait_icon_batteries_hit_chance

		all_parents = { mio_dedicated_rd_division}
		position = { x = 1 y = 1 }
		relative_position_id = mio_dedicated_rd_division


		equipment_bonus = {
            naval_heavy_gun_hit_chance_factor = 0.05
			naval_light_gun_hit_chance_factor = 0.05
        }
	}

	trait = {
		token = mio_advanced_bulkhead_shoring
		name = advanced_bulkhead_shoring
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { mio_isolated_fire_mains mio_internal_armour_belts }
		position = { x = -1 y = 1 }
		relative_position_id = mio_isolated_fire_mains


		equipment_bonus = {
			max_strength = 0.05
		}
	}

	trait = {
		token = mio_improved_heavy_gun_rammers
		name = improved_heavy_gun_rammers
		icon = GFX_generic_mio_trait_icon_hg_attack

		all_parents = { mio_advanced_bulkhead_shoring}
		position = { x = 0 y = 1 }
		relative_position_id = mio_advanced_bulkhead_shoring

		available = {
		}

		equipment_bonus = {
			hg_attack = 0.05
		}
	}

	trait = {
		token = mio_modern_aa_gyro_mounts
		name = modern_aa_gyro_mounts
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { mio_isolated_fire_mains mio_improved_control_centre}
		position = { x = 1 y = 1 }
		relative_position_id = mio_isolated_fire_mains

		available = {
		}

		equipment_bonus = {
			anti_air_attack = 0.05
		}
	}

	trait = {
		token = mio_fleet_combat_information_centre
		name = fleet_combat_information_centre
		icon = GFX_generic_mio_department_icon_ship_capital_ship_quality

		all_parents = { mio_modern_aa_gyro_mounts}
		position = { x = 0 y = 1 }
		relative_position_id = mio_modern_aa_gyro_mounts

		available = {
		}

		equipment_bonus = {
			surface_visibility = -0.05
		}
	}

	trait = {
		token = mio_super_charges
		name = super_charges
		icon = GFX_generic_mio_trait_icon_hg_attack

		all_parents = { mio_improved_control_centre}
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_control_centre

		available = {
		}

		limit_to_equipment_type = {
			ship_hull_heavy_battleship
		}

		equipment_bonus = {
			hg_attack = 0.05
		}
	}

	trait = {
		token = mio_heavy_splinter_protection
		name = heavy_splinter_protection
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { mio_super_charges}
		position = { x = 0 y = 1 }
		relative_position_id = mio_super_charges

		available = {
		}

		limit_to_equipment_type = {
			ship_hull_heavy_battleship
		}

		equipment_bonus = {
			max_strength = 0.05
		}
	}

	trait = {
		token = mio_counter_flooding_systems
		name = counter_flooding_systems
		icon = GFX_generic_mio_trait_icon_max_strength

		any_parent = { mio_improved_heavy_gun_rammers mio_fleet_combat_information_centre}
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_heavy_gun_rammers


		equipment_bonus = {
			max_strength = 0.05
			naval_torpedo_enemy_critical_chance_factor = -0.1
		}
	}

	trait = {
		token = mio_engine_upgrades
		name = engine_upgrades
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { mio_heavy_splinter_protection mio_fleet_combat_information_centre}
		position = { x = 1 y = 1 }
		relative_position_id = mio_fleet_combat_information_centre


		equipment_bonus = {
			fuel_consumption = -0.1
		}
	}
}

#############################################################################################################################
########################################################### Medium ##########################################################
#############################################################################################################################

generic_medium_ship_organization = {
	icon = GFX_idea_generic_naval_manufacturer_3

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		mio_cat_eq_all_cruiser
		#ship_hull_heavy_cruiser
	}

	research_categories = {
		cl_tech
		ca_tech
		ship_modules_tech
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_medium_ship_builders

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 1.0
		}
	}

	###

	tree_header_text = {
		text = mio_header_dockyard_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_dockyard_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	###

	trait = {
		token = mio_military_contracts
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 10 y = 0 }

		available = {
			FROM = { has_idea = military_contracts }
		}
	}

	trait = {
		token = mio_military_contracts_OVER
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_military_contracts }
		position = { x = 0 y = 1 }
		relative_position_id = mio_military_contracts

		available = {
			FROM = { NOT = { has_idea = military_contracts } }
		}
	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 3
	}

	trait = {
		token = mio_internal_armour_belts
		name = internal_armour_belts
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 3 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { mio_internal_armour_belts }
		position = { x = 0 y = 1 }
		relative_position_id = mio_internal_armour_belts

		available = {
			has_early_mobilization = yes
		}

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = mio_streamlined_ship_construction
		name = streamlined_ship_construction
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_standardized_components }
		position = { x = -1 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_partial_mobilization = yes
			has_space_for_naval_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_dockyard_3 = yes
				mio_steel_refinery_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_escort_ship_design
		name = escort_ship_design
		icon = GFX_generic_mio_trait_icon_naval_speed

		all_parents = { mio_standardized_components }
		position = { x = 1 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_partial_mobilization = yes
		}

		equipment_bonus = {
			naval_range = 0.05
		}
	}

	trait = {
		token = mio_improved_modular_construction
		name = improved_modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { mio_streamlined_ship_construction mio_escort_ship_design }
		position = { x = 1 y = 1 }
		relative_position_id = mio_streamlined_ship_construction

		available = {
			has_war_economy = yes
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_improved_modular_construction }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_modular_construction

		available = {
			has_total_mobilization = yes
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
            military_industrial_organization_research_bonus = 0.06
        }
	}

	trait = {
		token = mio_isolated_fire_mains
		name = isolated_fire_mains
		icon = GFX_generic_mio_trait_icon_naval_torpedo_damage_reduction_factor

		all_parents = { mio_dedicated_rd_division}
		position = { x = -1 y = 1 }
		relative_position_id = mio_dedicated_rd_division


		equipment_bonus = {
			naval_torpedo_damage_reduction_factor = 0.1
		}
	}

	trait = {
		token = mio_improved_control_centre
		name = improved_control_centre
		icon = GFX_generic_mio_department_icon_ship_screen_ship_quality

		all_parents = { mio_dedicated_rd_division}
		position = { x = 1 y = 1 }
		relative_position_id = mio_dedicated_rd_division


		equipment_bonus = {
            naval_heavy_gun_hit_chance_factor = 0.05
			naval_light_gun_hit_chance_factor = 0.05
        }
	}

	trait = {
		token = mio_secondary_gun_layout
		name = secondary_gun_layout
		icon = GFX_generic_mio_trait_icon_lg_attack

		any_parent = { mio_isolated_fire_mains mio_improved_control_centre}
		position = { x = 0 y = 1 }
		relative_position_id = mio_isolated_fire_mains
		mutually_exclusive = { mio_anti_air_layout}


		equipment_bonus = {
			lg_attack = 0.05
        }
	}

	trait = {
		token = mio_anti_air_layout
		name = anti_air_layout
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { mio_isolated_fire_mains mio_improved_control_centre}
		position = { x = 2 y = 1 }
		relative_position_id = mio_isolated_fire_mains
		mutually_exclusive = { mio_secondary_gun_layout}


		equipment_bonus = {
			anti_air_attack = 0.05
        }
	}

	trait = {
		token = mio_advanced_bulkhead_shoring
		name = advanced_bulkhead_shoring
		icon = GFX_generic_mio_trait_icon_max_strength

		any_parent = { mio_anti_air_layout mio_secondary_gun_layout}
		position = { x = -1 y = 1 }
		relative_position_id = mio_secondary_gun_layout


		equipment_bonus = {
			max_strength = 0.05
		}
	}

	trait = {
		token = mio_improved_heavy_gun_rammers
		name = improved_heavy_gun_rammers
		icon = GFX_generic_mio_trait_icon_hg_attack

		any_parent = { mio_anti_air_layout mio_secondary_gun_layout}
		position = { x = 1 y = 1 }
		relative_position_id = mio_secondary_gun_layout

		available = {
		}

		equipment_bonus = {
			hg_attack = 0.05
			lg_attack = 0.05
		}
	}

	trait = {
		token = mio_modern_aa_gyro_mounts
		name = modern_aa_gyro_mounts
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		any_parent = { mio_anti_air_layout mio_secondary_gun_layout}
		position = { x = 3 y = 1 }
		relative_position_id = mio_secondary_gun_layout

		available = {
		}

		equipment_bonus = {
			anti_air_attack = 0.05
		}
	}

	trait = {
		token = mio_counter_flooding_systems
		name = counter_flooding_systems
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		any_parent = { mio_improved_heavy_gun_rammers mio_advanced_bulkhead_shoring}
		position = { x = -1 y = 1 }
		relative_position_id = mio_improved_heavy_gun_rammers


		equipment_bonus = {
			naval_torpedo_enemy_critical_chance_factor = -0.1
		}
	}

	trait = {
		token = mio_engine_upgrades
		name = engine_upgrades
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { mio_improved_heavy_gun_rammers mio_modern_aa_gyro_mounts}
		position = { x = 1 y = 1 }
		relative_position_id = mio_improved_heavy_gun_rammers


		equipment_bonus = {
			fuel_consumption = -0.1
		}
	}
}

#############################################################################################################################
############################################################ Light ##########################################################
#############################################################################################################################

generic_light_ship_organization = {
	icon = GFX_idea_generic_naval_manufacturer_1

	allowed = {
		has_dlc = "Arms Against Tyranny"
		NOT = { OR = { tag = GER tag = ENG tag = SOV tag = FRA tag = VIC tag = ITA tag = JAP tag = USA tag = SWE tag = HUN tag = CZE tag = ROM tag = YUG tag = POL tag = BEL tag = SIA tag = CHI tag = PRC tag = MAN tag = SHX tag = XSM tag = GXC tag = YUN tag = SIK tag = MEN } }
		NOT = {
			AND = {
				OR = { tag = AST tag = CAN tag = NZL tag = RAJ tag = SAF }
				has_dlc = "Together for Victory"
			}
		}
		NOT = {
			AND = {
				OR = { tag = MEX tag = HOL }
				has_dlc = "Man the Guns"
			}
		}
		NOT = {
			AND = {
				OR = { tag = SPR tag = SPA tag = SPB tag = SPC tag = SPD tag = POR}
				has_dlc = "La Resistance"
			}
		}
		NOT = {
			AND = {
				OR = { tag = BUL tag = GRE tag = TUR }
				has_dlc = "Battle for the Bosporus"
			}
		}
		NOT = {
			AND = {
				OR = { tag = EST  tag = LAT }
				has_dlc = "No Step Back"
			}
		}
		NOT = {
			AND = {
				OR = { tag = ETH tag = SWI }
				has_dlc = "By Blood Alone"
			}
		}
		NOT = {
			AND = {
				OR = { tag = FIN tag = NOR tag = DEN tag = SWE }
				has_dlc = "Arms Against Tyranny"
			}
		}
	}

	equipment_type = {
		mio_cat_eq_all_destroyer
	}

	research_categories = {
		dd_tech
		ff_tech
		asw_tech
		naval_mines
		torp_tech
		#ship_modules_tech
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_light_ship_builders

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 1.0
		}
	}

	###

	tree_header_text = {
		text = mio_header_dockyard_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_dockyard_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	###

	trait = {
		token = mio_military_contracts
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 10 y = 0 }

		available = {
			FROM = { has_idea = military_contracts }
		}
	}

	trait = {
		token = mio_military_contracts_OVER
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_military_contracts }
		position = { x = 0 y = 1 }
		relative_position_id = mio_military_contracts

		available = {
			FROM = { NOT = { has_idea = military_contracts } }
		}
	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 3
	}

	trait = {
		token = mio_prioritised_armour_layout
		name = prioritised_armour_layout
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		position = { x = 3 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_standardized_components
		name = standardized_components
		icon = GFX_generic_mio_trait_icon_conversion_speed

		all_parents = { mio_prioritised_armour_layout }
		position = { x = 0 y = 1 }
		relative_position_id = mio_prioritised_armour_layout

		available = {
			has_early_mobilization = yes
		}

		production_bonus = {
			production_conversion_speed_factor = 0.2
		}
	}

	trait = {
		token = mio_mass_ship_construction
		name = mass_ship_construction
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_standardized_components }
		position = { x = 0 y = 1 }
		relative_position_id = mio_standardized_components

		available = {
			has_partial_mobilization = yes
			has_space_for_naval_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_dockyard_1 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_improved_modular_construction
		name = improved_modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_ship_construction }
		position = { x = 0 y = 1 }
		relative_position_id = mio_mass_ship_construction

		available = {
			has_war_economy = yes
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = advanced_forges_and_tools
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_improved_modular_construction }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_modular_construction

		available = {
			has_total_mobilization = yes
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
            military_industrial_organization_research_bonus = 0.06
        }
	}

	trait = {
		token = mio_improved_control_centre
		name = improved_control_centre
		icon = GFX_generic_mio_department_icon_ship_screen_ship_quality

		all_parents = { mio_dedicated_rd_division}
		position = { x = 0 y = 1 }
		relative_position_id = mio_dedicated_rd_division


		equipment_bonus = {
			naval_light_gun_hit_chance_factor = 0.05
        }
	}

	trait = {
		token = mio_resilient_ship_design
		name = resilient_ship_design
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { mio_improved_control_centre}
		position = { x = -2 y = 1 }
		relative_position_id = mio_improved_control_centre


		equipment_bonus = {
			max_strength = 0.1
        }
	}

	trait = {
		token = mio_advanced_scanners
		name = advanced_scanners
		icon = GFX_generic_mio_trait_icon_naval_range

		all_parents = { mio_improved_control_centre}
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_control_centre


		equipment_bonus = {
			patrol_coordination = 0.05
        }
	}

	trait = {
		token = mio_modern_aa_gyro_mounts
		name = modern_aa_gyro_mounts
		icon = GFX_generic_mio_trait_icon_anti_air_attack

		all_parents = { mio_improved_control_centre}
		position = { x = 2 y = 1 }
		relative_position_id = mio_improved_control_centre


		equipment_bonus = {
			anti_air_attack = 0.05
        }
	}

	trait = {
		token = mio_quick_firing_methods
		name = quick_firing_methods
		icon = GFX_generic_mio_trait_icon_lg_attack

		any_parent = { mio_resilient_ship_design mio_advanced_scanners}
		position = { x = 1 y = 1 }
		relative_position_id = mio_resilient_ship_design


		equipment_bonus = {
			lg_attack = 0.05
        }
	}

	trait = {
		token = mio_quicklaying_racks
		name = quicklaying_racks
		icon = GFX_generic_mio_trait_icon_mines

		any_parent = { mio_modern_aa_gyro_mounts mio_advanced_scanners}
		position = { x = 1 y = 1 }
		relative_position_id = mio_advanced_scanners


		equipment_bonus = {
			mines_planting = 0.05
			sub_attack = 0.05
        }
	}

	trait = {
		token = mio_engine_upgrades
		name = engine_upgrades
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		any_parent = { mio_quicklaying_racks mio_quick_firing_methods}
		position = { x = 1 y = 1 }
		relative_position_id = mio_quick_firing_methods


		equipment_bonus = {
			fuel_consumption = -0.1
		}
	}
}

#############################################################################################################################
########################################################## Submarine ########################################################
#############################################################################################################################

generic_submarine_organization = {
   	icon = GFX_idea_generic_naval_manufacturer_1

	allowed = {
		always = no # Archetype only - countries using it have their own verisons
	}

	equipment_type = {
		mio_cat_eq_all_submarine
	}

	research_categories = {
		ss_tech
		torp_tech
	}

	research_bonus = 0.04

	initial_trait = {
		name = generic_submarine_builders

		organization_modifier = {
			military_industrial_organization_size_up_requirement = 1.0
		}
	}

	###

	tree_header_text = {
		text = mio_header_dockyard_output
		x = 1
	}

	trait = {
		token = mio_streamlined_inbound_processes
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_dockyard_output

		position = { x = 1 y = 0 }

		available = {
			FROM = {
				has_tech = expanded_industry1
				NOT = { has_idea = primative_economy }
			}
		}

		on_complete = {#1
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_expanded_outbound_stream
		name = expanded_outbound_stream
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_streamlined_inbound_processes }
		position = { x = 0 y = 1 }
		relative_position_id = mio_streamlined_inbound_processes

		available = {
			FROM = {
				has_tech = expanded_industry2
			}
			has_mio_size > 1
		}

		on_complete = {#2
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_quality_improvements
		name = quality_improvements
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_expanded_outbound_stream }
		position = { x = 0 y = 1 }
		relative_position_id = mio_expanded_outbound_stream

		available = {
			FROM = {
				has_tech = expanded_industry3
			}
			has_mio_size > 3
		}

		on_complete = {#3
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_new_picking_putaway_strategies
		name = new_picking_putaway_strategies
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_quality_improvements }
		position = { x = 0 y = 1 }
		relative_position_id = mio_quality_improvements

		available = {
			FROM = {
				has_tech = expanded_industry4
			}
			has_mio_size > 6
		}

		on_complete = {#4
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	trait = {
		token = mio_expert_practices
		name = expert_practices
		icon = GFX_generic_mio_trait_icon_dockyard_output

		all_parents = { mio_new_picking_putaway_strategies }
		position = { x = 0 y = 1 }
		relative_position_id = mio_new_picking_putaway_strategies

		available = {
			FROM = {
				has_tech = expanded_industry5
			}
			has_mio_size > 8
		}

		on_complete = {#5
			FROM = {
				custom_effect_tooltip = dockyard_industrial_capital_2
				hidden_effect = {
					add_to_variable = { military_industrial_capital_industrial_capacity_dockyard = 0.01 }
				}
			}
		}

		organization_modifier = {
			military_industrial_organization_funds_gain = 0.01
		}
	}

	###

	trait = {
		token = mio_military_contracts
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		position = { x = 10 y = 0 }

		available = {
			FROM = { has_idea = military_contracts }
		}
	}

	trait = {
		token = mio_military_contracts_OVER
		name = streamlined_inbound_processes
		icon = GFX_generic_mio_trait_icon_factory_output

		all_parents = { mio_military_contracts }
		position = { x = 0 y = 1 }
		relative_position_id = mio_military_contracts

		available = {
			FROM = { NOT = { has_idea = military_contracts } }
		}
	}

	###

	tree_header_text = {
		text = mio_header_production
		x = 4
	}

	trait = {
		token = mio_seperate_supply_chains
		name = seperate_supply_chains
		icon = GFX_generic_mio_trait_icon_supply_consumption

		position = { x = 4 y = 0 }

		available = {
			FROM = {
				NOT = { has_idea = primative_economy }
				#NOT = { has_idea = undisturbed_isolation }
				#NOT = { has_idea = isolation }
				#surrender_progress < 0.5
			}
		}

		organization_modifier = {
			military_industrial_organization_size_up_requirement = -0.25
		}
	}

	trait = {
		token = mio_submarine_pens
		name = submarine_pens
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_seperate_supply_chains }
		position = { x = 0 y = 1 }
		relative_position_id = mio_seperate_supply_chains

		available = {
			has_early_mobilization = yes
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_mass_submarine_construction
		name = mass_submarine_construction
		icon = GFX_generic_mio_trait_icon_production_capacity

		all_parents = { mio_submarine_pens }
		position = { x = 0 y = 1 }
		relative_position_id = mio_submarine_pens

		available = {
			has_partial_mobilization = yes
			has_space_for_naval_mio_industry = yes
		}

		on_complete = {
			FROM = {
				mio_dockyard_2 = yes
			}
		}

		production_bonus = {
			production_cost_factor = -0.02
		}
	}

	trait = {
		token = mio_improved_modular_construction
		name = improved_modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_submarine_construction }
		position = { x = -1 y = 1 }
		relative_position_id = mio_mass_submarine_construction

		available = {
			has_war_economy = yes
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_advanced_forges_and_tools
		name = improved_modular_construction
		icon = GFX_generic_mio_trait_icon_build_cost_ic

		all_parents = { mio_mass_submarine_construction }
		position = { x = 1 y = 1 }
		relative_position_id = mio_mass_submarine_construction

		available = {
			has_war_economy = yes
		}

		production_bonus = {
			production_cost_factor = -0.03
		}
	}

	trait = {
		token = mio_hydrodynamic_light_hulls
		name = hydrodynamic_light_hulls
		icon = GFX_generic_mio_trait_icon_naval_speed

		all_parents = { mio_improved_modular_construction }
		position = { x = 0 y = 1 }
		relative_position_id = mio_improved_modular_construction

		available = {
			has_total_mobilization = yes
		}

		equipment_bonus = {
			naval_range = 0.05
		}
	}

	###

	tree_header_text = {
		text = mio_header_design
		x = 7
	}

	trait = {
		token = mio_dedicated_rd_division
		name = dedicated_rd_division
		icon = GFX_generic_mio_trait_icon_research

		position = { x = 7 y = 0 }

		available = {
			if = {
				limit = {
					FROM = { is_ai = yes }
				}
				FROM = {
					has_tech = expanded_industry5
				}
			}
		}

		organization_modifier = {
            military_industrial_organization_research_bonus = 0.06
        }
	}

	trait = {
		token = mio_engine_upgrades
		name = engine_upgrades
		icon = GFX_generic_mio_trait_icon_fuel_consumption

		all_parents = { mio_dedicated_rd_division }
		position = { x = -1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			fuel_consumption = -0.1
		}
	}

	trait = {
		token = mio_higher_undersea_propulsion
		name = higher_undersea_propulsion
		icon = GFX_generic_mio_trait_icon_maximum_speed

		all_parents = { mio_engine_upgrades }
		position = { x = 0 y = 1 }
		relative_position_id = mio_engine_upgrades

		equipment_bonus = {
			naval_speed = 0.05
		}
	}

	trait = {
		token = mio_high_strength_pressure_hulls
		name = high_strength_pressure_hulls
		icon = GFX_generic_mio_trait_icon_max_strength

		all_parents = { mio_dedicated_rd_division }
		position = { x = 1 y = 1 }
		relative_position_id = mio_dedicated_rd_division

		equipment_bonus = {
			max_strength = 0.05
		}
	}

	trait = {
		token = mio_advanced_ops_centre
		name = advanced_ops_centre
		icon = GFX_generic_mio_department_icon_ship_submarine_quality

		all_parents = { mio_high_strength_pressure_hulls }
		position = { x = 0 y = 1 }
		relative_position_id = mio_high_strength_pressure_hulls

		equipment_bonus = {
			convoy_raiding_coordination = 0.05
		}
	}

	trait = {
		token = mio_advanced_torpedo_banks
		name = advanced_torpedo_banks
		icon = GFX_generic_mio_trait_icon_torpedo_attack

		any_parent = { mio_higher_undersea_propulsion mio_advanced_ops_centre }
		position = { x = 1 y = 1 }
		relative_position_id = mio_higher_undersea_propulsion

		equipment_bonus = {
			torpedo_attack = 0.05
		}
	}

	trait = {
		token = mio_anechoic_plating
		name = anechoic_plating
		icon = GFX_generic_mio_trait_icon_sub_visibility

		all_parents = { mio_advanced_torpedo_banks mio_advanced_forges_and_tools }
		position = { x = 1 y = 1 }
		relative_position_id = mio_advanced_forges_and_tools

		equipment_bonus = {
			sub_visibility = -0.05
		}
	}

	trait = {
		token = mio_attack_periscope
		name = attack_periscope
		icon = GFX_generic_mio_trait_icon_naval_torpedo_hit_chance_factor

		all_parents = { mio_advanced_ops_centre }
		position = { x = 1 y = 1 }
		relative_position_id = mio_advanced_ops_centre

		equipment_bonus = {
			naval_torpedo_hit_chance_factor = 0.05
		}
	}

	trait = {
		token = mio_radar_warning_receiver
		name = radar_warning_receiver
		icon = GFX_generic_mio_trait_icon_surface_visibility

		all_parents = { mio_attack_periscope }
		position = { x = 0 y = 1 }
		relative_position_id = mio_attack_periscope

		equipment_bonus = {
			sub_visibility = -0.05
		}
	}
}
