#### COMBAT TACTICS ###########################################################
#
# NOTE: tactics must start with "tactic_" in their name to work with techs.
###############################################################################

phases = { # phase = no is the standard phase, default phase = positional phase
	trench_assault
	long_range
	breakthrough
	urban_warefare
	amphibious
	close_combat
	tactical_withdrawal
	seize_bridge
	hold_bridge
}

# Slow combat down by making attacker / defender damage low.
# Increase strength damage by decreasing attacker / defender org damage modifier
# Decrease battle length by increasing attacker / defender org damage modifier
# When adding modifiers to tactic chance, only add a maximum of four types of modifier "categories"
# Artillery, Armor, Motorized, Infantry, Skill, Lack of skill, Division stats (EG: Recon, Entrenchment, etc.), Personality.
# Tactic icons should be redesigned to be at glace clear which unit they are for, which phase the tactic is for, and the skill level of the tactic.

#### positional phase start ####

# attacking #

tactic_preliminary_bombardment = { # who knew you needed artillery to bombard an area?
	is_attacker = yes
	countered_by = tactic_counter_barrage
	trigger = {
		is_attacker = yes
		has_unit_type = artillery
		phase = no
	}
	active = yes
	base = {
		factor = 4
			modifier = {
			add = 2
			has_artillery_ratio > 0.25

		}
	}
		picture = attack
	#phase = long_range # changes phase to long-range combat
	attacker = 0.10
	defender = 0.05
	attacker_movement_speed = -0.75
	attacker_org_damage_modifier = -0.6
	defender_org_damage_modifier = -0.6

}
# attacking #

tactic_recon_in_force = { # Recon in force -> Infiltration tactics
	countered_by = tactic_entrenched_defense
	is_attacker = yes
	trigger = {
		is_attacker = yes
		custom_override_tooltip = {
			tooltip = {
				localization_key = trigger_recon_advantage_greater_than_tt
				num_recon = 1
			}
			recon_advantage > 1
		}
		phase = no
	}

	active = yes
	base = {
		factor = 2
}
	picture = attack
	attacker = 0.15
	defender = 0.05
	attacker_movement_speed = 0.75
	attacker_org_damage_modifier = 0.1
	}
# attacking #
tactic_urban_bombardment = { # when attacking vp that is > 5 points, or urban terrain

	is_attacker = yes
	countered_by = tactic_urban_concealment
	trigger = {
		is_attacker = yes
		is_fighting_in_terrain = urban
		phase = no
	}

	active = yes

		base =  {
		factor = 8
		modifier = {
			factor = 0
			NOT = { is_fighting_in_terrain = urban }
		}
	}
		picture = attack
	attacker = 0.05
	attacker_movement_speed = 0.50
	attacker_org_damage_modifier = -0.5
	defender_org_damage_modifier = -0.6
}
# attacking #
tactic_beach_assault = { # only triggers during amphibious assault

	is_attacker = yes
	trigger = {
		is_attacker = yes
		is_amphibious_invasion = yes
		phase = no
	}

	active = yes

	base = { factor = 8 }
	picture = attack

	attacker = 0.05
	defender = 0.10
	attacker_movement_speed = 0.50
	attacker_org_damage_modifier = -0.5
	defender_org_damage_modifier = -0.8
}
# attacking #
tactic_heavy_preliminary_bombardment = { # only triggers when enemy has dig-in and is guarunteed to have trench warfare tactics.

	is_attacker = yes
	trigger = {
		is_attacker = yes
		phase = trench_assault
	}

	active = yes
	base = { factor = 4
		modifier = {
			add = 2
			has_trait = artillery_officer
		}
		modifier = {
			add = 2
			has_trait = old_guard
		}
		modifier = {
			add = 2
			has_trait = fortress_buster
		}
		modifier = {
			add = 2
			has_trait = artillery_expert
		}
			modifier = {
			add = 2
			has_artillery_ratio > 0.25

		}
		modifier = {
			add = 2
			has_artillery_ratio > 0.35

		}
		picture = attack
	}
	attacker = 0.15
	attacker_movement_speed = -1
	attacker_org_damage_modifier = -0.5
	defender_org_damage_modifier = -0.5
	}
# attacking #
tactic_frontal_assault = { # only triggers during amphibious assault

	is_attacker = yes
	trigger = {
		is_attacker = yes
		phase = no
	}

	active = yes

	base = {
		factor = 2
}
	picture = attack
	attacker = 0.1
	defender = 0.1
	attacker_movement_speed = 0.25
	attacker_org_damage_modifier = -0.5
	defender_org_damage_modifier = -0.5

}
# attacking #
tactic_embankment_bombardment = { # only triggers during river crossing

	is_attacker = yes
	trigger = {
		is_attacker = yes
		has_combat_modifier = river_crossing
		phase = no
	}

	active = yes

	base = { factor = 8 }
	picture = attack

	attacker = 0.10
	defender = -0.10
	attacker_movement_speed = -1
	attacker_org_damage_modifier = -0.5
	defender_org_damage_modifier = -0.5
}
# attacking #
tactic_hindered_attack = { # only triggers during bad weather

	is_attacker = yes
	trigger = {
		is_attacker = yes
		OR = {
			is_fighting_in_weather = rain_heavy
			is_fighting_in_weather = snow
			is_fighting_in_weather = blizzard
			is_fighting_in_weather = mud
			is_fighting_in_weather = sandstorm
		}
		phase = no
	}

	active = yes

	base = {
		factor = 6
		}
	}

	picture = attack
	attacker = -0.10
	attacker_movement_speed = -0.75
	attacker_org_damage_modifier = -0.5
	defender_org_damage_modifier = -0.5}

# defending #

tactic_counter_barrage = { # counters all preliminary bombardment
	is_attacker = no
	countered_by = tactic_recon_in_force
	trigger = {
		is_attacker = no
		has_unit_type = artillery
		phase = no
	}
	active = yes
		base = {
		factor = 2
	}
	picture = defend

	attacker = 0.05
	defender = 0.10
	attacker_movement_speed = -0.75
	attacker_org_damage_modifier = -0.4
	defender_org_damage_modifier = -0.2}
# defending #

tactic_urban_concealment = {
	is_attacker = no
	trigger = {
		is_attacker = no
		is_fighting_in_terrain = urban
		phase = no
	}

	active = yes

	base = { factor = 4 }
	picture = defend
	defender = 0.1
	attacker_movement_speed = 0.50
	attacker_org_damage_modifier = -0.5
	defender_org_damage_modifier = -0.5
}
# defending #

tactic_defensive_posture = {
	is_attacker = no
	trigger = {
		is_attacker = no
		phase = no
	}

	active = yes

	base = { factor = 4 }
	picture = defend

	defender = 0.1
}
# defending #
tactic_entrenched_defense = {
	is_attacker = no
	trigger = {
		is_attacker = no
		dig_in > 0.14
		phase = no
	}

	active = yes

		base = {
		factor = 6
	}
	picture = defend

	defender = 0.15
	attacker_movement_speed = -0.75
	attacker_org_damage_modifier = -0.8
	defender_org_damage_modifier = -0.8
}
# defending #

tactic_hampered_defense = {
	is_attacker = no
	trigger = {
		is_attacker = no
		is_fighting_in_weather = {
		 rain_heavy snow blizzard blizzard mud
	}
		phase = no
	}

	active = yes

	base = { factor = 6
		}
	attacker = -0.10
	attacker_movement_speed = -0.75
	attacker_org_damage_modifier = -0.5
	defender_org_damage_modifier = -0.5
}