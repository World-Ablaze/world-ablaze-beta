# ============================================================================
# AI Research Needs Triggers for Tanks and Mechanized
# ============================================================================
# These triggers determine when the AI should prioritize researching tank/mech techs.
# They are based on strategic desire/config, NOT on whether equipment is already unlocked,
# to avoid circular logic (AI needs research to unlock, but needs unlock to research).
# ============================================================================

WA_AI_RESEARCH_needs_light_armor = {
	# AI wants to use armored divisions at all
	WA_AI_TEMPLATES_use_armor_templates = yes
}

WA_AI_RESEARCH_needs_medium_armor = {
	WA_AI_TEMPLATES_use_armor_templates = yes
	OR = {
		# Focused on medium armor
		WA_AI_CONFIG_DIVISIONS_focus_on_medium_armor = yes
		# Focused on heavy armor (often requires medium research path)
		WA_AI_CONFIG_DIVISIONS_focus_on_heavy_armor = yes
		# After 1941, all armor-using nations should research mediums
		date > 1941.1.1
	}
}

WA_AI_RESEARCH_needs_heavy_armor = {
	WA_AI_TEMPLATES_use_armor_templates = yes
	WA_AI_CONFIG_DIVISIONS_focus_on_heavy_armor = yes
}

WA_AI_RESEARCH_needs_modern_armor = {
	WA_AI_TEMPLATES_use_armor_templates = yes
	date > 1945.1.1
}

WA_AI_RESEARCH_needs_trucks = {
	always = yes
}

WA_AI_RESEARCH_needs_mechanized = {
	OR = {
		# Nations configured to use mechanized
		WA_AI_CONFIG_DIVISIONS_use_mechanized_divisions = yes
		# Nations focusing on medium/heavy armor should also get mechs for combined arms
		AND = {
			WA_AI_TEMPLATES_use_armor_templates = yes
			OR = {
				WA_AI_CONFIG_DIVISIONS_focus_on_medium_armor = yes
				WA_AI_CONFIG_DIVISIONS_focus_on_heavy_armor = yes
			}
		}
		# Late game, larger nations should research mechanized
		AND = {
			num_of_military_factories > 100
			date > 1941.1.1
		}
	}
}

# ============================================================================
# Tank Variants - Tank Destroyers, Self-Propelled Artillery, Self-Propelled AA
# ============================================================================

WA_AI_RESEARCH_needs_tank_destroyers = {
	# Nation uses armor templates and has tank destroyer tech tree
	WA_AI_TEMPLATES_use_armor_templates = yes
	WA_AI_CONFIG_DIVISIONS_use_tank_destroyers = yes
}

WA_AI_RESEARCH_needs_self_propelled_artillery = {
	# Nation uses armor templates and has SPG tech tree
	WA_AI_TEMPLATES_use_armor_templates = yes
	WA_AI_CONFIG_DIVISIONS_use_self_propelled_artillery = yes
}

WA_AI_RESEARCH_needs_self_propelled_aa = {
	# Nation uses armor templates and has SPAA tech tree
	WA_AI_TEMPLATES_use_armor_templates = yes
	WA_AI_CONFIG_DIVISIONS_use_self_propelled_aa = yes
}

# ============================================================================
# Armored Cars
# ============================================================================

WA_AI_RESEARCH_needs_armored_cars = {
	WA_AI_CONFIG_DIVISIONS_use_armored_cars = tes
}
