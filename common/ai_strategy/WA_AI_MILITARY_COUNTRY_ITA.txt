############################################################################################################
# WA Military V2 - ITA Division Placement Rules
############################################################################################################


ITA_switzerland = {
	allowed = {
		tag = ITA
		is_historical_focus_on = yes
	}
	enable = {
		country_exists = SWI
		NOT = {
			has_war_with = SWI
		}
		date < 1946.1.1
		has_government = fascism
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_unit_request
		tag = SWI
		value = -1000
	}

	ai_strategy = {
		type = ignore_claim
		id = "SWI"
		value = 1
	}
}

ITA_protect_home = {
	allowed = {
		tag = ITA
	}
	enable = {
		OR = {
			has_war = yes
			FRA = {
				has_war = yes
			}
			ENG = {
				has_war = yes
			}
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 1

		# italy
		states = {
			158
			162
			2
			856
		}

		ratio = 0.8

		area = italy

		subtract_invasions_from_need = no
	}

	ai_strategy = {
		type = put_unit_buffers

		order_id = 1

		# south_italy
		states = {
			117
			156
			115
			1032
		}

		ratio = 0.8

		area = south_italy

		subtract_invasions_from_need = no
	}

	ai_strategy = {
		type = put_unit_buffers

		order_id = 1

		# mediterranean
		states = {
			114
		}

		ratio = 0.1

		area = mediterranean

		subtract_invasions_from_need = no
	}

	ai_strategy = {
		type = put_unit_buffers

		order_id = 1

		# north_africa
		states = {
			448
			450
			451
		}

		ratio = 1.2

		area = north_africa

		subtract_invasions_from_need = no
	}

	ai_strategy = {
		type = put_unit_buffers

		order_id = 1

		# central_balkans
		states = {
			44
		}

		ratio = 0.1

		area = central_balkans

		subtract_invasions_from_need = no
	}

	ai_strategy = {
		type = put_unit_buffers

		order_id = 1

		# south_balkans
		states = {
			185
			186
			182
			164
		}

		ratio = 0.15

		area = south_balkans

		subtract_invasions_from_need = no
	}

	ai_strategy = {
		type = strike_force_home_base
		id = 218 # S med
	}
	ai_strategy = {
		type = strike_force_home_base
		id = 29 # C med
	}
	ai_strategy = {
		type = strike_force_home_base
		id = 373 #ligurian sea
	}
	ai_strategy = {
		type = strike_force_home_base
		id = 169 # Tyrrhenian sea
	}
}

ITA_ignore_the_turks = {
	allowed = {
		tag = ITA
	}
	enable = {
		country_exists = TUR
		NOT = {
			has_war_with = TUR
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = ignore
		id = "TUR"
		value = 1000
	}

	ai_strategy = {
		type = conquer
		id = "TUR"
		value = -1000
	}

	ai_strategy = {
		type = invade
		id = "TUR"
		value = -1000
	}

	ai_strategy = {
		type = front_unit_request
		tag = "TUR"
		value = -100
	}
}

ITA_dont_walk_into_austria_trap = {
	allowed = {
		tag = ITA
	}
	enable = {
		has_war_with = GER
		date < 1940.1.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_control
		strategic_region = 294
		ordertype = front
		execute_order = no
		manual_attack = no
	}
	ai_strategy = {
		type = front_control
		strategic_region = 7
		ordertype = front
		execute_order = no
		manual_attack = no
	}
}

ITA_war_with_greece = {
	allowed = {
		OR = {
			tag = ITA
			tag = GER
		}
	}
	enable = {
		has_completed_focus = ITA_war_with_greece
		country_exists = GRE
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = antagonize
		id = "GRE"
		value = 200
	}

	ai_strategy = {
		type = conquer
		id = "GRE"
		value = 100
	}

	ai_strategy = {
		type = declare_war
		id = "GRE"
		value = 2000
	}

	ai_strategy = {
		type = front_control
		tag = GRE
		ordertype = front
		execute_order = yes
	}

	ai_strategy = {
		type = front_unit_request

		strategic_region = 25
		value = 75
	}
}

ITA_careful_around_tunisia = {
	enable = {
		original_tag = ITA
		NOT = { is_in_faction_with = FRT }
		date < 1940.10.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_unit_request
		tag = FRT
		value = -50
	}
}

Axis_abandon_east_africa = {
	allowed = {
		OR = {
			tag = GER
			tag = HUN
			tag = ROM
			tag = HUN
			tag = ITA
		}
		is_historical_focus_on = yes
	}
	enable = {
		date < 1946.1.1
		country_exists = ITS
		OR = {
			GER = {
				has_completed_focus = GER_mol_rib_pact
			}
			has_war = yes
		}
	}
	abort = {
		OR = {
			ITA = { controls_state = 551 }
			GER = { controls_state = 551 }
			date > 1946.1.1
		}
	}

	ai_strategy = {
		type = dont_defend_ally_borders
		id = "ITS"
		value = 1000
	}
}

ITA_you_do_not_belong_in_the_east = {
	allowed = {
		tag = ITA
	}
	enable = {
		is_in_faction_with = GER
		is_faction_leader = no
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = dont_defend_ally_borders
		id = "ROM"
		value = 1000
	}
	ai_strategy = {
		type = dont_defend_ally_borders
		id = "HUN"
		value = 1000
	}
	ai_strategy = {
		type = dont_defend_ally_borders
		id = "SLO"
		value = 1000
	}
	ai_strategy = {
		type = dont_defend_ally_borders
		id = "BUL"
		value = 1000
	}
}

ITA_germany_can_handle_themselves = {
	allowed = {
		tag = ITA
	}
	enable = {
		is_in_faction_with = GER
		has_capitulated = no
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = dont_defend_ally_borders
		id = "GER"
		value = 1000
	}

	ai_strategy = {
		type = dont_defend_ally_borders
		id = "RBL"
		value = 1000
	}

	ai_strategy = {
		type = dont_defend_ally_borders
		id = "RUK"
		value = 1000
	}

	ai_strategy = {
		type = dont_defend_ally_borders
		id = "RKA"
		value = 1000
	}

	ai_strategy = {
		type = dont_defend_ally_borders
		id = "RSO"
		value = 1000
	}

	ai_strategy = {
		type = dont_defend_ally_borders
		id = "RPO"
		value = 1000
	}

	ai_strategy = {
		type = dont_defend_ally_borders
		id = "RNO"
		value = 1000
	}
}

ITA_war_in_east_africa = { #italy sends 25 divisions
	allowed = {
		tag = ITA
	}
	enable = {
		ITS = { is_subject_of = ITA }
		has_war_with = ENG
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = force_defend_ally_borders
		value = 5
		target = central_africa
	}

	#ai_strategy = {
	#	type = front_unit_request
	#	area = central_africa
	#	value = 25
	#}

	ai_strategy = {
		type = front_unit_request
		area = central_africa
		value = -75
	}

	ai_strategy = {
		type = area_priority
		id = central_africa
		value = 50
	}
}

ITA_war_against_ENG = {
	allowed = {
		tag = ITA
	}
	enable = {
		OR = {
			448 = { is_controlled_by = ITA }
			449 = { is_controlled_by = ITA }
			450 = { is_controlled_by = ITA }
			451 = { is_controlled_by = ITA }
			448 = { is_controlled_by = ITL }
			449 = { is_controlled_by = ITL }
			450 = { is_controlled_by = ITL }
			451 = { is_controlled_by = ITL }
		}
		NOT = { has_war_with = ETH }
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = area_priority
		id = north_africa
		value = 2000
	}

	ai_strategy = {
		type = strategic_air_importance
		id = 215
		value = 10000
	}

	ai_strategy = {
		type = strategic_air_importance
		id = 328
		value = 10000
	}

	ai_strategy = {
		type = strategic_air_importance
		id = 128
		value = 10000
	}

	ai_strategy = {
		type = force_defend_ally_borders
		value = 10
		target = north_africa
	}

	ai_strategy = {
		type = garrison
		value = -1000
	}
	ai_strategy = {
		type = garrison
		id = ITA
		value = -2000
	}
}

ITA_crush_ethiopia_1 = {
	allowed = {
		tag = ITA
	}
	enable = {
		has_war_with = ETH
		date < 1937.1.1
		OR = {
			AND = {
				has_game_rule = {
 					rule = ITA_ai_behavior
 					option = DEFAULT
 				}
			}
			AND = {
				has_game_rule = {
					rule = ITA_ai_behavior
					option = FASCIST_HISTORICAL
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_control
		tag = ETH
		ordertype = front
		execution_type = rush
		execute_order = yes
	}

	ai_strategy = {
		type = area_priority
		id = south_africa
		value = 500
	}

	ai_strategy = {
		type = area_priority
		id = central_africa
		value = 500
	}
}

ITA_crush_ethiopia_2 = {
	allowed = {
		tag = ITA
	}
	enable = {
		has_war_with = ETH
		date < 1938.1.1
		date > 1937.1.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_control
		tag = ETH
		ordertype = front
		execution_type = rush
		execute_order = yes
	}

	ai_strategy = {
		type = area_priority
		id = south_africa
		value = 500
	}

	ai_strategy = {
		type = area_priority
		id = central_africa
		value = 500
	}
}

ITA_struggle_in_ethiopia = {
	allowed = {
		tag = ITA
	}
	enable = {
		has_war_with = ETH
		date < 1936.05.16
		NOT = { has_full_control_of_state = 910 }
		OR = {
			AND = {
				has_game_rule = {
 					rule = ITA_ai_behavior
 					option = DEMOCRATIC
 				}
			}
			AND = {
				has_game_rule = {
					rule = ITA_ai_behavior
					option = MONARCHIST
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_control
		state = 910
		priority=2
		ordertype = front
		execution_type = rush
		execute_order = yes
	}

	ai_strategy = {
		type = front_control
		state = 909
		state = 271
		ordertype = front
		execution_type = careful
		execute_order = no
	}

	ai_strategy = {
		type = area_priority
		id = central_africa
		value = 500
	}
}

ITA_prolong_the_struggle_in_ethiopia = {
	allowed = {
		tag = ITA
	}
	enable = {
		has_war_with = ETH
		date < 1936.05.16
		has_full_control_of_state = 910
		OR = {
			AND = {
				has_game_rule = {
 					rule = ITA_ai_behavior
 					option = DEMOCRATIC
 				}
			}
			AND = {
				has_game_rule = {
					rule = ITA_ai_behavior
					option = MONARCHIST
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_control
		state = 910
		ordertype = front
		execute_order = no
	}

	ai_strategy = {
		type = front_control
		state = 909
		state = 271
		ordertype = front
		execute_order = no
	}

	ai_strategy = {
		type = area_priority
		id = central_africa
		value = 500
	}
}

ITA_end_the_struggle_in_ethiopia = {
	allowed = {
		tag = ITA
	}
	enable = {
		has_war_with = ETH
		date > 1936.05.17
		OR = {
			AND = {
				has_game_rule = {
 					rule = ITA_ai_behavior
 					option = DEMOCRATIC
 				}
			}
			AND = {
				has_game_rule = {
					rule = ITA_ai_behavior
					option = MONARCHIST
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_control
		tag = ETH
		priority=5
		ratio=0.5
		ordertype = front
		execution_type = rush
		execute_order = yes
	}

	ai_strategy = {
		type = area_priority
		id = south_africa
		value = 500
	}

	ai_strategy = {
		type = area_priority
		id = central_africa
		value = 500
	}
}

ITA_share_borders_with_GER_against_SOV = {
	allowed = {
		tag = ITA
	}
	enable = {
		is_in_faction_with = GER
		has_war_with = SOV
	}

	abort_when_not_enabled = yes
	ai_strategy = {
		type = force_defend_ally_borders
		id = "CRO"
		value = 100
	}
	ai_strategy = {
		type = force_defend_ally_borders
		id = "ROM"
		value = 100
	}
	ai_strategy = {
		type = force_defend_ally_borders
		id = "HUN"
		value = 100
	}
	ai_strategy = {
		type = force_defend_ally_borders
		id = "SLO"
		value = 100
	}
	ai_strategy = {
		type = dont_defend_ally_borders
		id = "GER"
		value = 100
	}
	ai_strategy = {
		type = dont_defend_ally_borders
		id = "FIN"
		value = 100
	}
}
