WA_default_ground_production_strategy = {
	allowed = {
		is_major = yes
	}
	enable = {
		always = yes
	}

	ai_strategy = {
		type = equipment_production_factor
		id = infantry
		value = 40
	}

	ai_strategy = {
		type = equipment_production_factor
		id = artillery
		value = 25
	}
}

WA_default_ground_production_strategy_minor = {
	allowed = {
		is_major = no
	}
	enable = {
		always = yes
	}

	ai_strategy = {
		type = role_ratio
		id = armor
		value = -20
	}

	#ai_strategy = {
	#	type = equipment_variant_production_factor
	#	id = light_tank_chassis
	#	value = -100
	#}
}

WA_default_ground_production_strategy_major = {
	allowed = {
		is_major = yes
	}
	enable = {
		is_major = yes
		NOT = {
			tag = CHI
		}
	}
	abort_when_not_enabled = yes

	#ai_strategy = {
	#	type = equipment_variant_production_factor
	#	id = super_heavy_tank_chassis
	#	value = -100
	#}

	ai_strategy = {
		type = equipment_production_min_factories
		id = artillery
		value = 1
	}
	#ai_strategy = {
	#	type = equipment_production_min_factories
	#	id = anti_air
	#	value = 1
	#}
	ai_strategy = {
		type = equipment_production_min_factories
		id = anti_tank
		value = 3
	}
	#ai_strategy = {
	#	type = equipment_production_min_factories
	#	id = train
	#	value = 1
	#}

	# So the ai is more flexible
	ai_strategy = {
		type = equipment_stockpile_surplus_ratio
		value = -25
	}
}

SOV_stop_upgrading_guns_too_early_fix = { #####This will force the AI to keep 1 factory on guns at all times to stop it from overriding the production_upgrade_desire_offset strategies
	allowed = {
		tag = SOV
	}
	enable = {
		always = yes
	}

	ai_strategy = {
		type = equipment_production_min_factories
		id = infantry
		value = 1
	}
}

FRA_stop_upgrading_guns_too_early_fix = { #####This will force the AI to keep 1 factory on guns at all times to stop it from overriding the production_upgrade_desire_offset strategies
	allowed = {
		tag = FRA
	}
	enable = {
		always = yes
	}

	ai_strategy = {
		type = equipment_production_min_factories
		id = infantry
		value = 1
	}
	
	ai_strategy = {
		type = equipment_production_min_factories
		id = artillery
		value = 1
	}
}

#WA_default_infantry_equipment_spam_strategy = {
#	allowed = {
#		is_major = yes
#	}
#	enable = {
#		has_equipment = { infantry_equipment > 99999 }
#		has_equipment = { heavy_infantry_equipment > 99999 }
#	}
#	abort_when_not_enabled = yes
#	ai_strategy = {
#		type = equipment_production_factor
#		id = infantry
#		value = -100
#	}
#}
#
#WA_default_support_equipment_spam_strategy = {
#	allowed = {
#		is_major = yes
#	}
#	enable = {
#		has_equipment = { support_equipment > 39999 }
#	}
#	abort_when_not_enabled = yes
#
#	ai_strategy = {
#		type = equipment_variant_production_factor
#		id = support_equipment
#		value = -100
#	}
#}

### FRANCE

WA_FRA_ground_production_strategy_default = {
	allowed = {
		original_tag = FRA
	}
	enable = {
		always = yes
	}

	ai_strategy = {
		type = equipment_production_factor
		id = infantry
		value = 35
	}

	ai_strategy = {
		type = equipment_production_factor
		id = artillery
		value = 30
	}

	ai_strategy = {
		type = equipment_production_factor
		id = armor
		value = 15
	}
}

WA_FRA_ground_production_strategy_early  = {
	allowed = {
		original_tag = FRA
	}
	enable = {
		has_war = no
		date < 1940.1.1
	}

	abort_when_not_enabled = yes

	# Reserves are enough for France
	ai_strategy = {
		type = build_army
		id = infantry
		value = -1
	}
	ai_strategy = {
		type = build_army
		id = armor
		value = -1
	}
}

WA_FRA_ground_production_strategy_late = {
	allowed = {
		original_tag = FRA
	}
	enable = {
		num_of_military_factories > 109
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = armor
		value = 22
	}

	ai_strategy = {
		type = role_ratio
		id = heavy_armor
		value = 5
	}
}

### ITALY

WA_ITA_ground_production_strategy_default = {
	allowed = {
		original_tag = ITA
	}
	enable = {
		always = yes
	}

	ai_strategy = {
		type = equipment_production_factor
		id = infantry
		value = 35
	}

	ai_strategy = {
		type = equipment_production_factor
		id = artillery
		value = 30
	}

	ai_strategy = {
		type = equipment_production_factor
		id = armor
		value = 10
	}
}

### JAPAN

WA_JAP_ground_production_strategy_default = {
	allowed = {
		original_tag = JAP
	}
	enable = {
		always = yes
	}

	#ai_strategy = {
	#	type = equipment_variant_production_factor
	#	id = motorized_equipment
	#	value = -25
	#}
	#ai_strategy = {
	#	type = equipment_variant_production_factor
	#	id = infantry_equipment
	#	value = 25
	#}
	#
	#ai_strategy = {
	#	type = equipment_variant_production_factor
	#	id = heavy_infantry_equipment
	#	value = 25
	#}
}

#WA_JAP_ground_production_strategy_late = {
#	allowed = {
#		original_tag = JAP
#	}
#	enable = {
#		num_of_military_factories > 149
#	}
#	abort_when_not_enabled = yes
#
#	ai_strategy = {
#		type = role_ratio
#		id = infantry
#		value = -5
#	}
#
#	ai_strategy = {
#		type = role_ratio
#		id = armor
#		value = 5
#	}
#
#   ai_strategy = {
#		type = equipment_production_min_factories
#		id = armor
#		value = 3
#	}
#}

### GERMANY

WA_GER_ground_production_strategy_default = {
	allowed = {
		original_tag = GER
	}
	enable = {
		always = yes
	}

	#ai_strategy = {
	#	type = equipment_variant_production_factor
	#	id = light_tank_chassis
	#	value = -90
	#}

	#ai_strategy = {
	#	type = equipment_variant_production_factor
	#	id = medium_tank_chassis
	#	value = 100
	#}

	#ai_strategy = {
	#	type = equipment_variant_production_factor
	#	id = medium_tank_support_chassis
	#	value = 100
	#}

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -20
	}

	ai_strategy = {
		type = role_ratio
		id = armor
		value = 20
	}
}

#WA_GER_ground_production_strategy_early = {
#	allowed = {
#		original_tag = GER
#	}
#	enable = {
#		date < 1939.1.1
#	}
#	abort_when_not_enabled = yes
#
#	ai_strategy = {
#		type = build_army
#		id = armor
#		value = -1
#	}
#
#	ai_strategy = {
#		type = build_army
#		id = heavy_armor
#		value = -1
#	}
#	
#	ai_strategy = {
#		type = build_army
#		id = light_armor
#		value = -1
#	}
#}

#WA_GER_ground_production_strategy_late = {
#	allowed = {
#		original_tag = GER
#	}
#	enable = {
#		num_of_military_factories > 349
#	}
#	abort_when_not_enabled = yes
#
#	ai_strategy = {
#		type = equipment_variant_production_factor
#		id = infantry_equipment
#		value = -50 #-75
#	}
#
#	ai_strategy = {
#		type = equipment_variant_production_factor
#		id = heavy_infantry_equipment
#		value = -50 #-75
#	}
#
#	ai_strategy = {
#		type = equipment_variant_production_factor
#		id = support_equipment
#		value = -50
#	}
#
#	ai_strategy = {
#		type = equipment_variant_production_factor
#		id = artillery_equipment
#		value = -15
#	}
#
#	ai_strategy = {
#		type = equipment_variant_production_factor
#		id = anti_tank_equipment
#		value = 25
#	}
#}

GER_stockpile_weapons = {
	allowed = {
		tag = GER
	}
	enable = {
		date > 1939.1.1
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = equipment_production_min_factories
		id = infantry
		value = 25
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = artillery
		value = 5
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = anti_tank
		value = 20
	}
}

AI_stopspammingtrains = {
	allowed = {
		OR = {
			original_tag = GER
			original_tag = USA
			original_tag = SOV
		}
	}
	enable = {
		date > 1940.1.1
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = equipment_variant_production_factor
		id = train_equipment
		value = -85
	}
}

AI_FRA_stopspammingtrains = {
	allowed = {
		original_tag = FRA
	}
	enable = {
		date > 1936.1.1
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = equipment_variant_production_factor
		id = train_equipment
		value = -75
	}
}

### SOVIET UNION

WA_SOV_ground_production_strategy_guns = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		NOT = {
			AND = {
				has_equipment = { support_equipment > 25000 }
				has_equipment = { infantry_equipment > 30000 }
				has_equipment = { heavy_infantry_equipment > 20000 }
			}
		}
	}
	
	abort_when_not_enabled = yes

	ai_strategy = {
		type = equipment_production_factor
		id = infantry
		value = 15
	}
	
	ai_strategy = {
		type = equipment_production_min_factories
		id = infantry
		value = 25
	}
}

WA_SOV_ground_production_strategy_default = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		always = yes
	}

	ai_strategy = {
		type = equipment_production_factor
		id = anti_tank
		value = 10
	}

	ai_strategy = {
		type = equipment_production_factor
		id = artillery
		value = 40
	}

	ai_strategy = {
		type = equipment_production_factor
		id = mechanized
		value = 15
	}

	ai_strategy = {
		type = equipment_production_factor
		id = armor
		value = 15
	}
	
	ai_strategy = {
		type = equipment_variant_production_factor
		id = scout_car_equipment
		value = -100
	}
	
	#ai_strategy = {
	#	type = equipment_variant_production_factor
	#	id = armored_car_equipment
	#	value = -100
	#}
}

WA_SOV_ground_production_strategy_late = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		NOT = {
			AND = {
				OR = {
					has_tech = sov_modern_tank_chassis_1
					has_tech = sov_modern_1
				}
				has_tech = sov_modern_tank_td_1
			}
		}
		date > 1942.1.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = equipment_production_factor
		id = artillery
		value = 25
	}
	
	ai_strategy = {
		type = equipment_production_factor
		id = anti_tank
		value = 60
	}
	
	ai_strategy = {
		type = equipment_production_factor
		id = infantry
		value = 25
	}

	ai_strategy = {
		type = equipment_variant_production_factor
		id = infantry_equipment
		value = 20
	}

	ai_strategy = {
		type = equipment_variant_production_factor
		id = light_tank_artillery_chassis
		value = -100
	}

	ai_strategy = {
		type = equipment_variant_production_factor
		id = anti_air_equipment
		value = -25
	}

	ai_strategy = {
		type = equipment_stockpile_surplus_ratio
		value = -250
	}

	ai_strategy = {
		type = equipment_variant_production_factor
		id = heavy_anti_tank_equipment
		value = 25
	}
	
	ai_strategy = {
		type = equipment_variant_production_factor
		id = medium_tank_destroyer_chassis
		value = 25
	}
	
	ai_strategy = {
		type = equipment_variant_production_factor
		id = medium_tank_infantry_support_chassis
		value = 20
	}
	
	ai_strategy = {
		type = equipment_variant_production_factor
		id = medium_tank_assault_chassis
		value = 20
	}
}

WA_SOV_ground_production_strategy_very_late_1 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		has_tech = sov_modern_tank_td_1
		OR = {
			has_tech = sov_modern_tank_chassis_1
			has_tech = sov_modern_1
		}
		date > 1942.1.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = armor
		value = 30
	}

	ai_strategy = {
		type = equipment_production_factor
		id = armor
		value = 40
	}
	
	ai_strategy = {
		type = equipment_variant_production_factor
		id = modern_tank_destroyer_chassis
		value = 30
	}
	
	ai_strategy = {
		type = equipment_variant_production_factor
		id = heavy_tank_assault_chassis
		value = 30
	}
	
	ai_strategy = {
		type = equipment_variant_production_factor
		id = heavy_tank_destroyer_chassis
		value = 30
	}

	ai_strategy = {
		type = equipment_variant_production_factor
		id = anti_air_equipment
		value = -25
	}

	ai_strategy = {
		type = equipment_stockpile_surplus_ratio
		value = -250
	}

	ai_strategy = {
		type = role_ratio
		id = heavy_armor
		value = 14
	}

	ai_strategy = {
		type = role_ratio
		id = motorized
		value = 15
	}

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -15
	}

	ai_strategy = {
		type = equipment_production_min_factories
		id = armor
		value = 1
	}

	ai_strategy = {
		type = equipment_variant_production_factor
		id = light_tank_artillery_chassis
		value = -100
	}
	
	ai_strategy = {
		type = equipment_production_factor
		id = artillery
		value = 30
	}
	
	ai_strategy = {
		type = equipment_production_factor
		id = anti_tank
		value = 50
	}
	
	ai_strategy = {
		type = equipment_variant_production_factor
		id = heavy_anti_tank_equipment
		value = 75
	}
}

WA_SOV_ground_production_strategy_very_late_2 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		date > 1943.6.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = motorized
		value = 10
	}

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = -10
	}
	
	ai_strategy = {
		type = building_target
		id = steel_refinery
		value = 10
	}
}

WA_SOV_you_need_aa = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		date < 1942.1.1
	}
	abort_when_not_enabled = yes
	
	ai_strategy = {
		type = equipment_production_min_factories
		id = anti_air
		value = 1
	}
}

#Soviets have been defeated
SOV_produce_more_mbts = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		has_global_flag = soviet_union_defeated
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = equipment_production_factor
		id = armor
		value = 150
	}

	#ai_strategy = {
	#	type = equipment_variant_production_factor
	#	id = infantry_equipment
	#	value = -100
	#}

	#ai_strategy = {
	#	type = equipment_variant_production_factor
	#	id = support_equipment
	#	value = -100
	#}
}

### UK

WA_ENG_ground_production_strategy_default = {
	allowed = {
		original_tag = ENG
	}
	enable = {
		always = yes
	}

	ai_strategy = {
		type = build_army
		id = mountaineers
		value = -1
	}

#	ai_strategy = {
#		type = equipment_variant_production_factor
#		id = armoured_car_equipment
#		value = -96
#	}
#
#	ai_strategy = {
#		type = equipment_variant_production_factor
#		id = scout_car_equipment
#		value = -96
#	}
#
#	ai_strategy = {
#		type = equipment_variant_production_factor
#		id = light_tank_chassis
#	motorized_template_eng	value = -100
#	}

	ai_strategy = {
		type = equipment_production_factor
		id = infantry
		value = 30
	}

	ai_strategy = {
		type = equipment_production_factor
		id = artillery
		value = 30
	}

	ai_strategy = {
		type = equipment_production_factor
		id = armor
		value = 10
	}
}

WA_ENG_ground_production_strategy_late = {
	allowed = {
		original_tag = ENG
	}
	enable = {
		date > 1942.6.1
	}
	abort_when_not_enabled = yes


	ai_strategy = {
		type = equipment_production_min_factories
		id = armor
		value = 1
	}
	
	ai_strategy = {
		type = equipment_production_min_factories
		id = artillery
		value = 5
	}
	
	ai_strategy = {
		type = equipment_production_min_factories
		id = anti_tank
		value = 4
	}
	
	ai_strategy = {
		type = equipment_production_min_factories
		id = mechanized
		value = 3
	}
}

default_army_size_eng_mech = {
	allowed = {
		tag = ENG
	}
	enable = {
		if = {
			limit = {
				date < 1943.1.1
			}
			has_army_size = {
				size > 9
				type = mechanized
			}
		}
		if = {
			limit = {
				date > 1943.1.1
			}
			has_army_size = {
				size > 11
				type = mechanized
			}
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = mechanized
		value = -1
	}
	
	ai_strategy = {
		type = build_army
		id = motorized
		value = -1
	}
}

default_army_size_eng_tanks = {
	allowed = {
		tag = ENG
	}
	enable = {
		if = {
			limit = {
				date < 1941.1.1
			}
			has_army_size = {
				size > 5
				type = armor
			}
		}
		if = {
			limit = {
				date > 1941.1.1
				date < 1942.1.1
			}
			has_army_size = {
				size > 7
				type = armor
			}
		}
		if = {
			limit = {
				date > 1942.1.1
				date < 1943.1.1
			}
			has_army_size = {
				size > 9
				type = armor
			}
		}
		if = {
			limit = {
				date > 1943.1.1
				date < 1944.1.1
			}
			has_army_size = {
				size > 11
				type = armor
			}
		}
		if = {
			limit = {
				date > 1944.1.1
				date < 1945.1.1
			}
			has_army_size = {
				size > 13
				type = armor
			}
		}
		if = {
			limit = {
				date > 1945.1.1
			}
			has_army_size = {
				size > 14
				type = armor
			}
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = armor
		value = -1
	}
	ai_strategy = {
		type = build_army
		id = heavy_armor
		value = -1
	}
	ai_strategy = {
		type = build_army
		id = light_armor
		value = -1
	}
}

WA_ENG_lend_lease_production = {
	allowed = {
		original_tag = ENG
	}
	enable = {
		126 = {
			CONTROLLER = {
				tag = ENG
			}
		}
		NOT = {
			OR = {
				has_equipment = { support_equipment > 75000 }
				has_equipment = { infantry_equipment > 75000 }
			}
		}
		NOT = {
			has_war_with = SOV
		}
		num_of_military_factories > 199
		SOV = { has_war_with = GER }
		date > 1941.1.1
		
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = equipment_production_min_factories
		id = infantry
		value = 10
	}
}

WA_CAN_lend_lease_production = {
	allowed = {
		tag = CAN
	}
	enable = {
		126 = {
			CONTROLLER = {
				tag = ENG
			}
		}
		NOT = {
			OR = {
				has_equipment = { support_equipment > 75000 }
				has_equipment = { infantry_equipment > 75000 }
			}
		}
		NOT = {
			has_war_with = SOV
		}
		SOV = { has_war_with = GER }
		
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = equipment_production_min_factories
		id = infantry
		value = 10
	}
}

### USA

WA_USA_ground_production_strategy_default = {
	allowed = {
		original_tag = USA
	}
	enable = {
		always = yes
	}

	ai_strategy = {
		type = build_army
		id = mountaineers
		value = -1
	}

	ai_strategy = {
		type = equipment_production_factor
		id = infantry
		value = 30 #30 to 50
	}

	ai_strategy = {
		type = equipment_production_factor
		id = artillery
		value = 25 #20 to 40
	}

	#ai_strategy = {
	#	type = equipment_production_factor
	#	id = armor
	#	value = 30
	#}
}

WA_USA_ground_production_strategy_mid = {
	allowed = {
		original_tag = USA
	}
	enable = {
		num_of_military_factories > 159
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = armor
		value = 25
	}

	ai_strategy = {
		type = role_ratio
		id = light_armor
		value = -50
	}

	ai_strategy = {
		type = role_ratio
		id = heavy_armor
		value = 4
	}

	ai_strategy = {
		type = build_army
		id = garrison
		value = -1
	}
}

WA_USA_ground_production_strategy_late = {
	allowed = {
		original_tag = USA
	}
	enable = {
		num_of_military_factories > 159
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = equipment_production_min_factories
		id = motorized
		value = 15
	}
	#ai_strategy = {
	#	type = equipment_production_min_factories
	#	id = armor
	#	value = 5
	#}
}

WA_USA_ground_production_strategy_very_late = {
	allowed = {
		original_tag = USA
	}
	enable = {
		num_of_military_factories > 999
	}
	abort_when_not_enabled = yes


	ai_strategy = {
		type = equipment_variant_production_factor
		id = modern_tank_chassis
		value = 25
	}
}

default_army_size_usa_tanks = {
	allowed = {
		original_tag = USA
	}
	enable = {
		if = {
			limit = {
				NOT = {
					has_template = "US Modern Tank Division"
				}
			}
			has_army_size = {
				size > 34
				type = armor
			}
		}
		if = {
			limit = {
				has_template = "US Modern Tank Division"
			}
			has_army_size = {
				size > 59
				type = armor
			}
		}
	}

	abort_when_not_enabled = yes


	ai_strategy = {
		type = build_army
		id = light_armor
		value = -1
	}
	ai_strategy = {
		type = build_army
		id = armor
		value = -1
	}
	ai_strategy = {
		type = build_army
		id = heavy_armor
		value = -1
	}
}

WA_USA_lend_lease_production_early = {
	allowed = {
		original_tag = USA
	}
	enable = {
		NOT = {
			AND = {
				has_equipment = { support_equipment > 300000 }
				has_equipment = { infantry_equipment > 300000 }
			}
		}
		NOT = {
			has_war_with = SOV
		}
		num_of_military_factories > 199
		num_of_military_factories < 480
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = equipment_production_min_factories
		id = artillery
		value = 10
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = anti_tank
		value = 8
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = infantry
		value = 25
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = anti_air
		value = 3
	}
}

WA_USA_lend_lease_production = {
	allowed = {
		original_tag = USA
	}
	enable = {
		NOT = {
			AND = {
				has_equipment = { support_equipment > 300000 }
				has_equipment = { infantry_equipment > 300000 }
			}
		}
		NOT = {
			has_war_with = SOV
		}
		num_of_military_factories > 479
		NOT = {
			AND = {
				date > 1944.1.1
				OR = {
					6 = { CONTROLLER = { is_in_faction_with = ROOT } }
					29 = { CONTROLLER = { is_in_faction_with = ROOT } }
					785 = { CONTROLLER = { is_in_faction_with = ROOT } }
					15 = { CONTROLLER = { is_in_faction_with = ROOT } }
					14 = { CONTROLLER = { is_in_faction_with = ROOT } }
					30 = { CONTROLLER = { is_in_faction_with = ROOT } }
					23 = { CONTROLLER = { is_in_faction_with = ROOT } }
					19 = { CONTROLLER = { is_in_faction_with = ROOT } }
					1016 = { CONTROLLER = { is_in_faction_with = ROOT } }
				}
			}
		}
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = equipment_variant_production_factor
		id = heavy_infantry_equipment
		value = 100
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = support_equipment
		value = 125
	}
	ai_strategy = {
		type = equipment_variant_production_factor
		id = infantry_equipment
		value = 125
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = mechanized
		value = 10
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = anti_tank
		value = 45
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = artillery
		value = 35
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = anti_air
		value = 3
	}
}

USA_stockpile_more_for_lend_lease = {
	allowed = {
		tag = USA
	}

	enable = {
		NOT = {
			OR = {
				has_equipment = { support_equipment > 300000 }
				has_equipment = { infantry_equipment > 300000 }
			}
		}
		OR = {
			AND = {
				SOV = {
					has_war_with = GER
					NOT = { has_war_with = USA}
				}
			}
			AND = {
				ENG = {
					has_war_with = GER
					NOT = { has_war_with = USA}
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = equipment_stockpile_surplus_ratio
		value = 1000 #increase
	}
}


### CHI

WA_CHI_ground_production_strategy_default = {
	allowed = {
		original_tag = CHI
	}
	enable = {
		always = yes
	}

	ai_strategy = {
		type = build_army
		id = mountaineers
		value = -1
	}

	ai_strategy = {
		type = equipment_production_factor
		id = fighter
		value = 20
	}

	ai_strategy = {
		type = equipment_production_factor
		id = infantry
		value = 35
	}

	ai_strategy = {
		type = equipment_production_factor
		id = artillery
		value = 25
	}

	ai_strategy = {
		type = equipment_production_factor
		id = armor
		value = 0
	}

	ai_strategy = {
		type = ignore_army_incompetence
		value = 50
	}

    ai_strategy = {
		type = equipment_production_min_factories
		id = infantry
		value = 10
	}

	ai_strategy = {
		type = role_ratio
		id = armor
		value = 0
	}

#	ai_strategy = {
#		type = equipment_variant_production_factor
#		id = light_tank_chassis
#		value = -100
#	}
}

### CZE

WA_CZE_ground_production_strategy_default = {
	allowed = {
		original_tag = CZE
	}
	enable = {
		always = yes
	}
	ai_strategy = {
		type = equipment_production_factor
		id = infantry
		value = 20		#30 to 50
	}
	ai_strategy = {
		type = equipment_production_factor
		id = artillery
		value = 20		#20 to 40
	}
	ai_strategy = {
		type = equipment_production_factor
		id = armor
		value = 20
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = artillery
		value = 5
	}
}

##################### DEFAULT ARMY SIZES

default_army_size_usa = {
	allowed = {
		tag = USA
	}
	enable = {
		has_army_size = {
			size > 90
			type = infantry
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = infantry
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = mechanized
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = motorized
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = garrison
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = mountaineers
		value = -1
	}
}

default_army_size_jap = {
	allowed = {
		tag = JAP
	}
	enable = {
		has_army_size = {
			size > 170
			type = infantry
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = infantry
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = mechanized
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = motorized
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = garrison
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = mountaineers
		value = -1
	}
}

default_army_size_jap_tanks = {
	allowed = {
		tag = JAP
	}
	enable = {
		always = yes
	}

	abort_when_not_enabled = yes
	
	ai_strategy = {
		type = build_army
		id = light_armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = heavy_armor
		value = -1
	}
}

default_army_size_eng = {
	allowed = {
		tag = ENG
	}
	enable = {
		has_army_size = {
			size > 70
			type = infantry
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = infantry
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = garrison
		value = -1
	}
}

default_army_size_ita = {
	allowed = {
		tag = ITA
	}
	enable = {
		num_divisions > 104
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = infantry
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = motorized
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = garrison
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = mountaineers
		value = -1
	}
	
	ai_strategy = {
		type = build_army
		id = light_armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = heavy_armor
		value = -1
	}
}

default_army_size_ita_tanks = {
	allowed = {
		tag = ITA
	}
	enable = {
		date < 1943.1.1
		has_army_size = {
			size > 4
			type = armor
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = armor
		value = -1
	}
	ai_strategy = {
		type = build_army
		id = heavy_armor
		value = -1
	}
	ai_strategy = {
		type = build_army
		id = light_armor
		value = -1
	}
}

default_army_size_ger_cavalry = {
	allowed = {
		tag = GER
	}
	enable = {
		always = yes
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = cavalry
		value = -1
	}
	
	ai_strategy = {
		type = build_army
		id = garrison
		value = -1
	}
	
	ai_strategy = {
		type = build_army
		id = motorized
		value = -1
	}
}

default_army_size_ger = {
	allowed = {
		tag = GER
	}
	enable = {
		OR = {
			AND = {
				date < 1941.10.1
				has_army_size = {
					size > 100
					type = infantry
				}
				NOT = {
					surrender_progress > 0
				}
			}
			AND = {
				date > 1941.10.1
				has_army_size = {
					size > 160
					type = infantry
				}
				NOT = {
					surrender_progress > 0
				}
			}
			AND = {
				date > 1942.10.1
				has_army_size = {
					size > 170
					type = infantry
				}
				NOT = {
					surrender_progress > 0
				}
			}
			AND = {
				date > 1943.10.1
				has_army_size = {
					size > 175
					type = infantry
				}
				NOT = {
					surrender_progress > 0
				}
			}
			AND = {
				has_army_size = {
					size > 280
					type = infantry
				}
				surrender_progress > 0
			}
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = infantry
		value = -1
	}
}

default_army_size_ger_tanks = {
	allowed = {
		tag = GER
	}
	enable = {
		OR = {
			NOT = { 
				has_template = "German Medium Tank Division"
			}
			AND = {
				has_template = "German Medium Tank Division"
				NOT = { 
					has_template = "German Modern Tank Division"
				}
				has_army_size = {
					size > 24
					type = armor
				}
			}
			AND = {
				has_template = "German Medium Tank Division"
				has_template = "German Modern Tank Division"
				has_army_size = {
					size > 28
					type = armor
				}
			}
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = heavy_armor
		value = -1
	}
	
	ai_strategy = {
		type = build_army
		id = light_armor
		value = -1
	}
}

default_army_size_ger_special_forces = {
	allowed = {
		tag = GER
	}
	enable = {
		date < 1940.5.1
	}

	abort_when_not_enabled = yes
	
	ai_strategy = {
		type = build_army
		id = mountaineers
		value = -1
	}
}

default_army_size_ger_mech = {
	allowed = {
		tag = GER
	}
	enable = {
		has_army_size = {
			size > 5
			type = mechanized
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = mechanized
		value = -1
	}
}

default_army_size = {
	allowed = {
		NOT = {
			tag = SOV
			tag = CHI
			tag = USA
			tag = ENG
			tag = ITA
			tag = GER
			tag = ROM
			tag = HUN
			tag = JAP
		}
	}
	enable = {
		num_divisions > 249
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = infantry
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = mechanized
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = motorized
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = garrison
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = light_armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = heavy_armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = mountaineers
		value = -1
	}
}

default_army_size_axis_minors = {
	allowed = {
		OR = {
			tag = ROM
			tag = HUN
		}
	}
	enable = {
		num_divisions > 34
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = infantry
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = mechanized
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = motorized
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = garrison
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = light_armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = heavy_armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = mountaineers
		value = -1
	}
}

default_army_size_chi = {
	allowed = {
		tag = CHI
	}
	enable = {
		num_divisions > 349
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = infantry
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = garrison
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = mountaineers
		value = -1
	}
}

default_army_size_chi_2 = {
	allowed = {
		tag = CHI
	}
	enable = {
		always = yes
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = mechanized
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = motorized
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = light_armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = armor
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = heavy_armor
		value = -1
	}
}

default_army_size_sov = {
	allowed = {
		tag = SOV
	}
	enable = {
		OR = {
			AND = {
				num_divisions > 240
				has_army_size = {
					size > 220
					type = infantry
				}
				NOT = {
					has_country_flag = ai_barb_timer
				}
			}
			AND = {
				has_country_flag = ai_barb_timer
				GER = {
					is_ai = yes
				}
			}
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = infantry
		value = -1
	}

	ai_strategy = {
		type = build_army
		id = garrison
		value = -1
	}
}

default_army_size_sov_tank = {
	allowed = {
		tag = SOV
	}
	enable = {
		OR = {
			has_army_size = {
				size > 54
				type = armor
			}
			NOT = {
				has_template = "Soviet Medium Tank Division"
			}
			AND = {
				NOT = {
					has_war_with = GER
				}
				date < 1941.8.1
				has_army_size = {
					size > 23
					type = armor
				}
				has_template = "Soviet Medium Tank Division"
			}
			AND = {
				has_defensive_war_with = GER
				has_country_flag = ai_barb_timer
			}			
		}
	}

	abort_when_not_enabled = yes


	ai_strategy = {
		type = build_army
		id = light_armor
		value = -1
	}
	ai_strategy = {
		type = build_army
		id = armor
		value = -1
	}
	ai_strategy = {
		type = build_army
		id = heavy_armor
		value = -1
	}
}

default_army_size_sov_motorized = {
	allowed = {
		tag = SOV
	}
	enable = {
		always = yes
	}

	abort_when_not_enabled = yes


	ai_strategy = {
		type = build_army
		id = motorized
		value = -1
	}
	ai_strategy = {
		type = build_army
		id = mechanized
		value = -1
	}
}

SOV_enough_divisions_now_stockpile_and_tanks = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_army_manpower = { size > 4500000 }
		date < 1941.8.1
		NOT = {
			has_war_with_major = yes
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = build_army
		id = infantry
		value = -1
	}
	ai_strategy = {
		type = build_army
		id = garrison
		value = -1
	}
	ai_strategy = {
		type = equipment_stockpile_surplus_ratio
		value = 1000
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = infantry
		value = 35
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = armor
		value = 5
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = mechanized
		value = 3
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = artillery
		value = 15
	}
	ai_strategy = {
		type = equipment_production_min_factories
		id = anti_tank
		value = 10
	}
}
