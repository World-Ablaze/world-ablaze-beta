# befriend
# conquer
# antagonize
# build_ship
# build_army
# unit_ratio
# build_building
# research_tech
# garrison
# protect
# influence

SOV_unit_production = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		always = yes
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = role_ratio
		id = garrison
		value = 1
	}

	ai_strategy = {
		type = role_ratio
		id = paratroopers
		value = 0
	}

	ai_strategy = {
		type = role_ratio
		id = mountaineers
		value = 2
	}

	ai_strategy = {
		type = role_ratio
		id = marines
		value = 0
	}

	ai_strategy = {
		type = role_ratio
		id = cavalry
		value = -100
	}

	ai_strategy = {
		type = role_ratio
		id = motorized
		value = 10
	}

	ai_strategy = {
		type = role_ratio
		id = mechanized
		value = -10
	}

	ai_strategy = {
		type = role_ratio
		id = armor
		value = 18							#Komrade
	}

	ai_strategy = {
		type = role_ratio
		id = heavy_armor
		value = 6							#Komrade
	}

	ai_strategy = {
		type = role_ratio
		id = infantry
		value = 50 #because doctrine 80					#Komrade
	}

	# Naval unit factors
	ai_strategy = {
		type = unit_ratio
		id = capital_ship
		value = 1
	}
	ai_strategy = {
		type = unit_ratio
		id = carrier
		value = 1
	}
	ai_strategy = {
		type = unit_ratio
		id = submarine
		value = 30
	}

	ai_strategy = {
		type = unit_ratio
		id = screen_ship
		value = 20
	}

	ai_strategy = {
		type = unit_ratio
		id = convoy
		value = 40
	}
}

SOV_higher_armor_production = {
	allowed = {
		tag = SOV
	}
	enable = {
		date > 1944.1.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = building_target
		id = steel_refinery
		value = 50
	}
}

SOV_wtf_are_you_doing = {
	allowed = {
		tag = SOV
	}
	enable = {
		NOT = { is_in_faction_With = CZE }
		country_exists = CZE
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = pp_spend_priority
		id = relation
		value = -9999
	}

	ai_strategy = {
		type = alliance
		id = "CZE"
		value = -1000
	}
}

SOV_dont_meddle_in_others_affairs = {
	allowed = {
		tag = SOV
	}
	enable = {
		always = yes
	}
	abort = {
		always = no
	}

	ai_strategy = {
		type = diplo_action_desire
		id = IRQ
		target = guarantee
		value = -2000
	}

	ai_strategy = {
		type = diplo_action_desire
		id = ENG
		target = guarantee
		value = -2000
	}

	ai_strategy = {
		type = diplo_action_desire
		id = ENG
		target = military_access
		value = -5000
	}
}

SOV_convoy_fix = {
	allowed = {
		tag = SOV
	}
	enable = {
		NOT = {
			has_war_with = JAP
		}
	}
	abort_when_not_enabled = yes
	
	ai_strategy = {
		type = naval_avoid_region
		id = 79 ###Vladivostok
		value = 2000
	}
}

SOV_stop_spamming_pointless_lend_lease = {
	allowed = {
		tag = SOV
	}
	enable = {
		NOT = {
			has_global_flag = ww2_has_ended
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = send_lend_lease_desire
		id = "YUN"
		value = -1000
	}
	ai_strategy = {
		type = send_lend_lease_desire
		id = "SHX"
		value = -1000
	}
	ai_strategy = {
		type = send_lend_lease_desire
		id = "XSM"
		value = -1000
	}
	ai_strategy = {
		type = send_lend_lease_desire
		id = "SIK"
		value = -1000
	}
	ai_strategy = {
		type = send_lend_lease_desire
		id = "MON"
		value = -1000
	}
	ai_strategy = {
		type = send_lend_lease_desire
		id = "TAN"
		value = -1000
	}
}

SOV_japan_peace = {
	allowed = {
		tag = SOV
	}
	enable = {
		country_exists = JAP
		JAP = { has_completed_focus = JAP_non_aggression_pact_with_the_soviet_union }
	}
	abort = {
		SOV = { has_war_with = JAP }
	}

	ai_strategy = {
		type = befriend
		id = "JAP"
		value = 50
	}
}

SOV_spanish_diplomacy = {
	allowed = {
		tag = SOV
		has_dlc = "La Resistance"
	}
	enable = {
		country_exists = SPB
		has_war = no
		SPR_scw_in_progress = yes
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = diplo_action_desire
		id = SPB
		target = send_attache
		value = 1000
	}

	ai_strategy = {
		type = diplo_action_desire
		id = SPB
		target = send_volunteers_desire
		value = 1000
	}
}

SOV_dying_in_spain_was_enough = {
	allowed = {
		tag = SOV
	}
	enable = {
		date < 1941.6.1
		CHI = {
			has_war = yes
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = send_volunteers_desire
		id = CHI
		value = -500
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = PRC
		value = -500
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = HPC
		value = -500
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = SHA
		value = -500
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = NEA
		value = -500
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = SHX
		value = -500
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = YUN
		value = -500
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = GXC
		value = -500
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = GUC
		value = -500
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = XSM
		value = -500
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = SIC
		value = -500
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = XIK
		value = -500
	}
}

SOV_prepare_polish_invasion = {
	allowed = {
		tag = SOV
	}
	enable = {
		NOT = { POL = { is_in_faction_with = SOV } }
		NOT = { has_war_with = JAP }
		country_exists = POL
		date > 1939.1.1
#		OR = {
#			has_completed_focus = SOV_claims_on_poland
#			AND = {
#				has_global_flag = sov_yes_pact
#				NOT = { has_global_flag = mr_honored }
#			}
#			has_war_With = POL
#		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = conquer
		id = "POL"
		value = 200
	}
}

SOV_polish_invasion_time = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_war_with = POL
		NOT = { has_war_with = GER }
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = conquer
		id = "POL"
		value = 200
	}
	ai_strategy = {
		type = front_control
		area = west_russia
		ordertype = front
		execution_type = rush
		execute_order = yes
	}
}


SOV_claims_on_poland = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_claims_on_poland
		country_exists = POL
		date > 1940.10.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = antagonize
		id = "POL"
		value = 200
	}
}

SOV_southern_thrust = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_the_southern_thrust
		OR = {
			country_exists = IRQ
			country_exists = PER
			country_exists = AFG
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = antagonize
		id = "PER"
		value = 200
	}
	ai_strategy = {
		type = antagonize
		id = "AFG"
		value = 150
	}
	ai_strategy = {
		type = antagonize
		id = "IRQ"
		value = 100
	}
}

SOV_prepare_turkish_attack_group = {
	allowed = {
		tag = SOV
	}
	enable = {
		NOT = { TUR = { is_in_faction_with = SOV } }
		NOT = { has_war_with = JAP }
		NOT = { has_war_with = GER }
		country_exists = TUR
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = conquer
		id = "TUR"
		value = 100
	}
}

SOV_persia_backdoor = {
	allowed = {
		tag = SOV
	}
	enable = {
		NOT = { is_in_faction_with = PER }
		country_exists = PER
		NOT = { surrender_progress > 0.6 }
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = conquer
		id = "PER"
		value = 100
	}

	ai_strategy = {
		type = invade
		id = "PER"
		value = -500
	}
}

SOV_claims_on_turkey = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_demand_balkan_submission
		country_exists = TUR
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = antagonize
		id = "TUR"
		value = 200
	}
}

SOV_japan_ally = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_reconcile_japan
		country_exists = JAP
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = befriend
		id = "JAP"
		value = 200
	}
	ai_strategy = {
		type = alliance
		id = "JAP"
		value = 200
	}
}

SOV_germany_is_the_true_enemy = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_government = communism
		NOT = { GER = { has_government = communism } }
		NOT = {
			has_war_with = GER
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = alliance
		id = "GER"
		value = -5000
	}
	ai_strategy = {
		type = support
		id = "GER"
		value = -5000
	}
}

SOV_dont_take_baltic_claims_before_decisions = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_claims_in_baltic
		date < 1941.1.1
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = ignore_claim
		id = "EST"
		value = 1
	}

	ai_strategy = {
		type = ignore_claim
		id = "LAT"
		value = 1
	}

	ai_strategy = {
		type = ignore_claim
		id = "LIT"
		value = 1
	}
}

dont_take_romania_claims_before_decisions = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_claim_on_bessarabia
		date < 1941.1.1
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = ignore_claim
		id = "ROM"
		value = 1
	}
}

dont_take_finnish_claims_before_decisions = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_baltic_security
		date < 1941.1.1
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = ignore_claim
		id = "FIN"
		value = 1
	}
}

SOV_dont_take_finnish_claims_if_you_lose_winter_war = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_baltic_security
		has_country_flag = SOV_winter_war_time_passed
		NOT = { has_war_with = FIN }
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = ignore_claim
		id = "FIN"
		value = 1
	}

	ai_strategy = {
		type = declare_war
		id = "FIN"
		value = -2000
	}
}

SOV_claims_on_baltic_EST = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_claims_in_baltic
		has_country_flag = estonia_demand
		country_exists = EST
		date > 1941.1.1
	}
	abort = {
		NOT = {
			country_exists = EST
		}
	}

	ai_strategy = {
		type = antagonize
		id = "EST"
		value = 500
	}
}

SOV_claims_on_baltic_LAT = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_claims_in_baltic
		has_country_flag = latvia_demand
		country_exists = LAT
		date > 1941.1.1
	}
	abort = {
		NOT = {
			country_exists = LAT
		}
	}

	ai_strategy = {
		type = antagonize
		id = "LAT"
		value = 500
	}
}

SOV_claims_on_baltic_LIT = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_claims_in_baltic
		has_country_flag = lithuania_demand
		country_exists = LIT
		date > 1941.1.1
	}
	abort = {
		NOT = {
			country_exists = LIT
		}
	}

	ai_strategy = {
		type = antagonize
		id = "LIT"
		value = 500
	}
}

SOV_prepare_romanian_attack_group = {
	allowed = {
		tag = SOV
	}
	enable = {
		NOT = { ROM = { is_in_faction_with = SOV } }
		NOT = { has_war_with = JAP }
		country_exists = ROM
		NOT = {
			GER = { has_completed_focus = GER_prepare_barbarossa }
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = conquer
		id = "ROM"
		value = 200
	}
}

SOV_claims_on_romania = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_claim_on_bessarabia
		has_country_flag = bessarabia_demand
		country_exists = ROM
		date > 1941.1.1
	}
	abort = {
		NOT = {
			country_exists = ROM
		}
	}

	ai_strategy = {
		type = antagonize
		id = "ROM"
		value = 200
	}
}

SOV_claims_on_finland = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_claims_in_baltic
		country_exists = FIN
		has_country_flag = karjala_demand
		date > 1941.1.1
		date < 1943.1.1
		722 = { is_controlled_by = FIN }
		NOT = { country_exists = LAT }
		NOT = { country_exists = LIT }
		NOT = { country_exists = EST }
		NOT = { has_country_flag = SOV_winter_war_time_passed }
	}
	abort = {
		OR = {
			NOT = {
				country_exists = FIN
			}
			FIN = {
				has_government = ROOT
			}
			controls_state = 146 #Karelija
		}
	}

	ai_strategy = {
		type = antagonize
		id = "FIN"
		value = 500
	}

	ai_strategy = {
		type = declare_war
		id = "FIN"
		value = 2000
	}
}

SOV_prepare_war_with_finland = {
	allowed = {
		tag = SOV
	}
	enable = {
		country_exists = FIN
		NOT = { has_war_with = GER }
		NOT = { has_war_with = JAP }
		NOT = { has_war_with = FIN }
		OR = {
			has_completed_focus = SOV_secure_leningrad
			has_completed_focus = SOV_claims_in_baltic
			focus_progress = {
				focus = SOV_secure_leningrad
				progress > 0.1
			}
		}
		date < 1940.4.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_unit_request

		area = north_russia
		value = 500
	}
	ai_strategy = {
		type = front_unit_request

		area = karelia
		value = 500
	}
	ai_strategy = {
		type = front_unit_request

		area = finland
		value = 550
	}
	ai_strategy = {
		type = front_unit_request
		tag = FIN
		value = 500
	}
	ai_strategy = {
		type = front_unit_request
		strategic_region = 326
		value = 580
	}
	ai_strategy = {
		type = front_unit_request
		tag = PER
		value = -1000
	}
	ai_strategy = {
		type = front_unit_request
		tag = ROM
		value = -1000
	}
}

SOV_winter_war = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_war_with = FIN
		country_exists = FIN
		NOT = { has_war_with = GER }
		NOT = { has_war_with = JAP }
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_unit_request

		area = north_russia
		value = 50
	}
	ai_strategy = {
		type = front_unit_request

		area = karelia
		value = 25
	}
	ai_strategy = {
		type = front_unit_request

		area = finland
		value = 25
	}
	ai_strategy = {
		type = front_unit_request
		tag = FIN
		value = 10
	}
	ai_strategy = {
		type = front_unit_request
		strategic_region = 326
		value = 300
	}

	ai_strategy = {
		type = front_unit_request
		tag = PER
		value = -1000
	}

	ai_strategy = {
		type = front_unit_request
		tag = ROM
		value = -1000
	}

	ai_strategy = {
		type = conquer
		id = "FIN"
		value = 200
	}

	ai_strategy = {
		type = area_priority
		id = finland
		value = 1000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = north_russia
		value = 1000 #more focus here
	}

	ai_strategy = {
		type = invade
		id = "FIN"
		value = -500
	}

	ai_strategy = {
		type = front_control
		strategic_region = 12
		ordertype = front
		execution_type = balanced
		execute_order = yes
	}

	ai_strategy = {
		type = front_control
		strategic_region = 13
		ordertype = front
		execution_type = balanced
		execute_order = yes
	}

	ai_strategy = {
		type = front_control
		strategic_region = 274
		ordertype = front
		execution_type = balanced
		execute_order = yes
	}

	ai_strategy = {
		type = front_control
		strategic_region = 288
		ordertype = front
		execution_type = balanced
		execute_order = yes
	}

	ai_strategy = {
		type = front_control
		strategic_region = 326
		ordertype = front
		execution_type = rush
		execute_order = yes
	}

	ai_strategy = {
		type = front_unit_request
		tag = JAP
		value = -50
	}

	ai_strategy = {
		type = front_unit_request
		tag = MAN
		value = -50
	}
}

SOV_dont_justify_finland_after_whitepeace = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_secure_leningrad
		country_exists = FIN
		NOT = {
			has_war_with = FIN
			146 = { is_controlled_by = SOV }
		}
		has_country_flag = SOV_karjala_is_ours
		date < 1943.1.1
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = antagonize
		id = "FIN"
		value = -2000
	}
}

SOV_happy_with_finland = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_baltic_security
		country_exists = FIN
		NOT = { has_war_with = FIN }
		OR = {
			FIN = {
				has_government = ROOT
			}
			AND = {
				722 = { is_controlled_by = SOV }
				147 = { is_controlled_by = SOV }
				146 = { is_controlled_by = SOV }
			}
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = befriend
		id = "FIN"
		value = 100
	}
}

SOV_prepare_for_war_with_germany = {
	allowed = {
		tag = SOV
	}
	enable = {
		country_exists = GER
		has_completed_focus = SOV_policy_of_collective_security
		OR = {
			controls_state = 146
			GER = { has_completed_focus = GER_prepare_barbarossa }
		}
	}
	abort = {
		OR = {
			has_war_with = JAP
			has_war_with = CHI
		}
	}

	ai_strategy = {
		type = conquer
		id = "FIN"
		value = 100
	}

	ai_strategy = {
		type = conquer
		id = "GER"
		value = 2000
	}

	ai_strategy = {
		type = conquer
		id = "HUN"
		value = 2000
	}

	ai_strategy = {
		type = conquer
		id = "ROM"
		value = 1000
	}

	ai_strategy = {
		type = invade
		id = "GER"
		value = -500
	}

	ai_strategy = {
		type = invade
		id = "ROM"
		value = -500
	}

	ai_strategy = {
		type = area_priority
		id = north_russia
		value = 1000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = west_russia
		value = 2000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = south_russia
		value = 2000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = caucasus
		value = 2000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = germany
		value = 2000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = east_europe
		value = 2000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = north_balkans
		value = 1000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = south_balkans
		value = 1000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = central_balkans
		value = 1000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = east_russia
		value = -500 #less focus here
	}

	ai_strategy = {
		type = area_priority
		id = asia
		value = -500 #less focus here
	}

	ai_strategy = {
		type = area_priority
		id = north_china
		value = -2000
	}

	ai_strategy = {
		type = area_priority
		id = shanghai_china
		value = -2000
	}

	ai_strategy = {
		type = area_priority
		id = east_china
		value = -2000
	}

	ai_strategy = {
		type = area_priority
		id = south_china
		value = -2000
	}
}

SOV_war_with_germany = {
	allowed = {
		tag = SOV
	}
	enable = {
		OR = {
			has_war_with = GER
			has_civil_war = yes
			has_war_with = STA
		}
		NOT = {
			has_war_with = CHI
		}
		NOT = {
			has_war_with = JAP
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = conquer
		id = "GER"
		value = 5000
	}

	ai_strategy = {
		type = conquer
		id = "HUN"
		value = 2000
	}

	ai_strategy = {
		type = conquer
		id = "ROM"
		value = 1000
	}

	ai_strategy = {
		type = invade
		id = "ROM"
		value = -500
	}

	ai_strategy = {
		type = invade
		id = "GER"
		value = -500
	}

	ai_strategy = {
		type = area_priority
		id = north_russia
		value = 2000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = west_russia
		value = 2000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = south_russia
		value = 2000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = caucasus
		value = 2000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = germany
		value = 2000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = east_europe
		value = 2000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = north_balkans
		value = 1000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = south_balkans
		value = 1000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = central_balkans
		value = 1000 #more focus here
	}

	ai_strategy = {
		type = area_priority
		id = east_russia
		value = -500 #less focus here
	}

	ai_strategy = {
		type = area_priority
		id = asia
		value = -500 #less focus here
	}

	ai_strategy = {
		type = area_priority
		id = north_china
		value = -2000
	}

	ai_strategy = {
		type = area_priority
		id = shanghai_china
		value = -2000
	}

	ai_strategy = {
		type = area_priority
		id = east_china
		value = -2000
	}

	ai_strategy = {
		type = area_priority
		id = south_china
		value = -2000
	}

	ai_strategy = {
		type = front_unit_request
		tag = SIK
		value = -1000
	}

	ai_strategy = {
		type = front_armor_score
		id = "FIN"
		value = -1000
	}
	ai_strategy = {
		type = front_armor_score
		id = "GER"
		value = 100
	}
	ai_strategy = {
		type = front_armor_score
		id = "RBL"
		value = 100
	}
	ai_strategy = {
		type = front_armor_score
		id = "RUK"
		value = 100
	}
	#ai_strategy = {
	#	type = front_unit_request
	#
	#	area = karelia
	#	value = 35
	#}
	
	ai_strategy = {
		type = front_unit_request
		strategic_region = 13
		value = -10
	}

	ai_strategy = {
		type = front_unit_request
		strategic_region = 326
		value = -100
	}

	ai_strategy = {
		type = front_unit_request
		tag = TUR
		value = -1000
	}
	ai_strategy = {
		type = front_unit_request
		tag = PER
		value = -50
	}
	
	ai_strategy = {
		type = front_unit_request
		state = 146
		value = -50
	}
}

SOV_war_with_germany_2 = {
	allowed = {
		tag = SOV
	}
	enable = {
		OR = {
			has_war_with = GER
			has_civil_war = yes
			has_war_with = STA
		}
		NOT = {
			has_war_with = CHI
		}
		NOT = {
			has_war_with = JAP
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_unit_request

		area = germany
		value = 1000
	}

	ai_strategy = {
		type = front_unit_request

		area = east_europe
		value = 1000
	}

	ai_strategy = {
		type = front_unit_request

		area = north_russia
		value = 1000
	}

	ai_strategy = {
		type = front_unit_request

		area = west_russia
		value = 1000
	}

	ai_strategy = {
		type = front_unit_request

		area = south_russia
		value = 1000
	}

	ai_strategy = {
		type = front_unit_request

		area = caucasus
		value = 550
	}

	ai_strategy = {
		type = garrison
		value = -1000
	}

	ai_strategy = {
		type = garrison
		id = "SOV"
		value = -2000
	}
}

SOV_no_air_here = {
	allowed = {
		tag = SOV
	}
	enable = {
		always = yes
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = strategic_air_importance
		id = 339
		value = -500000 #value of stocked main front in active combat is usually around 35,000
	}
	ai_strategy = {
		type = strategic_air_importance
		id = 30
		value = -500000 #value of stocked main front in active combat is usually around 35,000
	}
}

SOV_abandon_odessa = {
	allowed = {
		tag = SOV
	}
	enable = {
		surrender_progress > 0.15
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_unit_request
		state = 192
		value = -1000
	}
}

SOV_abandon_crimea = {
	allowed = {
		tag = SOV
	}
	enable = {
		surrender_progress > 0.15
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_unit_request
		state = 137
		value = -1000
	}
}

SOV_tito_is_no_threat = {
	allowed = {
		tag = SOV
	}
	enable = {
		NOT = {
			is_in_faction_with = YUG
			has_war_with = YUG
		}
		has_war_with = GER
		YUG = {
			has_war_with = GER
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_unit_request
		tag = YUG
		value = -1000
	}
}

SOV_manchurian_border_is_a_hotzone = {
 	allowed = {
 		tag = SOV
 	}
 	enable = {
 		NOT = { is_in_faction_with = JAP }
 		NOT = { is_in_faction_with = MAN }
 	}
 	abort_when_not_enabled = yes

 	ai_strategy = {
 		type = conquer
 		id = "JAP"
 		value = 100
 	}
 	ai_strategy = {
 		type = conquer
 		id = "MAN"
 		value = 100
 	}
}

SOV_japan_tehran = {
	allowed = {
		tag = SOV
	}
	enable = {
		JAP = { has_war_with = USA }
		NOT = { has_war_with = FRA }
		NOT = { has_war_with = ENG }
		NOT = { has_war_with = USA }
		NOT = { has_war_with = GER }
		date > 1944.1.1
		NOT = { has_global_flag = soviet_union_defeated }
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = conquer
		id = "JAP"
		value = 500
	}

	ai_strategy = {
		type = conquer
		id = "MAN"
		value = 500
	}

	ai_strategy = {
		type = front_unit_request
		tag = JAP
		value = 500
	}

	ai_strategy = {
		type = front_unit_request
		tag = MAN
		value = 500
	}
}

SOV_japan_no_threat = {
	allowed = {
		tag = SOV
	}
	enable = {
		NOT = { has_war_with = JAP }
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_unit_request
		tag = MAN
		value = -500
	}
}


#germany has won, sit in the urals
SOV_sit_in_the_mountains = {
	allowed = {
		tag = SOV
	}
	enable = {
		NOT = { has_war_with = GER }
		NOT = { has_war_with = JAP }
		has_global_flag = soviet_union_defeated
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = conquer
		id = "RSO"
		value = 500
	}

	ai_strategy = {
		type = front_unit_request
		tag = RSO
		value = 600
	}
}

SOV_finland_wont_be_defended_in_time_if_you_use_eastern_troops = {
	allowed = {
		tag = SOV
	}

	enable = {
		NOT = { has_war_with = MAN }
		NOT = { has_war_with = JAP }
		GER = { has_completed_focus = GER_prepare_barbarossa }
		GER = { is_subject = no }
		GER = { has_government = fascism }
		country_exists = GER
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_unit_request
		tag = JAP
		value = -100
	}

	ai_strategy = {
		type = front_unit_request
		tag = MAN
		value = -100
	}
}

SOV_be_defensive = {
	allowed = {
		tag = SOV
	}

	enable = {
		has_war_with = GER
		surrender_progress > 0
		NOT = {
			AND = {
				date > 1941.11.1
				date < 1942.4.1
			}
		}
		date < 1942.9.1
		NOT = { GER = { surrender_progress > 0.2 } }
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_control
		country_trigger = {
			OR = {
				tag = GER
				is_in_faction_with = GER
			}
		}
		ordertype = front
		execution_type = balanced
		manual_attack = yes
	}
}

SOV_be_defensive_winter = {
	allowed = {
		tag = SOV
	}

	enable = {
		has_war_with = GER
		surrender_progress > 0
		AND = {
			date > 1941.11.1
			date < 1942.4.1
		}
		NOT = { GER = { surrender_progress > 0.2 } }
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_control
		country_trigger = {
			OR = {
				tag = GER
				is_in_faction_with = GER
			}
		}
		ordertype = front
		execution_type = careful
		manual_attack = yes
	}
}

SOV_dont_be_aggressive = {
	allowed = {
		tag = SOV
	}

	enable = {
		has_war_with = GER
		surrender_progress > 0
		date > 1942.9.1
		date < 1944.8.1
		NOT = { GER = { surrender_progress > 0.2 } }
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_control
		country_trigger = {
			OR = {
				tag = GER
				is_in_faction_with = GER
			}
		}
		ordertype = front
		execution_type = balanced
		manual_attack = yes
	}
}

SOV_bagration = {
	allowed = {
		tag = SOV
	}

	enable = {
		has_war_with = GER
		date > 1944.8.1
		date < 1945.1.1
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_control
		country_trigger = {
			OR = {
				tag = GER
				is_in_faction_with = GER
			}
		}
		ordertype = front
		execution_type = balanced
		manual_attack = yes
	}
}

SOV_spanish_civil_war = {
	allowed = {
		original_tag = SOV
		NOT = { has_dlc = "La Resistance" }
	}
	enable = {
		has_government = communism
		has_global_flag = spanish_civil_war
		NOT = { has_global_flag = scw_over }
	}

	abort = {
		OR = {
			SPR = { has_civil_war = no }
			has_global_flag = scw_over
		}
	}

	ai_strategy = {
		type = befriend
		id = "SPR"
		value = 100
	}
}

SOV_spanish_civil_war_resistance = {
	allowed = {
		original_tag = SOV
		has_dlc = "La Resistance"
	}
	enable = {
		has_government = communism
		country_exists = SPD
		has_global_flag = spanish_civil_war
		NOT = { has_global_flag = scw_over }
	}

	abort = {
		has_global_flag = scw_over
	}

	ai_strategy = {
		type = befriend
		id = "SPD"
		value = 100
	}
	ai_strategy = {
		type = support
		id = "SPD"
		value = 100
	}
	ai_strategy = {
		type = send_volunteers_desire
		id = "SPD"
		value = 100
	}
}

SOV_template_design_1 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		date < 1940.1.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = template_prio
		id = motorized
		value = 10
	}

	ai_strategy = {
		type = template_prio
		id = cavalry
		value = -100
	}

	ai_strategy = {
		type = template_prio
		id = light_armor
		value = 50
	}

	ai_strategy = {
		type = template_prio
		id = medium_armor
		value = -10
	}

	ai_strategy = {
		type = template_prio
		id = heavy_armor
		value = -50
	}

	ai_strategy = {
		type = template_prio
		id = paratroopers
		value = -50
	}

	ai_strategy = {
		type = template_prio
		id = infantry
		value = 50
	}
}

SOV_template_design_2 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		date > 1940.1.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = template_prio
		id = mechanized
		value = -50
	}

	ai_strategy = {
		type = template_prio
		id = cavalry
		value = -100
	}

	ai_strategy = {
		type = template_prio
		id = light_armor
		value = 10
	}

	ai_strategy = {
		type = template_prio
		id = medium_armor
		value = 50
	}

	ai_strategy = {
		type = template_prio
		id = modern_armor
		value = 60
	}

	ai_strategy = {
		type = template_prio
		id = heavy_armor
		value = 20
	}

	ai_strategy = {
		type = template_prio
		id = paratroopers
		value = -50
	}

	ai_strategy = {
		type = template_prio
		id = infantry
		value = 10
	}
}

SOV_save_xp_for_lessons_of_war = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		NOT = { has_completed_focus = SOV_lessons_of_war }
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = land_xp_spend_priority
		id = division_template
		value = 100
	}
}

SOV_pp_spending = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		has_manpower < 100000
		has_political_power < 200
	}
	abort = {
		OR = {
			has_manpower > 100000
			has_political_power > 200
			date > 1944.1.1
		}
	}

	ai_strategy = { # dont burn PP on admirals if you need manpower laws
		type = pp_spend_priority
		id = admiral
		value = -100
	}
}

SOV_poland_is_not_an_ally = {
	allowed = {
		tag = SOV
	}
	enable = {
		NOT = {
			POL = {
				has_government = ROOT
			}
		}
		country_exists = POL
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = alliance
		id = "POL"
		value = -5000
	}
}

SOV_play_nice_with_ribbentrop_pact = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_global_flag = sov_yes_pact
		NOT = { has_global_flag = mr_not_honored }
		GER = { has_war_with = POL }
		date < 1941.1.1
	}
	abort = {
		OR = {
			GER = { has_war_with = SOV }
			NOT = { GER = { has_war_with = POL } }
			date > 1941.1.1
		}
	}

	# respect the spirit of the law ;)
	ai_strategy = {
		type = send_volunteers_desire
		id = "POL"
		value = -100
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = "NOR"
		value = -100
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = "DEN"
		value = -100
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = "HOL"
		value = -100
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = "BEL"
		value = -100
	}

	ai_strategy = {
		type = send_volunteers_desire
		id = "LUX"
		value = -100
	}

	ai_strategy = {
		type = befriend
		id = "GER"
		value = 200
	}
}

SOV_ribbentrop_pact_broken = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_global_flag = mr_not_honored
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = antagonize
		id = "GER"
		value = 1000
	}
}

SOV_naval_role_ratios_historical = {
	allowed = {
		has_dlc = "Man the Guns"
		original_tag = SOV
	}

	enable = {
		always = yes
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = role_ratio
		id = naval_capital_bb
		value = -25
	}

	ai_strategy = {
		type = role_ratio
		id = naval_capital_bc
		value = -100
	}

	ai_strategy = {
		type = role_ratio
		id = naval_carrier
		value = -5
	}

	ai_strategy = {
		type = role_ratio
		id = naval_submarine
		value = 150
	}

	ai_strategy = {
		type = role_ratio
		id = naval_screen
		value = 150
	}

	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_light
		value = 15
	}

	ai_strategy = {
		type = role_ratio
		id = naval_cruiser_heavy
		value = -15
	}

	ai_strategy = {
		type = role_ratio
		id = naval_mine_sweeper
		value = 15
	}

	ai_strategy = {
		type = role_ratio
		id = naval_mine_layer
		value = 80
	}
}

SOV_history_dictates_our_low_prepardness = {
	allowed = {
		tag = SOV
		GER = { is_ai = yes } # against human we are better off just makin other stuff
	}
	enable = {
		date > 1937.1.1
		date < 1937.3.1
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = building_target
		id = fuel_silo
		value = 10
	}
}

############Soviet city garrisons, keep them separate to avoid shuffling
SOV_defense_of_donetsk = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		NOT = {
			has_offensive_war_with = GER
		}
		any_enemy_country = { controls_state = 202 }
		date < 1942.10.1
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 1

		# north_russia
		states = {
			227
		}

		ratio = 0.15

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalingrad = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress > 0.2
		date < 1942.10.1
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 2

		# north_russia
		states = {
			217
		}

		ratio = 0.15

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_kiev = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		NOT = {
			AND = {
				surrender_progress > 0.1
				has_game_rule = {
					rule = SOV_ai_behavior
					option = LEFT_OPPOSITION
				}
			}
		}
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 4

		# north_russia
		states = {
			202
		}

		ratio = 0.325

		subtract_invasions_from_need = no
		subtract_fronts_from_need = yes
	}
}

SOV_defense_of_minsk = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		NOT = {
			AND = {
				surrender_progress > 0.1
				has_game_rule = {
					rule = SOV_ai_behavior
					option = LEFT_OPPOSITION
				}
			}
		}
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 5

		# north_russia
		states = {
			206
		}

		ratio = 0.2

		subtract_invasions_from_need = no
		subtract_fronts_from_need = yes
	}
}

SOV_defense_of_leningrad = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		date < 1942.9.1
		NOT = {
			has_offensive_war_with = GER
		}
		OR = {
			AND = {
				has_war_with = FIN
				NOT = {
					has_war_with = GER
				}
			}
			surrender_progress > 0.02
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = garrison
		value = -25
	}

	ai_strategy = {
		type = put_unit_buffers

		order_id = 6

		# north_russia
		states = {
			195
		}

		ratio = 0.1

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_sevastapol = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		date < 1942.9.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = garrison
		value = -25
	}

	ai_strategy = {
		type = put_unit_buffers

		order_id = 7

		# south_russia
		states = {
			137
		}

		ratio = 0.075

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_rostov = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		NOT = {
			has_offensive_war_with = GER
		}
		any_enemy_country = { controls_state = 202 }
		date < 1942.10.1
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 8

		# south_russia
		states = {
			218
		}

		ratio = 0.1

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_zaporozhe = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		NOT = {
			AND = {
				surrender_progress > 0.1
				has_game_rule = {
					rule = SOV_ai_behavior
					option = LEFT_OPPOSITION
				}
			}
		}
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 11

		# north_russia
		states = {
			200
		}

		ratio = 0.05

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_dnipropetrovsk = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		NOT = {
			AND = {
				surrender_progress > 0.1
				has_game_rule = {
					rule = SOV_ai_behavior
					option = LEFT_OPPOSITION
				}
			}
		}
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 12

		# north_russia
		states = {
			226
		}

		ratio = 0.15

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_gomel = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		NOT = {
			AND = {
				surrender_progress > 0.1
				has_game_rule = {
					rule = SOV_ai_behavior
					option = LEFT_OPPOSITION
				}
			}
		}
		surrender_progress < 0.15
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 13

		# north_russia
		states = {
			241
		}

		ratio = 0.05

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_smolensk = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		NOT = {
			AND = {
				surrender_progress > 0.1
				has_game_rule = {
					rule = SOV_ai_behavior
					option = LEFT_OPPOSITION
				}
			}
		}
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 14

		# north_russia
		states = {
			242
		}

		ratio = 0.05

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_moscow = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		has_completed_focus = SOV_defense_of_the_motherland
		date < 1942.3.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 17

		# west russia
		states = {
			219
		}

		ratio = 0.18

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 18

		# west russia
		states = {
			11
			784
		}

		ratio = 0.15

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line_2 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 19

		# west russia
		states = {
			199
		}

		ratio = 0.15

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line_3 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 20

		# west russia
		states = {
			194
		}

		ratio = 0.1

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line_4 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		controls_state = 202
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 21

		# west russia
		states = {
			94
		}

		ratio = 0.1

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line_5 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 23

		# west russia
		states = {
			204
		}

		ratio = 0.1

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line_6 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 24

		# west russia
		states = {
			967
			966
		}

		ratio = 0.225

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line_7 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 25

		# west russia
		states = {
			93
		}

		ratio = 0.1

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}


SOV_defense_of_stalin_line_8 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 26

		# west russia
		states = {
			95
		}

		ratio = 0.1

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line_9 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 27

		# west russia
		states = {
			96
		}

		ratio = 0.12

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line_10 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 28

		# west russia
		states = {
			203
		}

		ratio = 0.15

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line_11 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 29

		# west russia
		states = {
			12
		}

		ratio = 0.1

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line_12 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 30

		# west russia
		states = {
			198
		}

		ratio = 0.2

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_stalin_line_13 = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 31

		# west russia
		states = {
			965
		}

		ratio = 0.1

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

SOV_defense_of_odessa = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		surrender_progress < 0.09
		date < 1942.10.1
		NOT = {
			has_offensive_war_with = GER
		}
		NOT = {
			AND = {
				OR = {
					has_completed_focus = SOV_secure_leningrad
					focus_progress = {
						focus = SOV_secure_leningrad
						progress > 0.1
					}
				}
				date < 1940.5.1
				NOT = {
					has_war_with = GER
				}
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = put_unit_buffers

		order_id = 22

		# west russia
		states = {
			192
		}

		ratio = 0.15

		subtract_invasions_from_need = no
		subtract_fronts_from_need = no
	}
}

#####################################################################################


SOV_better_unit_distribution = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		date > 1942.5.1
		NOT = {
			has_war_with = PER
		}
	}
	abort_when_not_enabled = yes


	ai_strategy = {
		type = front_unit_request
		tag = FIN
		value = -20
	}
	ai_strategy = {
		type = front_unit_request
		tag = PER
		value = -25
	}
	ai_strategy = {
		type = front_armor_score
		id = "TUR"
		value = -1000
	}
	ai_strategy = {
		type = front_armor_score
		id = "PER"
		value = -1000
	}
}


SOV_civs_are_great = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		date < 1936.1.13
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = building_target
		id = industrial_complex
		value = 300
	}
}

SOV_civs_are_useless = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		date > 1937.5.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = building_target
		id = arms_factory
		value = 800
	}

	ai_strategy = {
		type = added_military_to_civilian_factory_ratio
		value = 50
	}
}

SOV_some_safer_places_to_build = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		date < 1945.1.1
	}

	abort_when_not_enabled = yes

	ai_strategy = {
        type = factory_build_score_factor
        target = 398
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 651
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 573
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 653
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 572
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 583
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 876
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 652
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 400
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 399
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 249
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 251
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 402
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 403
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 405
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 586
        value = 300
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 248
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target =  253
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target =  252
        value = 200
    }
}

SOV_some_more_safe_places_to_build = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		date > 1939.1.1
		date < 1945.1.1
	}

	abort_when_not_enabled = yes

	ai_strategy = {
        type = factory_build_score_factor
        target = 256
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 250
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 251
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 583
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 590
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 403
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 571
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 588
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 405
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 586
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 258
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 257
        value = 200
    }

	ai_strategy = {
        type = factory_build_score_factor
        target = 351
        value = 200
    }
}

# SOV_the_nkvd_is_all_the_intel_we_need = {
# 	allowed = {
# 		tag = SOV
# 		has_dlc = "La Resistance"
# 	}
# 	enable = {
# 		has_government = communism
# 		num_of_civilian_factories < 90
# 		num_of_civilian_factories > 35
# 	}
# 	abort = {
# 		OR = {
# 			num_of_civilian_factories > 90
# 		}
# 	}
# 	ai_strategy = {
# 		type = intelligence_agency_usable_factories
# 		value = -20
# 	}
# }

SOV_dont_mess_with_volunteers_for_european_democratic_nations = { # Reverse strategy
	reversed = yes
	allowed = {
		NOT = { original_tag = SOV }
		capital_scope = {
			is_on_continent = europe # lets not mess with europe
		}
	}
	enable = {
		has_government = democratic
		SOV = {
			has_government = communism
		}
		NOT = {
			original_tag = SPR
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = send_volunteers_desire
		id = "SOV"
		value = -500
	}
}

SOV_med_is_a_poor_lend_lease_corridor = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		OR = {
			has_war_with = ENG
			has_war_with = FRA
			has_war_with = ITA
			has_war_with = GRE
		}
		NOT = { has_war_With = TUR }
		NOT = { 341 = { is_controlled_by = SOV } }
		OR = {
			213 = { is_controlled_by = SOV }
			214 = { is_controlled_by = SOV }
			408 = { is_controlled_by = SOV }
			409 = { is_controlled_by = SOV }
			637 = { is_controlled_by = SOV }
			413 = { is_controlled_by = SOV }
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = naval_avoid_region
		id = 202 #Aegean Sea
		value = 2000
	}
}


SOV_trotsky_ADVANCE = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		has_war_with = STA
		has_country_leader = { ruling_only = yes name = "Leon Trotsky" }
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_control
		tag = STA
		ordertype = front
		execute_order = yes
	}
}

SIK_focus_on_china = {
	allowed = {
		original_tag = SIK
	}
	enable = {
		is_in_faction_with = SOV
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = dont_defend_ally_borders
		id = "SOV"
		value = 1000
	}
}

SOV_iron_curtain = {
	enable = {
		is_in_faction_with = SOV
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = diplo_action_desire
		id = FRA
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = USA
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = HOL
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = BEL
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = LUX
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = ITA
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = DEN
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = RAJ
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = CAN
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = SAF
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = AST
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = NZL
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = NOR
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = ITA
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = GRE
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_desire
		id = HOL
		target = docking_rights
		value = -5000
	}

	ai_strategy = {
		type = diplo_action_acceptance
		id = SOV
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = FRA
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = USA
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = HOL
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = BEL
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = LUX
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = ITA
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = DEN
		target = military_access
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = RAJ
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = CAN
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = SAF
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = AST
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = NZL
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = NOR
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = ITA
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = GRE
		target = docking_rights
		value = -5000
	}
	ai_strategy = {
		type = diplo_action_acceptance
		id = HOL
		target = docking_rights
		value = -5000
	}
}

SOV_lend_lease_prc = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_government = communism
		PRC = {
			has_government = communism
			has_war = yes
		}
		has_war = no
		date < 1944.1.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = send_lend_lease_desire
		id = "PRC"
		value = 1000
	}
	ai_strategy = {
		type = support
		id = "PRC"
		value = 500
	}
	ai_strategy = {
		type = send_lend_lease_desire
		id = "CHI"
		value = -1000
	}
	ai_strategy = {
		type = support
		id = "CHI"
		value = -1000
	}
}

SOV_trotsky_is_out_to_kill_everyone = {
	enable = {
		NOT = {
			tag = SOV
			tag = STA
		}
		SOV = {
			has_country_leader = { ruling_only = yes name = "Leon Trotsky" }
		}
		is_historical_focus_on = no
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = alliance
		id = "SOV"
		value = -5000
	}

	ai_strategy = {
		type = alliance
		id = "STA"
		value = -5000
	}
}

SOV_trotsky_european_upheaval_strategy = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_completed_focus = SOV_european_upheaval
		date > 1943.1.1
		num_divisions > 199
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = antagonize
		id = "FIN"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "SWE"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "NOR"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "DEN"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "EST"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "LAT"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "LIT"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "POL"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "ROM"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "HUN"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "YUG"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "BUL"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "GRE"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "CZE"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "AUS"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "SLO"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "SPR"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "POR"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "GER"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "FRA"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "HOL"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "BEL"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "LUX"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "ITA"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "TUR"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "SER"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "SWI"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "ALB"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "MOL"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "SLV"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "HRZ"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "BOS"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "PRE"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "MEK"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "SAX"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "HAN"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "WUR"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "SHL"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "BRI"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "COR"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "TRA"
		value = 1000
	}
	ai_strategy = {
		type = antagonize
		id = "CRO"
		value = 1000
	}
}

# Make people sceptic about sending support to the Whites - again
# SOV_dont_support_whites = {

# 	allowed = { has_dlc = "No Step Back" }
# 	enable = {
# 		SOV = { SOV_is_exiles = yes}
# 		NOT = {
# 			tag = SOV
# 		}
# 	}

# 	abort = {
# 		has_global_flag = SOV_soviet_civil_war_over
# 	}

# 	ai_strategy = {
# 		type = alliance
# 		id = SOV
# 		value = -200
# 	}
# 	ai_strategy = {
# 		type = befriend
# 		id = SOV
# 		value = -100
# 	}
# 	ai_strategy = {
# 		type = support
# 		id = SOV
# 		value = -100
# 	}
# 	ai_strategy = {
# 		type = send_volunteers_desire
# 		id = SOV
# 		value = -200
# 	}
# 	ai_strategy = {
# 		type = send_lend_lease_desire
# 		id = SOV
# 		value = -200
# 	}
# }

# Don't ally the Soviet Union if it has civil war
SOV_dont_ally_us_soviet_civil_was = {
	allowed = {
		NOT = {
			original_tag = SOV
		}
	}
	enable = {
		has_global_flag = SOV_soviet_civil_war
	}
	abort = {
		has_global_flag = SOV_soviet_civil_war_over
	}
	ai_strategy = {
		type = alliance
		id = SOU
		value = -500
	}
}
soviet_civil_war = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		has_civil_war = yes
	}
	abort_when_not_enabled = yes

	ai_strategy = {
        type = front_control
		area = west_russia
        ordertype = front
        execution_type = rush_weak
        execute_order = yes
    }
	ai_strategy = {
        type = front_control
		area = north_russia
        ordertype = front
        execution_type = rush_weak
        execute_order = yes
    }
	ai_strategy = {
        type = front_control
		area = south_russia
        ordertype = front
        execution_type = rush_weak
        execute_order = yes
    }
	ai_strategy = {
        type = front_control
		area = east_russia
        ordertype = front
        execution_type = rush_weak
        execute_order = yes
    }
}
SOV_dont_join_wars_during_civil_war = {
	allowed = {
		NOT = {
			original_tag = SOV
		}
	}
	enable = {
		has_global_flag = SOV_soviet_civil_war
	}
	abort = {
		has_global_flag = SOV_soviet_civil_war_over
	}
	ai_strategy = {
		type = dont_join_wars_with
		id = SOU
		# target_country = SOV
		value = 200
	}
}

# Make countries want to support the opposition IF
SOV_support_opposition_with_arms = {

	allowed = { always = yes }
	enable = {
		OR = {
			AND = {
				tag = JAP
				SOV = { has_country_flag = SOV_CSW_transfer_vladivostok_flag }
			}
			AND = {
				tag = JAP
				SOV = { has_country_flag = SOV_CSW_transfer_sakhalin_flag }
			}
			AND = {
				tag = GER
				SOV = { has_country_flag = SOV_CSW_baku_oil_flag }
			}
			AND = {
				tag = GER
				SOV = { has_country_flag = SOV_CSW_ukraine_germany_flag }
			}
			AND = {
				tag = ENG
				SOV = { has_country_flag = SOV_CSW_belarus_uk_flag }
			}
			has_country_flag = SOV_supporting_trotsky_flag
		}
		NOT = {
			tag = SOV
		}
	}

	abort = {
		has_global_flag = SOV_soviet_civil_war_over
	}
	ai_strategy = {
		type = send_volunteers_desire
		id = SOV
		value = 100
	}
	ai_strategy = {
		type = send_lend_lease_desire
		id = SOV
		value = 300
	}
}

#SOV_scorched_earth_german_front_baltics = {
#
#	allowed = { original_tag = SOV }
#	enable = {
#		has_war_with = GER
#		NOT = {
#			has_country_flag = SOV_barbarossa_scorched_earth_delay #a 45 day delay at the start of the war before Soviets start doing this
#		}
#		count_triggers = {
#			amount = 4 #if 4 baltic states are owned by an enemy, burn the rest of the Baltics
#			814 = { CONTROLLER = { has_war_with = SOV } }
#			11 = { CONTROLLER = { has_war_with = SOV } }
#			189 = { CONTROLLER = { has_war_with = SOV } }
#			815 = { CONTROLLER = { has_war_with = SOV } }
#			190 = { CONTROLLER = { has_war_with = SOV } }
#			809 = { CONTROLLER = { has_war_with = SOV } }
#			810 = { CONTROLLER = { has_war_with = SOV } }
#			808 = { CONTROLLER = { has_war_with = SOV } }
#			811 = { CONTROLLER = { has_war_with = SOV } }
#			13 = { CONTROLLER = { has_war_with = SOV } }
#			812 = { CONTROLLER = { has_war_with = SOV } }
#			813 = { CONTROLLER = { has_war_with = SOV } }
#			191 = { CONTROLLER = { has_war_with = SOV } }
#		}
#	}
#
#	abort = {
#		OR = {
#			NOT = { has_war_with = GER }
#			strength_ratio = { tag = GER ratio > 1.5 }
#			date > 1944.1.1
#		}
#	}
#
#	ai_strategy = {
#		type = scorched_earth_prio
#		id = SOV
#		states = {
#			814
#			11
#			189
#			815
#			190
#			809
#			810
#			808
#			811
#			13
#			812
#			813
#			191
#		}
#	}
#}
#
#SOV_scorched_earth_german_front_Poland = {
#
#	allowed = { original_tag = SOV }
#	enable = {
#		has_war_with = GER
#		NOT = {
#			has_country_flag = SOV_barbarossa_scorched_earth_delay #a 45 day delay at the start of the war before Soviets start doing this
#		}
#		count_triggers = {
#			amount = 2 #if 2 states are owned by an enemy, burn the rest of the area
#			784 = { CONTROLLER = { has_war_with = SOV } }
#			96 = { CONTROLLER = { has_war_with = SOV } }
#			95 = { CONTROLLER = { has_war_with = SOV } }
#			94 = { CONTROLLER = { has_war_with = SOV } }
#			93 = { CONTROLLER = { has_war_with = SOV } }
#			91 = { CONTROLLER = { has_war_with = SOV } }
#			89 = { CONTROLLER = { has_war_with = SOV } }
#
#		}
#	}
#
#	abort = {
#		OR = {
#			NOT = { has_war_with = GER }
#			strength_ratio = { tag = GER ratio > 1.5 }
#			date > 1944.1.1
#		}
#	}
#
#	ai_strategy = {
#		type = scorched_earth_prio
#		id = SOV
#		states = {
#			784
#			96
#			95
#			94
#			93
#			91
#			89
#		}
#	}
#}
#
#SOV_scorched_earth_german_front_north = {
#
#	allowed = { original_tag = SOV }
#	enable = {
#		has_war_with = GER
#		NOT = {
#			has_country_flag = SOV_barbarossa_scorched_earth_delay #a 45 day delay at the start of the war before Soviets start doing this
#		}
#		count_triggers = {
#			amount = 2 #if 2 states are owned by an enemy, burn the rest of the area
#			208 = { CONTROLLER = { has_war_with = SOV } }
#			209 = { CONTROLLER = { has_war_with = SOV } }
#			210 = { CONTROLLER = { has_war_with = SOV } }
#			195 = { CONTROLLER = { has_war_with = SOV } }
#			263 = { CONTROLLER = { has_war_with = SOV } }
#			246 = { CONTROLLER = { has_war_with = SOV } }
#
#
#		}
#	}
#
#	abort = {
#		OR = {
#			NOT = { has_war_with = GER }
#			strength_ratio = { tag = GER ratio > 1.5 }
#			date > 1944.1.1
#		}
#	}
#
#	ai_strategy = {
#		type = scorched_earth_prio
#		id = SOV
#		states = {
#			208
#			209
#			210
#			195
#			263
#			246
#		}
#	}
#}
#
#SOV_scorched_earth_german_front_center = {
#
#	allowed = { original_tag = SOV }
#	enable = {
#		has_war_with = GER
#		NOT = {
#			has_country_flag = SOV_barbarossa_scorched_earth_delay #a 45 day delay at the start of the war before Soviets start doing this
#		}
#		count_triggers = {
#			amount = 4 #if 4 states are owned by an enemy, burn the rest of the area
#			207 = { CONTROLLER = { has_war_with = SOV } }
#			206 = { CONTROLLER = { has_war_with = SOV } }
#			204 = { CONTROLLER = { has_war_with = SOV } }
#			194 = { CONTROLLER = { has_war_with = SOV } }
#			201 = { CONTROLLER = { has_war_with = SOV } }
#			199 = { CONTROLLER = { has_war_with = SOV } }
#			202 = { CONTROLLER = { has_war_with = SOV } }
#			193 = { CONTROLLER = { has_war_with = SOV } }
#			241 = { CONTROLLER = { has_war_with = SOV } }
#			242 = { CONTROLLER = { has_war_with = SOV } }
#			243 = { CONTROLLER = { has_war_with = SOV } }
#			224 = { CONTROLLER = { has_war_with = SOV } }
#		}
#	}
#
#	abort = {
#		OR = {
#			NOT = { has_war_with = GER }
#			strength_ratio = { tag = GER ratio > 1.5 }
#			date > 1944.1.1
#		}
#	}
#
#	ai_strategy = {
#		type = scorched_earth_prio
#		id = SOV
#		states = {
#			207
#			206
#			204
#			194
#			201
#			199
#			202
#			193
#			241
#			242
#			243
#			224
#		}
#	}
#}
#
#SOV_scorched_earth_german_front_moscow = {
#
#	allowed = { original_tag = SOV }
#	enable = {
#		has_war_with = GER
#		NOT = {
#			has_country_flag = SOV_barbarossa_scorched_earth_delay #a 45 day delay at the start of the war before Soviets start doing this
#		}
#		count_triggers = {
#			amount = 1 #if 1 states are owned by an enemy, burn the rest of the area
#			219 = { CONTROLLER = { has_war_with = SOV } }
#			246 = { CONTROLLER = { has_war_with = SOV } }
#			242 = { CONTROLLER = { has_war_with = SOV } }
#			205 = { CONTROLLER = { has_war_with = SOV } }
#			223 = { CONTROLLER = { has_war_with = SOV } }
#
#		}
#	}
#
#	abort = {
#		OR = {
#			NOT = { has_war_with = GER }
#			strength_ratio = { tag = GER ratio > 1.5 }
#			date > 1944.1.1
#		}
#		controls_state = 220
#		controls_state = 224
#		controls_state = 243
#		controls_state = 207
#		controls_state = 210
#	}
#
#	ai_strategy = {
#		type = scorched_earth_prio
#		id = SOV
#		states = {
#			219
#			246
#			242
#			205
#			223
#		}
#	}
#}
#
#SOV_scorched_earth_german_front_stalingrad = {
#
#	allowed = { original_tag = SOV }
#	enable = {
#		has_war_with = GER
#		NOT = {
#			has_country_flag = SOV_barbarossa_scorched_earth_delay #a 45 day delay at the start of the war before Soviets start doing this
#		}
#		count_triggers = {
#			amount = 1 #if 1 states are owned by an enemy, burn the rest of the area
#			217 = { CONTROLLER = { has_war_with = SOV } }
#			265 = { CONTROLLER = { has_war_with = SOV } }
#			245 = { CONTROLLER = { has_war_with = SOV } }
#			238 = { CONTROLLER = { has_war_with = SOV } }
#			829 = { CONTROLLER = { has_war_with = SOV } }
#
#		}
#	}
#
#	abort = {
#		OR = {
#			NOT = { has_war_with = GER }
#			strength_ratio = { tag = GER ratio > 1.5 }
#			date > 1944.1.1
#		}
#		controls_state = 218
#		controls_state = 228
#		controls_state = 260
#		controls_state = 239
#	}
#
#	ai_strategy = {
#		type = scorched_earth_prio
#		id = SOV
#		states = {
#			217
#			265
#			245
#			238
#			829
#		}
#	}
#}

SOV_dont_do_so_many_naval_invasions_please = {

	allowed = { original_tag = SOV }



	enable = {
		has_war_with = GER
	}

	abort_when_not_enabled = yes
	ai_strategy = {
		type = invasion_unit_request
		tag = GER
		value = -50
	}
}

###########################
### MOLOTOV IN DA HOUSE ###
###########################
#Soviets
SOV_molotov_active_sov = {
	allowed = {
		original_tag = SOV
	}

	enable = {
		has_idea = SOV_vyacheslav_molotov
		NOT = { has_completed_focus = SOV_eradicate_western_fascism }
		NOT = { has_global_flag = mr_not_honored }
		NOT = {
			OR = {
				has_war_with = GER
				has_war_with = JAP
			}
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = befriend
		id = GER
		value = 35
	}

	ai_strategy = {
		type = befriend
		id = JAP
		value = 20
	}

	ai_strategy = {
		type = antagonize
		id = POL
		value = 25
	}

	ai_strategy = {
		type = antagonize
		id = FIN
		value = 25
	}

	ai_strategy = {
		type = antagonize
		id = ENG
		value = 15
	}

	ai_strategy = {
		type = antagonize
		id = USA
		value = 15
	}

	ai_strategy = {
		type = antagonize
		id = FRA
		value = 15
	}
}

#Countries that like Molotov
SOV_molotov_active_friendly_others = {
	allowed = {
		OR = {
			original_tag = GER
			original_tag = JAP
		}
	}

	enable = {
		SOV = { has_idea = SOV_vyacheslav_molotov }
	}

	abort = {
		OR = {
			SOV = { NOT = { has_idea = SOV_vyacheslav_molotov } }
			has_capitulated = yes
			is_in_faction_with = SOV
		}
	}

	ai_strategy = {
		type = befriend
		id = SOV
		value = 25
	}
}

#Countries that dislike Molotov
SOV_molotov_active_hostile_others = {
	allowed = {
		OR = {
			original_tag = ENG
			original_tag = FRA
			original_tag = USA
			original_tag = POL
			original_tag = FIN
			original_tag = SAU #Khakimov incident
		}
	}

	enable = {
		SOV = { has_idea = SOV_vyacheslav_molotov }
	}

	abort = {
		OR = {
			SOV = { NOT = { has_idea = SOV_vyacheslav_molotov } }
			has_capitulated = yes
			is_in_faction_with = SOV
		}
	}

	ai_strategy = {
		type = antagonize
		id = SOV
		value = 25
	}
}


############################
### LITVINOV IN DA HOUSE ###
############################
#Soviets
SOV_litvinov_active_sov = {
	allowed = { original_tag = SOV }

	enable = {
		has_idea = SOV_maksim_litvinov
		is_subject = no
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = befriend
		id = ENG
		value = 25
	}

	ai_strategy = {
		type = befriend
		id = USA
		value = 15
	}

	ai_strategy = {
		type = befriend
		id = FRA
		value = 35
	}

	ai_strategy = {
		type = befriend
		id = POL
		value = 25
	}

	ai_strategy = {
		type = antagonize
		id = GER
		value = 25
	}

	ai_strategy = {
		type = antagonize
		id = JAP
		value = 25
	}

	ai_strategy = {
		type = diplo_action_desire
		id = FRA
		target = improve_relation
		value = 25
	}

	ai_strategy = {
		type = diplo_action_desire
		id = POL
		target = improve_relation
		value = 15
	}
}

#Countries that like Litvinov
SOV_litvinov_active_friendly_others = {
	allowed = {
		OR = {
			original_tag = ENG
			original_tag = FRA
			original_tag = USA
			original_tag = POL
			original_tag = FIN
			original_tag = SAU #Khakimov incident
		}
	}

	enable = {
		SOV = { has_idea = SOV_maksim_litvinov }
		is_subject = no
	}

	abort = {
		OR = {
			SOV = { NOT = { has_idea = SOV_maksim_litvinov } }
			has_capitulated = yes
			is_in_faction_with = SOV
			is_subject = yes
		}
	}

	ai_strategy = {
		type = befriend
		id = SOV
		value = 25
	}
}

#Countries that dislike Litvinov
SOV_litvinov_active_hostile_others = {
	allowed = {
		OR = {
			original_tag = GER
			original_tag = JAP
		}
	}

	enable = {
		SOV = { has_idea = SOV_maksim_litvinov }
		is_subject = no
	}

	abort = {
		OR = {
			SOV = { NOT = { has_idea = SOV_maksim_litvinov } }
			has_capitulated = yes
			is_in_faction_with = SOV
			is_subject = yes
		}
	}

	ai_strategy = {
		type = antagonize
		id = SOV
		value = 25
	}
}

#########################
### FOREIGN RELATIONS ###
#########################

#Soviets
SOV_khakimov_proposal_sov = {
	allowed = {
		original_tag = SOV
	}

	enable = {
		has_idea = SOV_maksim_litvinov
		has_completed_focus = SOV_the_khakimov_proposal
		SAU = {
			has_opinion = {
				target = SOV
				value < 0
			}
			is_subject = no
		}
		is_subject = no
	}

	abort = {
		OR = {
			NOT = { has_idea = SOV_maksim_litvinov }
			is_in_faction_with = SAU
			SAU = { has_capitulated = yes }
			SAU = { is_subject = no }
			SAU = {
				has_opinion = {
					target = SOV
					value > 75
				}
			}
			is_subject = yes
		}
	}

	ai_strategy = {
		type = diplo_action_desire
		id = SAU
		target = befriend
		value = 50
	}
	ai_strategy = {
		type = diplo_action_desire
		id = SAU
		target = improve_relation
		value = 50
	}
}

#Soviets
SAU_khakimov_proposal_sau = {
	allowed = {
		original_tag = SAU
	}

	enable = {
		SOV = {
			has_idea = SOV_maksim_litvinov
			has_completed_focus = SOV_the_khakimov_proposal
			is_subject = no
		}
		is_subject = no
	}

	abort = {
		OR = {
			SOV = { NOT = { has_idea = SOV_maksim_litvinov } }
			is_in_faction_with = SOV
			SOV = { has_capitulated = yes }
			is_subject = yes
		}
	}

	ai_strategy = {
		type = diplo_action_desire
		id = SOV
		target = befriend
		value = 25
	}
}

#SOV_unit_buffer_for_asian_threat = {
#	allowed = {
#		original_tag = SOV
#	}
#	enable = {
#		OR = { #Always have a small unit buffer along the railway, just in case asian fronts get dangerous
#			AND = {
#				has_war = no
#				date < 1942.5.1
#			}
#			AND = {
#				has_war = yes
#				date < 1942.5.1
#				surrender_progress < 0.05
#			}
#		}
#	}
#
#	abort_when_not_enabled = yes
#
#	ai_strategy = {
#		type = put_unit_buffers
#
#		# ratio of total armeis in country to be buffered
#		ratio = 0.1
#
#		# you can specify an order id. ratio of same orders ids will be share same ratio
#		#order_id = 2
#
#		# states to put garrison orders (if no state is friendly, strat is invalid)
#		states = {
#			564
#			563
#			566
#			567
#			561
#			657
#			408
#			409
#		}
#
#		# ai areas that the orders will use these buffers in
#		area = asia
#
#		# by default if you have orders in target areas, the buffer will request less units.
#		# you can override this to disable the feature
#		subtract_invasions_from_need = no
#		subtract_fronts_from_need = yes
#	}
#}

SOV_boost_div_upgrades = { #lets make sure sov upgrades divs when at war
	allowed = {
		original_tag = SOV
	}
	enable = {
		has_war = yes
		date > 1941.1.1
	}

	abort = {
		has_war = no
		has_template_ai_majority_unit = medium_armor
	}

	# lets do changes more often during this period too
	ai_strategy = {
		type = land_xp_spend_priority
		id = division_template
		value = 100
	}
}

SOV_puppets_arnt_war_winning = {
	allowed = {
		original_tag = SOV
	}
	enable = {
		has_war_with = POL
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = diplo_action_desire
		id = TAN
		target = call_allies
		value = -9999
	}

	ai_strategy = {
		type = diplo_action_desire
		id = MON
		target = call_allies
		value = -9999
	}

	ai_strategy = {
		type = diplo_action_desire
		id = SIK
		target = call_allies
		value = -9999
	}

	ai_strategy = {
		type = diplo_action_acceptance
		id = TAN
		target = call_allies
		value = -9999
	}

	ai_strategy = {
		type = diplo_action_acceptance
		id = MON
		target = call_allies
		value = -9999
	}

	ai_strategy = {
		type = diplo_action_acceptance
		id = SIK
		target = call_allies
		value = -9999
	}

	ai_strategy = {
		type = diplo_action_acceptance
		id = TAN
		target = join_allies
		value = -9999
	}

	ai_strategy = {
		type = diplo_action_acceptance
		id = MON
		target = join_allies
		value = -9999
	}

	ai_strategy = {
		type = diplo_action_acceptance
		id = SIK
		target = join_allies
		value = -9999
	}
}

# we skip some of the minor minors that dont see much frontline
SOV_dont_waste_volunteers_to_chinese_minors = {
	allowed = {
		tag = SOV
	}
	enable = {
		SIK = { is_in_faction_with = CHI }
		OR = {
			SIK = {
				has_war = yes
			}
			YUN = {
				has_war = yes
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = send_volunteers_desire
		id = "SIK"
		value = -100
	}
	ai_strategy = {
		type = send_volunteers_desire
		id = "YUN"
		value = -100

	}
}

SOV_only_bother_with_volunteers_if_chi_losing = {
	allowed = {
		tag = SOV
	}
	enable = {
		date < 1941.1.1
		CHI = { surrender_progress < 0.4 }
		CHI = {
			has_war = yes
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = send_volunteers_desire
		id = "YUN"
		value = -100
	}
	ai_strategy = {
		type = send_volunteers_desire
		id = "XSM"
		value = -100
	}
	ai_strategy = {
		type = send_volunteers_desire
		id = "SHX"
		value = -100
	}
	ai_strategy = {
		type = send_volunteers_desire
		id = "CHI"
		value = -100
	}
}

SOV_dont_start_a_war_with_jap_too_early = {
	allowed = {
		tag = SOV
	}

	enable = {
		country_exists = JAP
		OR = {
			date < 1943.1.1
			has_war_with = GER
			has_war_with = FRA
			has_war_with = POL
			has_war_with = ROM
			has_war_with = TUR
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = ignore_claim
		id = "JAP"
		value = 1
	}
}

SOV_no_war_with_allies_yet = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_war_with = GER
	}

	abort_when_not_enabled = yes
	
	ai_strategy = {
		type = befriend
		id = "IRQ"
		value = -1000
	}
	ai_strategy = {
		type = alliance
		id = "IRQ"
		value = -1000
	}
	
	ai_strategy = {
		type = dont_join_wars_with
		id = IRQ
		target_country = ENG
		value = 1000
	}
}

SOV_poland_frontline_fix = {
	allowed = {
		tag = SOV
	}
	enable = {
		has_war_with = GER
		NOT = {
			has_war_with = POL
		}
		NOT = {
			POL = {
				is_in_faction_with = GER
			}
		}
		NOT = {
			is_in_faction_with = POL
		}
		date > 1943.1.1
	}

	abort_when_not_enabled = yes
	
	ai_strategy = {
		type = front_unit_request
		tag = POL
		value = -1000
	}
}