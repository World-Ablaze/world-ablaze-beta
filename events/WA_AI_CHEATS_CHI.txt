add_namespace = chi_armor


country_event = {
	id = chi_armor.4
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = CHI
		is_ai = yes
		has_completed_focus = CHI_the_daba_line
	}

	immediate = {
		605 = {
			add_building_construction = {
				type = bunker
				level = 4
				instant_build = yes
				province = 13708
			}
			add_building_construction = {
				type = bunker
				level = 4
				instant_build = yes
				province = 13709
			}
			add_building_construction = {
				type = bunker
				level = 6
				instant_build = yes
				province = 13779
			}
			add_building_construction = {
				type = bunker
				level = 5
				instant_build = yes
				province = 6999
			}
		}
	}

	option = {}

}

country_event = {
	id = chi_armor.901
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = CHI
		is_ai = yes
		date > 1937.5.8
		date < 1938.5.8
	}

	immediate = {
		if = {
			limit = {
				has_bba = yes
			}
			add_equipment_to_stockpile = { type = USA_p_26_airframe amount = 100 producer = CHI }
		}
		else = {
			add_equipment_to_stockpile = { type = usa_fighter_equipment_0 amount = 100 producer = CHI }
		}
	}

	option = {}
}

country_event = {
	id = chi_armor.902
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = CHI
		is_ai = yes
		date > 1937.10.1
		date < 1938.10.1
	}

	immediate = {
		add_political_power = 100
		#army_experience = 100
		add_equipment_to_stockpile = { type = chi_inf_1 amount = 4000 producer = CHI }
		add_equipment_to_stockpile = { type = heavy_infantry_equipment_1 amount = 1000 producer = CHI }
		add_equipment_to_stockpile = { type = support_equipment_1 amount = 1500 producer = CHI }
	}

	option = {}
}

country_event = {
	id = chi_armor.903
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = CHI
		is_ai = yes
		date > 1938.1.1
		date < 1939.1.1
		has_war = yes
	}

	immediate = {
		#army_experience = 100
		add_equipment_to_stockpile = { type = chi_inf_1 amount = 25000 producer = CHI }
		add_equipment_to_stockpile = { type = heavy_infantry_equipment_1 amount = 1500 producer = CHI }
		add_equipment_to_stockpile = { type = support_equipment_1 amount = 2500 producer = CHI }
		add_equipment_to_stockpile = { type = motorized_equipment_1 amount = 10000 producer = CHI }
		random_owned_controlled_state = {
			prioritize = { 929 }
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 3
					include_locked = yes
				}
			}
			add_building_construction = {
				type = arms_factory
				level = 4
				instant_build = yes
			}
		}
	}

	option = {}
}

country_event = {
	id = chi_armor.905
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = CHI
		is_ai = yes
		date > 1938.10.1
		date < 1939.10.1
		has_war = yes
	}

	immediate = {
		random_owned_controlled_state = {
			prioritize = { 929 }
			limit = {
				free_building_slots = {
					building = arms_factory
					size > 3
					include_locked = yes
				}
			}
			add_building_construction = {
				type = arms_factory
				level = 4
				instant_build = yes
			}
		}
		random_owned_controlled_state = {
			prioritize = { 929 }
			limit = {
				free_building_slots = {
					building = steel_refinery
					size > 1
					include_locked = yes
				}
			}
			add_building_construction = {
				type = steel_refinery
				level = 2
				instant_build = yes
			}
		}
		#army_experience = 100
	}

	option = {}
}

country_event = {
	id = chi_armor.908
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = CHI
		is_ai = yes
		date > 1938.1.1
		has_war_with = JAP
	}

	immediate = {
		add_ideas = intensive_propaganda_effort
	}

	option = {}
}

country_event = {
	id = chi_armor.909
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		#OR = {
		#	tag = CHI
		#	tag = GXC
		#	tag = YUN
		#	tag = XIK
		#	tag = XSM
		#}
		tag = CHI
		is_ai = yes
		date > 1939.1.1
		NOT = {
			has_country_flag = CHI_army_reformed_once
		}
	}

	immediate = {
		set_country_flag = CHI_army_reformed_once
		if = {
			limit = { has_idea = CHI_army_corruption_1 }
			swap_ideas = {
				remove_idea = CHI_army_corruption_1
				add_idea = CHI_army_corruption_2
			}
		}
		else_if = {
			limit = { has_idea = CHI_army_corruption_2 }
			swap_ideas = {
				remove_idea = CHI_army_corruption_2
				add_idea = CHI_army_corruption_3
			}
		}
		else_if = {
			limit = { has_idea = CHI_army_corruption_3 }
			remove_ideas = CHI_army_corruption_3
		}
	}

	option = {}
}

country_event = {
	id = chi_armor.910
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		#OR = {
		#	tag = CHI
		#	tag = GXC
		#	tag = YUN
		#	tag = XIK
		#	tag = XSM
		#}
		tag = CHI
		is_ai = yes
		date > 1940.1.1
		NOT = {
			has_country_flag = CHI_army_reformed_twice
		}
	}

	immediate = {
		set_country_flag = CHI_army_reformed_twice
		if = {
			limit = { has_idea = CHI_army_corruption_1 }
			swap_ideas = {
				remove_idea = CHI_army_corruption_1
				add_idea = CHI_army_corruption_2
			}
		}
		else_if = {
			limit = { has_idea = CHI_army_corruption_2 }
			swap_ideas = {
				remove_idea = CHI_army_corruption_2
				add_idea = CHI_army_corruption_3
			}
		}
		else_if = {
			limit = { has_idea = CHI_army_corruption_3 }
			remove_ideas = CHI_army_corruption_3
		}
	}

	option = {}
}

country_event = {
	id = chi_armor.911
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		#OR = {
		#	tag = CHI
		#	tag = GXC
		#	tag = YUN
		#	tag = XIK
		#	tag = XSM
		#}
		tag = CHI
		is_ai = yes
		date > 1940.7.1
		NOT = {
			has_country_flag = CHI_army_reformed_thrice
		}
	}

	immediate = {
		set_country_flag = CHI_army_reformed_thrice
		if = {
			limit = { has_idea = CHI_army_corruption_1 }
			swap_ideas = {
				remove_idea = CHI_army_corruption_1
				add_idea = CHI_army_corruption_2
			}
		}
		else_if = {
			limit = { has_idea = CHI_army_corruption_2 }
			swap_ideas = {
				remove_idea = CHI_army_corruption_2
				add_idea = CHI_army_corruption_3
			}
		}
		else_if = {
			limit = { has_idea = CHI_army_corruption_3 }
			remove_ideas = CHI_army_corruption_3
		}
	}

	option = {}
}

country_event = {
	id = chi_armor.992
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = CHI
		is_ai = yes
		has_war = yes
		date > 1942.1.1
		date < 1943.1.1
		OR = {
			929 = { is_controlled_by = CHI }
			605 = { is_controlled_by = CHI }
		}
	}

	immediate = {
		if = {
			limit = {
				929 = { is_controlled_by = CHI }
			}
			929 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
		if = {
			limit = {
				605 = { is_controlled_by = CHI }
			}
			605 = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}

	option = {}
}

country_event = {
	id = chi_armor.1000 #Festung Chonqing
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = CHI
		is_ai = yes
		difficulty > 2 #Hard and above Difficulty
		has_war_with_major = yes
		surrender_progress > 0.5
		has_completed_focus = CHI_the_daba_line
	}

	immediate = {
		928 = {
			add_dynamic_modifier = {
				modifier = SOV_fortified_state
				scope = CHI
			}
			if = {
				limit = { has_dlc = "Gotterdammerung" }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = stronghold_network
					level = 1
					instant_build = yes
				}
			}
			set_building_level = {
				type = bunker
				province = {
					id = 7948
					id = 10304
					id = 4141
					id = 13545
					id = 4431
					id = 11972
					id = 13677
					id = 4041
					id = 13548
					id = 13711
					id = 13710
					id = 13803
				}
				level = 7
				instant_build = yes
			}
		}
		605 = {
			add_dynamic_modifier = {
				modifier = SOV_fortified_state
				scope = CHI
			}
			if = {
				limit = { has_dlc = "Gotterdammerung" }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = stronghold_network
					level = 1
					instant_build = yes
				}
			}
			add_building_construction = {
				type = bunker
				level = 1
				instant_build = yes
				province = 13708
			}
			add_building_construction = {
				type = bunker
				level = 1
				instant_build = yes
				province = 13709
			}
			add_building_construction = {
				type = bunker
				level = 1
				instant_build = yes
				province = 13779
			}
			add_building_construction = {
				type = bunker
				level = 1
				instant_build = yes
				province = 6999
			}
		}
		929 = {
			add_dynamic_modifier = {
				modifier = SOV_fortified_state
				scope = CHI
			}
			if = {
				limit = { has_dlc = "Gotterdammerung" }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = stronghold_network
					level = 1
					instant_build = yes
				}
			}
		}
	}

	option = {}
}

