add_namespace = ger_armor

########## Templates

country_event = {
	id = ger_armor.001
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		date > 1936.1.1
	}

	immediate = {
		GER_fedor_von_bock = {
			demote_leader = yes
		}
		GER_gerd_von_rundstedt = {
			demote_leader = yes
		}
		GER_erwin_von_witzleben = {
			demote_leader = yes
		}
		GER_wilhelm_ritter_von_leeb = {
			demote_leader = yes
		}
		GER_gotthard_heinrici = {
			promote_leader = yes
		}
		GER_erich_von_manstein = {
			promote_leader = yes
		}
		GER_walter_model = {
			promote_leader = yes
		}
		GER_erwin_rommel = {
			promote_leader = yes
		}
		GER_walter_von_reichenau = {
			promote_leader = yes
		}
		GER_wilhelm_list = {
			promote_leader = yes
		}

		GER_gustav_anton_von_wietersheim = {
			add_skill_level = 1
		}
		add_advisor_role = {
			character = "GER_gustav_anton_von_wietersheim"
			advisor = {
				slot = high_command
				idea_token = GER_gustav_anton_von_wietersheim
				ledger = army
				traits = {
					army_armored_2
				}
				cost = 100
				ai_will_do = {
					base = 0
					modifier = {
						add = 100
						date > 1939.6.1
					}
				}
			}
		}
	}
	option = {}
}

add_namespace = ger_armor

country_event = {
	id = ger_armor.105
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		198 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = ROM
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
		ROM = { is_in_faction_with = GER }
	}

	immediate = {
		ROM = { set_state_controller = 198 }
	}

	option = {}

}

country_event = {
	id = ger_armor.106
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		199 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 199 }
		}
		else = {
			GER = { set_state_controller = 199 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.107
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		93 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 93 }
		}
		else = {
			GER = { set_state_controller = 93 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.108
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		94 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 94 }
		}
		else = {
			GER = { set_state_controller = 94 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.109
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		194 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 194 }
		}
		else = {
			GER = { set_state_controller = 194 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.110
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		201 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 201 }
		}
		else = {
			GER = { set_state_controller = 201 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.111
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		202 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 202 }
		}
		else = {
			GER = { set_state_controller = 202 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.112
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		203 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 203 }
		}
		else = {
			GER = { set_state_controller = 203 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.113
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		197 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 197 }
		}
		else = {
			GER = { set_state_controller = 197 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.114
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		196 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 196 }
		}
		else = {
			GER = { set_state_controller = 196 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.115
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		137 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 137 }
		}
		else = {
			GER = { set_state_controller = 137 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.116
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		259 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 259 }
		}
		else = {
			GER = { set_state_controller = 259 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.117
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		226 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 226 }
		}
		else = {
			GER = { set_state_controller = 226 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.118
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		200 = {
			CONTROLLER = {
				has_full_control_of_state = prev
				NOT = {
					tag = RUK
					tag = GER
				}
				OR = {
					is_subject_of = GER
					is_in_faction_with = GER
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				country_exists = RUK
			}
			RUK = { set_state_controller = 200 }
		}
		else = {
			GER = { set_state_controller = 200 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.604
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		is_historical_focus_on = yes
		country_exists = YUG
		NOT = { is_in_faction_with = YUG }
		NOT = { has_war_with = YUG }
		OR = {
			has_war_with = GRE
			is_in_faction_with = GRE
		}
		date > 1941.4.6
		has_government = fascism
		has_war = yes
	}

	immediate = {
		declare_war_on = {
			target = YUG
			type = take_state_focus
			generator = { 102 }
		}
	}

	option = {}

}

country_event = {
	id = ger_armor.901
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		date < 1937.1.1
		has_country_flag = infantry_template_ger
		is_subject = no
	}

	immediate = {
		delete_unit_template_and_units = { division_template = "Infanterie Division" }
		delete_unit_template_and_units = { division_template = "Kavallerie Brigade" }
		delete_unit_template_and_units = { division_template = "Gebirgsjäger Brigade" }
		delete_unit_template_and_units = { division_template = "Motorized Infanterie Division" disband = yes }
		delete_unit_template_and_units = { division_template = "Panzer Division" }
		set_country_flag = GIBRALTER_BLOCKED_FOR_COUNTRY
	}

	option = {}

}

country_event = {
	id = ger_armor.903
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		is_subject = no
		date > 1938.7.1
	}

	immediate = {
		delete_unit_template_and_units = { division_template = "Oster Infanterie Division" disband = yes}
	}

	option = {}
}

country_event = {
	id = ger_armor.904
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		has_government = fascism
		is_ai = yes
		AUS = { exists = no }
		153 = { is_controlled_by = GER }
		152 = { is_controlled_by = GER }
		882 = { is_controlled_by = GER }
		998 = { is_controlled_by = GER }
		4 = { is_controlled_by = GER }
		852 = { is_controlled_by = GER }
		853 = { is_controlled_by = GER }
		date < 1939.1.1
	}

	immediate = {
		delete_unit_template_and_units = { division_template = "Infanterie Division" }
		delete_unit_template_and_units = { division_template = "Alpenjäger Division" }
		delete_unit_template_and_units = { division_template = "Schnelle Division" }
	}

	option = {}

}

country_event = {
	id = ger_armor.916
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		date > 1942.3.1
		64 = { is_controlled_by = GER }
		64 = { is_owned_by = GER }
		is_subject = no
	}

	immediate = {
		add_ideas = home_defence_spirit
	}

	option = {}

}

country_event = {
	id = ger_armor.928
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		has_template = "Fallschirmjäger Division"
		has_template = "German Infantry Division"
		GER = { has_war_with = NOR }
		has_completed_focus = GER_western_war_plans
		is_subject = no
		NOT = { has_country_flag = GER_ai_norway_fired }
		OR = {
			99 = { CONTROLLER = { is_in_faction_with = ROOT } }
			99 = { CONTROLLER = { is_subject_of = ROOT } }
			99 = { CONTROLLER = { tag = ROOT } }
			37 = { CONTROLLER = { is_in_faction_with = ROOT } }
			37 = { CONTROLLER = { is_subject_of = ROOT } }
			37 = { CONTROLLER = { tag = ROOT } }
		}
	}

	immediate = {
		load_oob = "GER_Norway"
	}

	option = {}
}


country_event = {
	id = ger_armor.938
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		has_completed_focus = GER_appoint_albert_speer
	}

	immediate = {
		remove_ideas = walther_funk
		add_ideas = speer
	}

	option = {
	}
}


country_event = { ########## RK bohemia event for garrisons and shuffling fix
	id = ger_armor.999
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		GER = {
			is_ai = yes
			has_country_flag = RCZ_garrison_flag
		}
		tag = RCZ
		is_ai = yes
		has_global_flag = fall_of_france
		country_exists = RCZ
	}

	immediate = {
		add_manpower = 500000
		delete_unit_template_and_units = { division_template = "German Infantry Division" }
		delete_unit_template_and_units = { division_template = "Gebirgs-Division" }
		delete_unit_template_and_units = { division_template = "Gebirgsjäger Division" }
		delete_unit_template_and_units = { division_template = "Light Panzer Division" }
		delete_unit_template_and_units = { division_template = "Fallschirmjäger Brigade" }
		add_ideas = GER_okw
		inherit_technology = GER
		add_equipment_to_stockpile = { type = convoy_1 amount = 250 producer = RCZ }
		add_equipment_to_stockpile = { type = train_equipment_1 amount = 1500 producer = RCZ }

		add_equipment_to_stockpile = { type = ger_inf_2 amount = 25000 producer = GER }
		add_equipment_to_stockpile = { type = ger_hv_inf_2 amount = 25000 producer = GER }
		add_equipment_to_stockpile = { type = support_equipment_1 amount = 25000 producer = GER }
		add_equipment_to_stockpile = { type = ger_aa_1 amount = 800 producer = GER }
		add_equipment_to_stockpile = { type = ger_art_1 amount = 2000 producer = GER }
		add_equipment_to_stockpile = { type = ger_at_1 amount = 2000 producer = GER }
		add_equipment_to_stockpile = { type = ger_hv_art_1 amount = 2000 producer = GER }
		add_equipment_to_stockpile = { type = ger_motorized_equipment_1 amount = 35000 producer = GER }
	}
	option = {}
}

country_event = {
	id = ger_armor.1000
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		has_war_with = ENG
		difficulty > 2 #Hard and above Difficulty
		date > 1940.9.1
		has_template = "Fallschirmjäger Division"
		has_global_flag = fall_of_france
		6 = { CONTROLLER = { is_in_faction_with = ROOT } }
		29 = { CONTROLLER = { is_in_faction_with = ROOT } }
		785 = { CONTROLLER = { is_in_faction_with = ROOT } }
		15 = { CONTROLLER = { is_in_faction_with = ROOT } }
		14 = { CONTROLLER = { is_in_faction_with = ROOT } }
		30 = { CONTROLLER = { is_in_faction_with = ROOT } }
		23 = { CONTROLLER = { is_in_faction_with = ROOT } }
		19 = { CONTROLLER = { is_in_faction_with = ROOT } }
		1016 = { CONTROLLER = { is_in_faction_with = ROOT } }
		NOT = {
			has_war_with = SOV
		}
		ENG = {
			is_ai = no
		}
	}

	immediate = {
		set_country_flag = {
			flag = sealion_active
			days = 200
			value = 1
		}
	}

	option = {}

}

