add_namespace = ger_armor

########## Templates

country_event = {
	id = ger_armor.001
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		date > 1936.1.1
	}

	immediate = {

		@AVERAGE_MANPOWER_IN_DIVISION = 16520 #tanks/motorized are lower
		@INFANTRY_DIVISION_MANPOWER = 16900
		@INFANTRY_DIVISION_INFANTRY_EQUIPMENT = 1172
		@INFANTRY_DIVISION_HEAVY_INFANTRY_EQUIPMENT = 550
		@INFANTRY_DIVISION_ARTILLERY_EQUIPMENT = 74
		@INFANTRY_DIVISION_HEAVY_ARTILLERY_EQUIPMENT = 16
		@INFANTRY_DIVISION_SUPPORT_EQUIPMENT = 560
		@INFANTRY_DIVISION_MOTORIZED_EQUIPMENT = 38
		@INFANTRY_DIVISION_ANTI_TANK_EQUIPMENT = 20
		@INFANTRY_DIVISION_ANTI_AIR_EQUIPMENT = 12

		GER_fedor_von_bock = {
			demote_leader = yes
		}
		GER_gerd_von_rundstedt = {
			demote_leader = yes
		}
		GER_erwin_von_witzleben = {
			demote_leader = yes
		}
		GER_wilhelm_ritter_von_leeb = {
			demote_leader = yes
		}
		GER_gotthard_heinrici = {
			promote_leader = yes
		}
		GER_erich_von_manstein = {
			promote_leader = yes
		}
		GER_walter_model = {
			promote_leader = yes
		}
		GER_erwin_rommel = {
			promote_leader = yes
		}
		GER_walter_von_reichenau = {
			promote_leader = yes
		}
		GER_wilhelm_list = {
			promote_leader = yes
		}
		set_country_flag = infantry_template_ger
		set_country_flag = motorized_template_ger
		GER_gustav_anton_von_wietersheim = {
			add_skill_level = 1
			#add_attack = 1
			#add_defense = 1
			#add_planning = 1
		}
		add_advisor_role = {
			character = "GER_gustav_anton_von_wietersheim"
			advisor = {
				slot = high_command
				idea_token = GER_gustav_anton_von_wietersheim
				ledger = army
				traits = {
					army_armored_2
				}
				cost = 100
				ai_will_do = {
					base = 0
					modifier = {
						add = 100
						date > 1939.6.1
					}
				}
			}
		}
	}
	option = {}
}

country_event = {
	id = ger_armor.002
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		if = {
			limit = {
				has_dlc = "No Step Back"
			}
			has_tech = ger_support_tank_chassis_1_2
			has_tech = ger_medium_tank_chassis_2_2
		}
		if = {
			limit = {
				NOT = { has_dlc = "No Step Back" }
			}
			date > 1938.7.1
		}
		#NOT = { date > 1939.6.1 }
		has_template = "Light Panzer Division"
	}

	immediate = {
		add_units_to_division_template = {
			template_name = "Light Panzer Division"
			regiments = {
				medium_armor = 0
				medium_armor = 0
				infantry_support_armor = 1
				infantry_support_armor = 1
			}
		}
		add_equipment_to_stockpile = { type = tank_ger_medium_chassis_2_2 amount = 250 producer = GER } #Can be removed once production is sorted out
		add_equipment_to_stockpile = { type = tank_ger_medium_chassis_infantry_support_3_2 amount = 125 producer = GER } #Can be removed once production is sorted out
	}
}

country_event = {
	id = ger_armor.003
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		has_tech = ger_mechanized_artillery_2
	}

	immediate = {
		set_country_flag = mechanized_template_ger
	}
	option = {}
}

country_event = {
	id = ger_armor.004
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		if = {
			limit = {
				has_dlc = "No Step Back"
			}
			has_tech = ger_medium_tank_chassis_2_2
			has_tech = ger_support_tank_chassis_1_2
			has_tech = ger_assault_tank_2_spg
		}
		else = {
			has_tech = ger_medium_1
			has_tech = ger_support_1
			has_tech = ger_light_1_td
			has_tech = ger_light_1_aa
		}
	}

	immediate = {
		set_country_flag = light_armor_template_1_ger
		# add_political_power = 2000

		@ARMOR_DIVISION_MANPOWER = 15000
		@ARMOR_DIVISION_INFANTRY_EQUIPMENT = 542
		@ARMOR_DIVISION_HEAVY_INFANTRY_EQUIPMENT = 250
		@ARMOR_DIVISION_LIGHT_TANK_EQUIPMENT = 15
		@ARMOR_DIVISION_medium_tank_support_chassis = 100
		@ARMOR_DIVISION_MEDIUM_TANK_EQUIPMENT = 125
		@ARMOR_DIVISION_light_tank_destroyer_chassis = 25
		@ARMOR_DIVISION_HEAVY_ARTILLERY_EQUIPMENT = 16
		@ARMOR_DIVISION_SUPPORT_EQUIPMENT = 520
		@ARMOR_DIVISION_MOTORIZED_EQUIPMENT = 248
		@ARMOR_DIVISION_MECHANIZED_EQUIPMENT = 250
		@ARMOR_DIVISION_LIGHT_TANK_ANTI_AIR_EQUIPMENT = 10
	}
	option = {}
}

country_event = {
	id = ger_armor.005
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		if = {
			limit = {
				has_dlc = "No Step Back"
			}
			date > 1942.8.1
		}
		else = {
			has_tech = ger_medium_3_td
			has_tech = ger_medium_4_spg
			has_tech = ger_medium_4_aa
		}
	}

	immediate = {
		set_country_flag = medium_armor_template_2_ger
	}

	option = {}
}


############## Modern Armor


country_event = {
	id = ger_armor.006
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		if = {
			limit = {
				has_dlc = "No Step Back"
			}
			has_tech = ger_modern_tank_chassis_1
			has_tech = ger_medium_tank_5_spg
		}
		else = {
			has_tech = ger_modern_1
		}
	}

	immediate = {
		set_country_flag = medium_armor_template_3_ger
	}

	option = {}
}

country_event = {
	id = ger_armor.007
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		if = {
			limit = {
				has_dlc = "No Step Back"
			}
			date > 1944.7.1
		}
		else = {
			has_tech = ger_modern_2_td
			has_tech = ger_modern_2_spg
			has_tech = ger_modern_2_aa
		}
	}

	immediate = {
		set_country_flag = medium_armor_template_4_ger

		set_technology = {
			modern_oil_processing = 1
			superior_oil_processing = 1
			superior_rubber_processing = 1
		}
	}

	option = {}
}

############## Heavy Armor

country_event = {
	id = ger_armor.008
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		if = {
			limit = {
				has_dlc = "No Step Back"
			}
			has_tech = ger_medium_tank_5_spg
			has_tech = ger_heavy_tank_chassis_3
			OR = {
				has_tech = ger_heavy_tank_2_td
				has_tech = ger_heavy_tank_1_td
			}
		}
		else = {
			has_tech = ger_medium_4_spg
			has_tech = ger_medium_4_aa
		}
	}

	immediate = {
		set_country_flag = heavy_armor_template_1_ger
	}

	option = {}
}

#country_event = {
#	id = ger_armor.009
#	hidden = yes
#
#	mean_time_to_happen = { days = 1 }
#
#	fire_only_once = yes
#
#	trigger = {
#		tag = GER
#		is_ai = yes
#		if = {
#			limit = {
#				has_dlc = "No Step Back"
#			}
#			date > 1944.7.1
#		}
#		else = {
#			has_tech = ger_heavy_4_spg
#		}
#	}
#
#	immediate = {
#		set_country_flag = heavy_armor_template_2_ger
#
#		division_template = {
#			name = "German Adv Heavy Tank Division"
#			division_names_group = GER_Arm_01
#			template_counter = 132
#			priority = 2
#
#			regiments = {
#				heavy_armor = { x = 0 y = 0 }
#				heavy_armor = { x = 0 y = 1 }
#				heavy_armor = { x = 0 y = 2 }
#
#				heavy_armor = { x = 1 y = 0 }
#				heavy_armor = { x = 1 y = 1 }
#				heavy_armor = { x = 1 y = 2 }
#				heavy_tank_destroyer_brigade = { x = 1 y = 3 }
#
#				heavy_armor = { x = 2 y = 0 }
#				heavy_armor = { x = 2 y = 1 }
#				heavy_armor = { x = 2 y = 2 }
#
#				mechanized = { x = 3 y = 0 }
#				mechanized = { x = 3 y = 1 }
#				mechanized = { x = 3 y = 2 }
#
#				mechanized = { x = 4 y = 0 }
#				mechanized = { x = 4 y = 1 }
#			}
#
#			support = {
#				assault_engineers = { x = 0 y = 0 }
#				mot_logistics_company = { x = 0 y = 1 }
#				mot_field_hospital = { x = 0 y = 2 }
#				heavy_maintenance_company = { x = 0 y = 3 }
#				mot_signal_company = { x = 0 y = 4 }
#
#				armoured_recon = { x = 1 y = 0 }
#				heavy_tank_destroyer = { x = 1 y = 1 }
#				heavy_sp_artillery = { x = 1 y = 2 }
#				medium_sp_anti_air = { x = 1 y = 3 }
#			}
#		}
#	}
#
#	option = {}
#}

country_event = {
	id = ger_armor.909
	hidden = yes
	fire_only_once = yes
	mean_time_to_happen = { days = 2 }

	trigger = {
		tag = GER
		is_ai = yes
		date > 1940.4.1
		surrender_progress < 0.2
		has_army_size = {
			size < 13
			type = armor
		}
	}

	immediate = {
		navy_experience = 300
	}

	option = {}

}

country_event = {
	id = ger_armor.910
	hidden = yes

	mean_time_to_happen = { days = 2 }
	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		date > 1940.4.24
		date < 1940.7.1
		has_war_with = FRA
		has_army_manpower = { size < 1700000 }
		is_historical_focus_on = yes
	}

	immediate = {
	}
	option = {}
}

country_event = {
	id = ger_armor.912
	hidden = yes

	mean_time_to_happen = { days = 2 }
	fire_only_once = yes
	trigger = {
		tag = GER
		is_ai = yes
		date > 1941.4.1
		OR = {
			date < 1941.7.1
			has_war_with = SOV
		}
		has_army_manpower = { size < 2800000 }
		is_historical_focus_on = yes
	}

	immediate = {
		navy_experience = 300
	}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 57 59 803 799 51 55 42 800 54 60 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
	}
	option = {}
}

country_event = {
	id = ger_armor.913
	hidden = yes

	mean_time_to_happen = { days = 2 }
	fire_only_once = yes

	trigger = {
		tag = GER
		is_ai = yes
		date > 1941.5.20
		has_army_size = {
			size < 25
			type = armor
		}
	}

	immediate = {
	}

	option = {}

}