add_namespace = sov_armor

country_event = {
	id = sov_armor.001
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		has_tech = sov_motorised_infantry
	}

	immediate = {

		SOV_georgy_zhukov = {
			promote_leader = yes
		}
		SOV_aleksandr_vasilevsky = {
			promote_leader = yes
		}
		SOV_konstantin_rokossovsky = {
			promote_leader = yes
		}
		SOV_vasily_kuznetsov = {
			promote_leader = yes
		}
		SOV_nikolay_vatutin = {
			promote_leader = yes
		}
		SOV_semyon_timoshenko = {
			promote_leader = yes
		}
		SOV_andrey_yeryomenko = {
			promote_leader = yes
		}
	}
	option = {}
}

country_event = {
	id = sov_armor.014
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		has_template = "Soviet Rifle Division"
		has_tech = tech_signal_company
		has_tech = tech_field_hospital
		has_tech = tech_maintenance_company
	}

	immediate = {
		add_units_to_division_template = {
			template_name = "Soviet Rifle Division"
			support = {
				horse_field_hospital = 0
				mot_signal_company = 0
				horse_maintenance_company = 1
			}
		}
	}

	option = {}

}




country_event = {
	id = sov_armor.600
	hidden = yes

	mean_time_to_happen = { days = 8 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date > 1936.8.1
	}

	immediate = {
		add_opinion_modifier = { target = USA modifier = ai_trade_fix }
		add_opinion_modifier = { target = USA modifier = ai_trade_fix_2 }
		reverse_add_opinion_modifier = { target = USA modifier = ai_trade_fix }
		reverse_add_opinion_modifier = { target = USA modifier = ai_trade_fix_2 }

		add_opinion_modifier = { target = ENG modifier = ai_trade_fix }
		add_opinion_modifier = { target = ENG modifier = ai_trade_fix_2 }
		reverse_add_opinion_modifier = { target = ENG modifier = ai_trade_fix }
		reverse_add_opinion_modifier = { target = ENG modifier = ai_trade_fix_2 }

		add_opinion_modifier = { target = POR modifier = ai_trade_fix }
		add_opinion_modifier = { target = POR modifier = ai_trade_fix_2 }
		reverse_add_opinion_modifier = { target = POR modifier = ai_trade_fix }
		reverse_add_opinion_modifier = { target = POR modifier = ai_trade_fix_2 }


		add_opinion_modifier = { target = SAF modifier = ai_trade_fix }
		add_opinion_modifier = { target = SAF modifier = ai_trade_fix_2 }
		reverse_add_opinion_modifier = { target = SAF modifier = ai_trade_fix }
		reverse_add_opinion_modifier = { target = SAF modifier = ai_trade_fix_2 }

		add_opinion_modifier = { target = TUR modifier = ai_trade_fix }
		add_opinion_modifier = { target = TUR modifier = ai_trade_fix_2 }
		reverse_add_opinion_modifier = { target = TUR modifier = ai_trade_fix }
		reverse_add_opinion_modifier = { target = TUR modifier = ai_trade_fix_2 }

		add_opinion_modifier = { target = SIA modifier = ai_trade_fix }
		add_opinion_modifier = { target = SIA modifier = ai_trade_fix_2 }
		reverse_add_opinion_modifier = { target = SIA modifier = ai_trade_fix }
		reverse_add_opinion_modifier = { target = SIA modifier = ai_trade_fix_2 }

		add_opinion_modifier = { target = INS modifier = ai_trade_fix }
		add_opinion_modifier = { target = INS modifier = ai_trade_fix_2 }
		reverse_add_opinion_modifier = { target = INS modifier = ai_trade_fix }
		reverse_add_opinion_modifier = { target = INS modifier = ai_trade_fix_2 }
	}

	option = {}
}

country_event = {
	id = sov_armor.601
	hidden = yes

	mean_time_to_happen = { days = 8 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date < 1937.1.1
		has_country_flag = sov_infantry_template
	}

	immediate = {
		delete_unit_template_and_units = { division_template = "Strelkovaya Diviziya" }
		delete_unit_template_and_units = { division_template = "NKVD Strelkovaya Diviziya" }
		delete_unit_template_and_units = { division_template = "NKVD Pogranichnaya Brigada" }
		delete_unit_template_and_units = { division_template = "Kavaleriyskaya Diviziya" }
		delete_unit_template_and_units = { division_template = "Motostrelkovaya Diviziya" }
		delete_unit_template_and_units = { division_template = "Vozdushno-Desantnaya Diviziya" }
		delete_unit_template_and_units = { division_template = "Brigada Morskoi Pekhoty" }
	}

	option = {}
}

country_event = {
	id = sov_armor.602
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		NOT = { has_war_with = GER }
		NOT = { has_government = fascism }
		OR = {
			AND = {
				date > 1942.8.1
				NOT = { has_global_flag = uk_evacuated }
				NOT = { has_global_flag = GER_SOV_ceasefire }
				has_completed_focus = SOV_eradicate_western_fascism
			}
			AND = {
				date > 1941.6.1
				NOT = { has_global_flag = uk_evacuated }
				ENG = { surrender_progress > 0.2 }
			}
			AND = {
				date > 1941.1.1
				GER = { has_war_with = USA }
				USA = { surrender_progress > 0.2 }
			}
		}
	}

	immediate = {
		every_other_country = {
			limit = {
				has_government = fascism
				OR = {
					tag = GER
					is_in_faction_with = GER
					is_subject_of = GER
					tag = ROM
					tag = HUN
				}
				NOT = { has_war_with = ROOT }
			}
			ROOT = {
				declare_war_on = {
					target = PREV
					type = annex_everything
				}
			}
		}
	}

	option = {}
}

country_event = {
	id = sov_armor.604
	hidden = yes

	mean_time_to_happen = { days = 8 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date > 1940.1.1
		OR = {
			date > 1942.1.1
			NOT = {
				has_idea = SOV_molotov_ribbentrop_pact
			}
		}
	}

	immediate = {
		add_opinion_modifier = { target = USA modifier = ai_trade_fix }
		add_opinion_modifier = { target = USA modifier = ai_trade_fix_2 }
		reverse_add_opinion_modifier = { target = USA modifier = ai_trade_fix }
		reverse_add_opinion_modifier = { target = USA modifier = ai_trade_fix_2 }

		add_opinion_modifier = { target = SAF modifier = ai_trade_fix }
		add_opinion_modifier = { target = SAF modifier = ai_trade_fix_2 }
		reverse_add_opinion_modifier = { target = SAF modifier = ai_trade_fix }
		reverse_add_opinion_modifier = { target = SAF modifier = ai_trade_fix_2 }
	}

	option = {}
}

country_event = {
	id = sov_armor.608
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		has_war_with = GER
		NOT = { has_war_with = SLO }
		OR = {
			SLO = { is_puppet_of = GER }
			SLO = { is_in_faction_with = GER }
		}
	}

	immediate = {
		SLO = {
			add_to_war = { targeted_alliance = GER enemy = SOV hostility_reason = asked_to_join }
		}
	}

	option = {}
}

country_event = {
	id = sov_armor.610
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		has_war_with = GER
	}

	immediate = {
		add_equipment_to_stockpile = { type = convoy_1 amount = 1800 producer = SOV }
		add_equipment_to_stockpile = { type = train_equipment_1 amount = 1000 producer = SOV } ###I need to find another fix
	}

	option = {}
}

country_event = {
	id = sov_armor.611
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		date > 1943.4.1
		tag = SOV
		is_ai = yes
	}

	immediate = {
		add_equipment_to_stockpile = { type = train_equipment_1 amount = 2000 producer = SOV }
		add_equipment_to_stockpile = { type = convoy_1 amount = 750 producer = SOV }
	}

	option = {}

}

country_event = {
	id = sov_armor.612
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		date > 1944.3.1
		tag = SOV
		is_ai = yes
	}

	immediate = {
		add_equipment_to_stockpile = { type = train_equipment_1 amount = 3000 producer = SOV } ###I need to find another fix
		add_equipment_to_stockpile = { type = convoy_1 amount = 1000 producer = SOV }
	}

	option = {}

}

country_event = {
	id = sov_armor.613
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date > 1942.12.1
	}

	immediate = {
		SOV_georgy_zhukov = {
			add_trait = { trait = bearer_of_artillery }
		}
		SOV_aleksandr_vasilevsky = {
			add_trait = { trait = bearer_of_artillery }
		}
		SOV_konstantin_rokossovsky = {
			add_trait = { trait = bearer_of_artillery }
		}
		SOV_boris_shaposhnikov = {
			add_trait = { trait = bearer_of_artillery }
		}
		SOV_nikolay_vatutin = {
			add_trait = { trait = bearer_of_artillery }
		}
		SOV_ivan_konev = {
			add_trait = { trait = bearer_of_artillery }
		}
		SOV_semyon_timoshenko = {
			add_trait = { trait = bearer_of_artillery }
		}
		SOV_vasily_chuykov = {
			add_trait = { trait = bearer_of_artillery }
		}
		SOV_aleksandr_gorbatov = {
			add_trait = { trait = bearer_of_artillery }
		}
		SOV_fyodor_tolbukhin = {
			add_trait = { trait = bearer_of_artillery }
		}
		every_army_leader = {
			limit = {
				has_trait = organisational_leader
				is_field_marshal = yes
			}
			remove_trait = { trait = organisational_leader }
			add_trait = { trait = inspirational_leader }
		}
	}

	option = {}
}

country_event = {
	id = sov_armor.615
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		date > 1944.9.1
		tag = SOV
		is_ai = yes
	}

	immediate = {
		add_equipment_to_stockpile = { type = usa_motorized_equipment_1 amount = 20000 producer = USA }
	}

	option = {}

}

country_event = {
	id = sov_armor.616
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		date > 1942.1.1
		tag = SOV
		is_ai = yes
		USA = {
			is_ai = yes
		}
	}

	immediate = {
		USA = {
			give_resource_rights = {
				receiver = SOV
				state = 388
				resources = { coal }
			}
		}
	}

	option = {}

}

country_event = {
	id = sov_armor.617
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		date > 1942.1.1
		tag = SOV
		is_ai = yes
		USA = {
			is_ai = yes
		}
		has_war_with = USA
	}

	immediate = {
		remove_resource_rights = 388
	}

	option = {}

}

country_event = {
	id = sov_armor.618
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		has_global_flag = GER_SOV_ceasefire
		has_war = no
	}

	immediate = {
		set_capital = { state = 572 }
		#Pechora - Serov
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 10723
			target_province = 10720
		}
		#Urzhum - Ukhta
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 12527
			target_province = 1295
		}
		#Pechora - West Nenets
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 9121
			target_province = 9099
		}
		#Pechora - Naryan-Mar
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 105
			target_province = 10723
		}
		#Middle Urals
		build_railway = {
			level = 4
			build_only_on_allied = yes
			fallback = yes
			start_province = 237
			target_province = 10136
		}
		build_railway = {
			level = 1
			build_only_on_allied = yes
			fallback = yes
			start_province = 10142
			target_province = 10136
		}
		#Southern Urals
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 4411
			target_province = 4261
		}
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 4261
			target_province = 10253
		}
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 4261
			target_province = 12128
		}
	}

	option = {}
}

country_event = {
	id = sov_armor.855
	hidden = yes

	mean_time_to_happen = { days = 4 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		is_historical_focus_on = yes
		ENG = { has_war_with = PER }
		ENG = { has_completed_focus = ENG_secure_iran }
		NOT = { has_war_With = PER }
	}

	option = {
		declare_war_on = {
			type = take_state_focus
			target = PER
			generator = { 419 420 266 418 416 }
		}
	}
}

country_event = {
	id = sov_armor.902
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date > 1939.2.1
		NOT = { date > 1940.1.1 }
	}

	immediate = {
		if = {
			limit = { has_aat = yes }
			mio:SOV_morozov_design_bureau_organization = {
				add_mio_funds = 3000
			}
			mio:SOV_kirov_organization = {
				add_mio_funds = 3000
			}
		}
		add_equipment_to_stockpile = { type = convoy_1 amount = 100 producer = SOV }
	}

	option = {}
}

country_event = {
	id = sov_armor.904
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date > 1940.1.1
	}

	immediate = {
		add_ideas = nepotism_naval_academy_spirit
		add_equipment_to_stockpile = { type = train_equipment_1 amount = 2250 producer = SOV } ###I need to find another fix
		if = {
			limit = {
				has_idea = mass_assault_corps_spirit
			}
			remove_ideas = mass_assault_corps_spirit
		}
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
	}

	option = {}
}

country_event = {
	id = sov_armor.905
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date > 1940.7.1
		NOT = { date > 1941.7.1 }
	}

	immediate = {
		#load_oob = "SOV_air_2"
		add_equipment_to_stockpile = { type = convoy_1 amount = 50 producer = SOV }
	}

	option = {}
}

country_event = {
	id = sov_armor.906
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date > 1941.1.1
	}

	immediate = {
		if = {
			limit = {
				NOT = {
            		has_completed_track = tier_1_artillery
				}
			}
			WA_add_mastery_artillery_200 = yes
		}
		if = {
			limit = {
				NOT = {
            		has_completed_track = tier_1_armour
				}
			}
			WA_add_mastery_armour_200 = yes
		}
		if = {
			limit = {
				NOT = {
            		has_completed_track = tier_1_infantry
				}
			}
			WA_add_mastery_infantry_200 = yes
		}
		if = {
			limit = {
				NOT = {
					has_doctrine = armoured_waves
					has_completed_focus = SOV_approach_tukhachevsky
				}
			}
            set_sub_doctrine = armoured_waves
		}
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
	}

	option = {}
}

country_event = {
	id = sov_armor.908
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date > 1941.7.1
		NOT = { date > 1942.7.1 }
	}

	immediate = {
		#upgrade_intelligence_agency = upgrade_crypto_strength_2
		#upgrade_intelligence_agency = upgrade_crypto_strength_2
		#upgrade_intelligence_agency = upgrade_crypto_strength_2
		#upgrade_intelligence_agency = upgrade_crypto_strength_2
		#upgrade_intelligence_agency = upgrade_crypto_strength_2
		#upgrade_intelligence_agency = upgrade_crypto_strength_2

		add_equipment_to_stockpile = { type = convoy_1 amount = 50 producer = SOV }
		if = {
			limit = {
				USA = { is_ai = no }
			}
			add_equipment_to_stockpile = { type = sov_inf_9 amount = 150000 producer = SOV }
			add_equipment_to_stockpile = { type = sov_hv_inf_1 amount = 100000 producer = SOV }
			add_equipment_to_stockpile = { type = support_equipment_1 amount = 80000 producer = SOV }
			add_equipment_to_stockpile = { type = sov_art_2 amount = 9000 producer = SOV }
			add_equipment_to_stockpile = { type = sov_hv_art_2 amount = 5000 producer = SOV }
			add_equipment_to_stockpile = { type = sov_at_4 amount = 10000 producer = SOV }
		}
		else = {
			add_equipment_to_stockpile = { type = sov_inf_9 amount = 100000 producer = SOV }
			add_equipment_to_stockpile = { type = sov_hv_inf_1 amount = 70000 producer = SOV }
			add_equipment_to_stockpile = { type = support_equipment_1 amount = 55000 producer = SOV }
			add_equipment_to_stockpile = { type = sov_art_2 amount = 6000 producer = SOV }
			add_equipment_to_stockpile = { type = sov_hv_art_2 amount = 3500 producer = SOV }
			add_equipment_to_stockpile = { type = sov_at_4 amount = 7500 producer = SOV }
		}
	}

	option = {}
}

#
#country_event = {
#	id = sov_armor.909
#	hidden = yes
#
#	mean_time_to_happen = { days = 2 }
#
#	fire_only_once = yes
#
#	trigger = {
#		tag = SOV
#		is_ai = yes
#		date > 1941.12.1
#		has_war = yes
#	}
#
#	immediate = {
#		add_equipment_to_stockpile = { type = sov_art_2 amount = 800 producer = SOV }
#	}
#
#	option = {}
#}

country_event = {
	id = sov_armor.917
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date > 1942.1.1
		has_war = yes
		has_deployed_air_force_size = { size < 4000 type = fighter }
	}

	immediate = {
		add_timed_idea = { idea = soviet_ai_air days = 360 }
		if = {
			limit = {
				has_template = "Soviet Medium Tank Division"
			}
			add_units_to_division_template = {
				template_name = "Soviet Medium Tank Division"
				regiments = {
					medium_armor = 0
					medium_armor = 1
					medium_armor = 2
				}
			}
		}
	}

	option = {}
}


country_event = {
	id = sov_armor.927
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		date > 1942.1.1
		tag = SOV
		is_ai = yes
		has_war = yes
	}

	immediate = {
		add_ideas = steel_wings_steel_hearts_spirit
	}

	option = {}

}

country_event = {
	id = sov_armor.928
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date > 1943.5.1
		has_war = yes
		#has_equipment = { heavy_infantry_equipment < 10000 }
	}

	immediate = {
		#add_equipment_to_stockpile = { type = sov_inf_3 amount = 50000 producer = SOV }
		#add_equipment_to_stockpile = { type = sov_art_2 amount = 3000 producer = SOV }
		#add_equipment_to_stockpile = { type = sov_at_4 amount = 4000 producer = SOV }
		#add_equipment_to_stockpile = { type = sov_hv_inf_4 amount = 70000 producer = SOV }
		#add_equipment_to_stockpile = { type = sov_mechanized_equipment_3 amount = 3000 producer = SOV }
	}

	option = {}
}

country_event = {
	id = sov_armor.931
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		date > 1941.1.1
	}

	immediate = {
        set_sub_doctrine = concentrated_formations
        set_sub_doctrine = formation_flying
		add_ideas = battlefield_utility_spirit
		build_railway = {
			path = { 9082 60 3160 11103 6034 6075 72 }
		}
		build_railway = {
			path = { 9190 11153 11150 }
		}
		WA_add_mastery_artillery_100 = yes
		WA_add_mastery_infantry_100 = yes
		WA_add_mastery_armour_100 = yes
		add_ideas = operational_reserve_spirit
		set_technology = { ai_bunker = 1 }
	}
}

country_event = {
	id = sov_armor.932
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		NOT = {
			has_full_control_of_state = 219 #Moscow
		}
		controls_state = 249
		#has_country_flag = ai_barb_timer
		has_template = "Soviet Medium Tank Division"
		has_template = "Soviet Rifle Division"
		difficulty > 2 #Hard and above Difficulty
		has_war_with_major = yes
	}

	immediate = {
		load_oob = "SOV_failsafe"
	}

	option = {}
}

country_event = {
	id = sov_armor.933
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		NOT = {
			has_full_control_of_state = 195 #Leningrad
		}
		controls_state = 249
		#has_country_flag = ai_barb_timer
		has_template = "Soviet Medium Tank Division"
		has_template = "Soviet Rifle Division"
		difficulty > 2 #Hard and above Difficulty
		has_war_with_major = yes
	}

	immediate = {
		load_oob = "SOV_failsafe_2"
	}

	option = {}
}

country_event = {
	id = sov_armor.934
	hidden = yes

	mean_time_to_happen = { days = 2 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		NOT = {
			has_full_control_of_state = 217 #Stalingrad
		}
		controls_state = 249
		#has_country_flag = ai_barb_timer
		has_template = "Soviet Heavy Tank Division"
		has_template = "Soviet Medium Tank Division"
		has_template = "Soviet Rifle Division"
		difficulty > 2 #Hard and above Difficulty
		has_war_with_major = yes
	}

	immediate = {
		load_oob = "SOV_failsafe_3"
	}

	option = {}
}

country_event = {
	id = sov_armor.971
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		FRA = {
			is_ai = yes
		}
		ENG = {
			has_completed_focus = ENG_a_change_in_course
		}
		has_war_with = FRA
		has_war_with = POL
		date < 1940.1.1
	}

	immediate = {
		white_peace = {
			tag = FRA
		}
	}
}

country_event = {
	id = sov_armor.972
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		has_global_flag = SOV_soviet_civil_war_over
		has_completed_focus = SOV_approach_tukhachevsky
	}

	immediate = {
		SOS = {
			every_unit_leader = {
				set_nationality = SOV
			}
		}
		SOV_georgy_zhukov = {
			set_nationality = SOV
		}
		SOV_georgy_zhukov_ai = {
			promote_leader = yes
		}
		SOV_konstantin_rokossovsky_ai = {
			promote_leader = yes
		}
		set_sub_doctrine = advanced_squad_tactics
		set_sub_doctrine = combined_warfare
	}
}

country_event = {
	id = sov_armor.973
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		has_global_flag = SOV_soviet_civil_war_over
		has_completed_focus = SOV_approach_tukhachevsky
		date > 1939.10.1
	}

	immediate = {
		set_sub_doctrine = armoured_waves
		add_war_support = 0.5
		activate_advisor = georgy_zhukov
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
		#random_owned_controlled_state = {
		#	prioritize = { 247 248 253 252 255 254 223 217 219 229 239 250 }
		#	limit = {
		#		free_building_slots = {
		#			building = arms_factory
		#			size > 3
		#			include_locked = yes
		#		}
		#	}
		#	add_building_construction = {
		#		type = arms_factory
		#		level = 4
		#		instant_build = yes
		#	}
		#}
	}
}

country_event = { #Ai doesnt prioritize or construct railways/supplyhubs
	id = sov_armor.981
	hidden = yes

	mean_time_to_happen = { days = 1 }

	fire_only_once = yes

	trigger = {
		tag = SOV
		is_ai = yes
		any_enemy_country = {
			is_major = yes
		}
		controls_state = 249
		difficulty > 1 #normal
		OR = {
			has_completed_focus = SOV_defense_of_the_motherland
			focus_progress = {
				focus = SOV_defense_of_the_motherland
				progress > 0.1
			}
		}
		NOT = {
			any_enemy_country = {
				original_tag = SOV
			}
		}
	}

	immediate = {
		#Caucuses Area
		build_railway = {
			level = 2
			build_only_on_allied = yes
			fallback = yes
			start_province = 7661
			target_province = 6701
		}
		#Stalingrad Area
		build_railway = {
			level = 2
			path = { 3578 11523 }
		}
		build_railway = {
			level = 2
			path = { 11523 11460 6479 3517 6541 6516 }
		}
		build_railway = {
			level = 2
			path = { 6516 520 11474 }
		}
		build_railway = {
			level = 2
			build_only_on_allied = yes
			fallback = yes
			start_province = 6516
			target_province = 9753
		}
		#Kuybyshev to Engels
		build_railway = {
			level = 2
			build_only_on_allied = yes
			fallback = yes
			start_province = 9365
			target_province = 6601
		}
		build_railway = {
			level = 2
			build_only_on_allied = yes
			fallback = yes
			start_province = 6601
			target_province = 11523
		}
		#Kazan to Ural
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 6278
			target_province = 6338
		}
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 6278
			target_province = 10136
		}
		build_railway = {
			level = 3
			path = { 10136 10142 }
		}
		#Kazan to Moscow
		build_railway = {
			level = 1
			build_only_on_allied = yes
			fallback = yes
			start_province = 6338
			target_province = 11344
		}
		build_railway = {
			level = 1
			build_only_on_allied = yes
			fallback = yes
			start_province = 11375
			target_province = 301
		}
		build_railway = {
			level = 1
			build_only_on_allied = yes
			fallback = yes
			start_province = 11344
			target_province = 3290
		}
		#Kazan to Kirov
		build_railway = {
			level = 2
			build_only_on_allied = yes
			fallback = yes
			start_province = 260
			target_province = 6124
		}
		#Kirov to Volgo North
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 9082
			target_province = 72
		}
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 72
			target_province = 186
		}
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 186
			target_province = 6124
		}
		build_railway = {
			level = 3
			path = { 186 108 }
		}
		#Kirov to Gorgi
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 11375
			target_province = 6191
		}
		build_railway = {
			level = 2
			path = { 6191 9370 6124 }
		}
		#Kirov to Yaroslavl
		build_railway = {
			level = 2
			build_only_on_allied = yes
			fallback = yes
			start_province = 6191
			target_province = 143
		}
		build_railway = {
			level = 2
			build_only_on_allied = yes
			fallback = yes
			start_province = 143
			target_province = 11099
		}
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 143
			target_province = 9131
		}
		#Yaroslavl
		build_railway = {
			level = 2
			build_only_on_allied = yes
			fallback = yes
			start_province = 121
			target_province = 6203
		}
		############################## URALS
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 9292
			target_province = 1821
		}
		build_railway = {
			level = 2
			build_only_on_allied = yes
			fallback = yes
			start_province = 9292
			target_province = 1292
		}
		build_railway = {
			level = 4
			build_only_on_allied = yes
			fallback = yes
			start_province = 1292
			target_province = 4824
		}
		build_railway = {
			level = 2
			build_only_on_allied = yes
			fallback = yes
			start_province = 9292
			target_province = 1278
		}
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 1821
			target_province = 7375
		}
		#Chelyabinsk
		build_railway = {
			level = 2
			build_only_on_allied = yes
			fallback = yes
			start_province = 9292
			target_province = 10256
		}
		build_railway = {
			level = 3
			build_only_on_allied = yes
			fallback = yes
			start_province = 9292
			target_province = 4411
		}
	}
}

